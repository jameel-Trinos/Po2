module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},6920,(e,t,r)=>{"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=u(e),o=n[0],i=n[1],l=new s((o+i)*3/4-i),p=0,d=i>0?o-4:o;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],l[p++]=t>>16&255,l[p++]=t>>8&255,l[p++]=255&t;return 2===i&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,l[p++]=255&t),1===i&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,l[p++]=t>>8&255,l[p++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,a=r%3,s=[],o=0,i=r-a;o<i;o+=16383)s.push(function(e,t,r){for(var a,s=[],o=t;o<r;o+=3)a=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[a>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}(e,o,o+16383>i?i:o+16383));return 1===a?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===a&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=o.length;i<l;++i)n[i]=o[i],a[o.charCodeAt(i)]=i;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}a[45]=62,a[95]=63},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},80451,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),a=e.i(59756),s=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),u=e.i(16795),p=e.i(87718),d=e.i(95169),c=e.i(32084),h=e.i(66012),x=e.i(70101),g=e.i(26937),m=e.i(10372),f=e.i(93695);e.i(52474);var y=e.i(220),v=e.i(89171),R=e.i(34731);async function A(e){try{let t=process.env.GEMINI_API_KEY||"AIzaSyAAdOixGAtP3GdflcC0fzIQdIumNrj0Cao",{text:r}=await e.json();if(!r||"string"!=typeof r)return v.NextResponse.json({error:"Invalid request: text is required."},{status:400});let n=new R.GoogleGenAI({apiKey:t}),a=`
You are an expert financial compliance reviewer specializing in FINRA and SEC regulations. Analyze the following text extracted from a Word document.

CRITICAL INSTRUCTIONS:
- ONLY report issues that ACTUALLY EXIST in the provided text
- Extract the EXACT original text from the document (word-for-word, including any errors)
- DO NOT make up or infer issues that aren't clearly present
- Focus on providing HIGH-QUALITY, RELEVANT suggestions based on what you actually see

Your task is to identify:
1. COMPLIANCE VIOLATIONS (critical/warning):
   - Missing risk disclosures required by FINRA/SEC
   - Prohibited claims (guaranteed returns, misleading performance predictions)
   - Required disclaimers that are missing or incomplete
   - Misleading or deceptive language about investments
   - Failure to disclose conflicts of interest
   - Omission of material facts
   - Improper comparisons or benchmarks
   - Use of superlatives without substantiation

2. GRAMMAR/STYLE ISSUES (suggestion):
   - Grammatical mistakes (subject-verb agreement, tense errors, etc.)
   - Spelling errors
   - Awkward or unclear phrasing
   - Punctuation issues
   - Sentence structure problems
   - Word choice improvements for clarity

For each issue found, you MUST provide:
- text: the EXACT problematic text snippet copied word-for-word from the document (minimum 3-5 words for context)
- suggestion: the corrected version with the same context length
- issue: a clear, specific explanation of what's wrong and why the change is needed
- page: 1 (since Word documents don't have page markers in extracted text)
- category: one of "compliance", "grammar", or "style"
- severity: "critical" (compliance violations, must fix), "warning" (important issues), or "suggestion" (improvements)

IMPORTANT RULES:
1. The "text" field MUST be an exact copy from the document - verify it exists in the text provided
2. Include enough context (3-10 words) so the text can be uniquely identified
3. Make sure your suggestion replaces ONLY the problematic part while maintaining context
4. If you cannot find clear, specific issues, return an empty array rather than generic suggestions
5. Focus on quality over quantity - only report genuine issues you can clearly identify

Compliance violations should be marked as "critical" or "warning" severity.
Grammar/style issues should be marked as "suggestion" severity.

Return your findings as a JSON array. If there are no genuine issues found, return an empty array.

Here is the text:
${r}
`,s={type:R.Type.ARRAY,items:{type:R.Type.OBJECT,properties:{issue:{type:R.Type.STRING,description:"Brief description of the issue"},page:{type:R.Type.INTEGER},text:{type:R.Type.STRING,description:"The original problematic text"},suggestion:{type:R.Type.STRING},category:{type:R.Type.STRING,enum:["compliance","grammar","style"]},severity:{type:R.Type.STRING,enum:["critical","warning","suggestion"]}},required:["issue","page","text","suggestion"]}},o=await n.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:s}});if(!o||"string"!=typeof o.text)return v.NextResponse.json({error:"Invalid response from AI"},{status:502});let i=o.text.trim(),l=i?JSON.parse(i):[],u=Array.isArray(l)?l.map(e=>({issue:e.issue||e.explanation||"Issue found",page:e.page||1,text:e.text||e.original||"",suggestion:e.suggestion||"",category:e.category||"compliance",severity:e.severity||"warning",original:e.text||e.original||"",explanation:e.issue||e.explanation||"Issue found"})):[];return v.NextResponse.json({suggestions:u})}catch(e){return console.error("Error analyzing DOCX content:",e),v.NextResponse.json({error:"Failed to analyze DOCX content"},{status:500})}}e.s(["POST",()=>A],18564);var w=e.i(18564);let C=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/analyze/docx/route",pathname:"/api/analyze/docx",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/analyze/docx/route.ts",nextConfigOutput:"",userland:w}),{workAsyncStorage:E,workUnitAsyncStorage:T,serverHooks:I}=C;function b(){return(0,n.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:T})}async function N(e,t,n){C.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/analyze/docx/route";v=v.replace(/\/index$/,"")||"/";let R=await C.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:A,params:w,nextConfig:E,parsedUrl:T,isDraftMode:I,prerenderManifest:b,routerServerContext:N,isOnDemandRevalidate:S,revalidateOnlyGenerated:q,resolvedPathname:O,clientReferenceManifest:k,serverActionsManifest:P}=R,_=(0,l.normalizeAppPath)(v),j=!!(b.dynamicRoutes[_]||b.routes[O]),M=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,T,!1):t.end("This page could not be found"),null);if(j&&!I){let e=!!b.routes[O],t=b.dynamicRoutes[_];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await M();throw new f.NoFallbackError}}let U=null;!j||C.isDev||I||(U="/index"===(U=O)?"/":U);let H=!0===C.isDev||!j,G=j&&!H;P&&k&&(0,o.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:k,serverActionsManifest:P,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:P})});let L=e.method||"GET",D=(0,s.getTracer)(),F=D.getActiveScopeSpan(),z={params:w,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>C.onRequestError(e,t,n,N)},sharedContext:{buildId:A}},B=new u.NodeNextRequest(e),K=new u.NodeNextResponse(t),Y=p.NextRequestAdapter.fromNodeNextRequest(B,(0,p.signalFromNodeResponse)(t));try{let o=async e=>C.handle(Y,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=D.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${L} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${v}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let u=async({previousCacheEntry:r})=>{try{if(!i&&S&&q&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await o(a);e.fetchMetrics=z.renderOpts.fetchMetrics;let l=z.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let u=z.renderOpts.collectedTags;if(!j)return await (0,h.sendResponse)(B,K,s,z.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,x.toNodeOutgoingHttpHeaders)(s.headers);u&&(t[m.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,n=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:G,isOnDemandRevalidate:S})},N),t}},p=await C.handleResponse({req:e,nextConfig:E,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:q,responseGenerator:u,waitUntil:n.waitUntil,isMinimalMode:i});if(!j)return null;if((null==p||null==(s=p.value)?void 0:s.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(l=p.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",S?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),I&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,x.fromNodeOutgoingHttpHeaders)(p.value.headers);return i&&j||d.delete(m.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,g.getCacheControlHeader)(p.cacheControl)),await (0,h.sendResponse)(B,K,new Response(p.value.body,{headers:d,status:p.value.status||200})),null};F?await l(F):await D.withPropagatedContext(e.headers,()=>D.trace(d.BaseServerSpan.handleRequest,{spanName:`${L} ${v}`,kind:s.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:G,isOnDemandRevalidate:S})}),j)throw t;return await (0,h.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>b,"routeModule",()=>C,"serverHooks",()=>I,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>T],80451)},85685,e=>{e.v(e=>Promise.resolve().then(()=>e(54799)))},91961,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__c130a00c._.js"].map(t=>e.l(t))).then(()=>t(12111)))},72331,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__26624e21._.js","server/chunks/[root-of-the-server]__cbf279d1._.js","server/chunks/[root-of-the-server]__5ddcde7c._.js"].map(t=>e.l(t))).then(()=>t(20442)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fc425e8e._.js.map