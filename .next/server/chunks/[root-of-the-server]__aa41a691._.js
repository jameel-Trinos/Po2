module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},6920,(e,t,r)=>{"use strict";r.byteLength=function(e){var t=p(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=p(e),o=n[0],i=n[1],l=new s((o+i)*3/4-i),u=0,d=i>0?o-4:o;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===i&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===i&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,a=r%3,s=[],o=0,i=r-a;o<i;o+=16383)s.push(function(e,t,r){for(var a,s=[],o=t;o<r;o+=3)a=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[a>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}(e,o,o+16383>i?i:o+16383));return 1===a?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===a&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=o.length;i<l;++i)n[i]=o[i],a[o.charCodeAt(i)]=i;function p(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}a[45]=62,a[95]=63},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},80451,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),a=e.i(59756),s=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),p=e.i(16795),u=e.i(87718),d=e.i(95169),c=e.i(32084),x=e.i(66012),h=e.i(70101),g=e.i(26937),f=e.i(10372),y=e.i(93695);e.i(52474);var v=e.i(220),m=e.i(89171),R=e.i(34731);async function A(e){try{let t=process.env.GEMINI_API_KEY||"AIzaSyAAdOixGAtP3GdflcC0fzIQdIumNrj0Cao",{text:r}=await e.json();if(!r||"string"!=typeof r)return m.NextResponse.json({error:"Invalid request: text is required."},{status:400});let n=new R.GoogleGenAI({apiKey:t}),a=`
You are a compliance assistant. Analyze the provided DOCX-derived text (no page numbers).
Identify any regulatory/compliance risks or misleading language.
Return a JSON array of objects with:
- issue: brief description of the issue (e.g., "Performance disclaimer missing")
- page: 1
- text: risky snippet
- suggestion: compliant replacement
- category: compliance, grammar, or style (optional)
- severity: critical, warning, or suggestion (optional)
Only include clear issues.
Text:
${r}
`,s={type:R.Type.ARRAY,items:{type:R.Type.OBJECT,properties:{issue:{type:R.Type.STRING,description:"Brief description of the issue"},page:{type:R.Type.INTEGER},text:{type:R.Type.STRING,description:"The original problematic text"},suggestion:{type:R.Type.STRING},category:{type:R.Type.STRING,enum:["compliance","grammar","style"]},severity:{type:R.Type.STRING,enum:["critical","warning","suggestion"]}},required:["issue","page","text","suggestion"]}},o=await n.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:s}});if(!o||"string"!=typeof o.text)return m.NextResponse.json({error:"Invalid response from AI"},{status:502});let i=o.text.trim(),l=i?JSON.parse(i):[],p=Array.isArray(l)?l.map(e=>({issue:e.issue||e.explanation||"Issue found",page:e.page||1,text:e.text||e.original||"",suggestion:e.suggestion||"",category:e.category||"compliance",severity:e.severity||"warning",original:e.text||e.original||"",explanation:e.issue||e.explanation||"Issue found"})):[];return m.NextResponse.json({suggestions:p})}catch(e){return console.error("Error analyzing DOCX content:",e),m.NextResponse.json({error:"Failed to analyze DOCX content"},{status:500})}}e.s(["POST",()=>A],18564);var C=e.i(18564);let w=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/analyze/docx/route",pathname:"/api/analyze/docx",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/analyze/docx/route.ts",nextConfigOutput:"",userland:C}),{workAsyncStorage:E,workUnitAsyncStorage:T,serverHooks:b}=w;function q(){return(0,n.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:T})}async function N(e,t,n){w.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let m="/api/analyze/docx/route";m=m.replace(/\/index$/,"")||"/";let R=await w.prepare(e,t,{srcPage:m,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:A,params:C,nextConfig:E,parsedUrl:T,isDraftMode:b,prerenderManifest:q,routerServerContext:N,isOnDemandRevalidate:I,revalidateOnlyGenerated:_,resolvedPathname:j,clientReferenceManifest:O,serverActionsManifest:P}=R,S=(0,l.normalizeAppPath)(m),k=!!(q.dynamicRoutes[S]||q.routes[j]),M=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,T,!1):t.end("This page could not be found"),null);if(k&&!b){let e=!!q.routes[j],t=q.dynamicRoutes[S];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await M();throw new y.NoFallbackError}}let U=null;!k||w.isDev||b||(U="/index"===(U=j)?"/":U);let H=!0===w.isDev||!k,D=k&&!H;P&&O&&(0,o.setReferenceManifestsSingleton)({page:m,clientReferenceManifest:O,serverActionsManifest:P,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:P})});let G=e.method||"GET",z=(0,s.getTracer)(),B=z.getActiveScopeSpan(),F={params:C,prerenderManifest:q,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>w.onRequestError(e,t,n,N)},sharedContext:{buildId:A}},K=new p.NodeNextRequest(e),$=new p.NodeNextResponse(t),L=u.NextRequestAdapter.fromNodeNextRequest(K,(0,u.signalFromNodeResponse)(t));try{let o=async e=>w.handle(L,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=z.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${G} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${G} ${m}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let p=async({previousCacheEntry:r})=>{try{if(!i&&I&&_&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await o(a);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let p=F.renderOpts.collectedTags;if(!k)return await (0,x.sendResponse)(K,$,s,F.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);p&&(t[f.NEXT_CACHE_TAGS_HEADER]=p),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,n=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await w.onRequestError(e,t,{routerKind:"App Router",routePath:m,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:I})},N),t}},u=await w.handleResponse({req:e,nextConfig:E,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:q,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:_,responseGenerator:p,waitUntil:n.waitUntil,isMinimalMode:i});if(!k)return null;if((null==u||null==(s=u.value)?void 0:s.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",I?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&k||d.delete(f.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,g.getCacheControlHeader)(u.cacheControl)),await (0,x.sendResponse)(K,$,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};B?await l(B):await z.withPropagatedContext(e.headers,()=>z.trace(d.BaseServerSpan.handleRequest,{spanName:`${G} ${m}`,kind:s.SpanKind.SERVER,attributes:{"http.method":G,"http.target":e.url}},l))}catch(t){if(t instanceof y.NoFallbackError||await w.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:I})}),k)throw t;return await (0,x.sendResponse)(K,$,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>q,"routeModule",()=>w,"serverHooks",()=>b,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>T],80451)},85685,e=>{e.v(e=>Promise.resolve().then(()=>e(54799)))},91961,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__c130a00c._.js"].map(t=>e.l(t))).then(()=>t(12111)))},72331,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__6b6c626a._.js","server/chunks/[root-of-the-server]__8aed1f3b._.js","server/chunks/[root-of-the-server]__e24658a7._.js"].map(t=>e.l(t))).then(()=>t(20442)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__aa41a691._.js.map