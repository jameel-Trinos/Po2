module.exports=[65602,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},73320,a=>{"use strict";let b=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],73320)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},30553,a=>{"use strict";var b=a.i(72131);a.i(35112);var c=a.i(11011),d=a.i(87924),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,c.createSlot)(`Primitive.${e}`),g=b.forwardRef((a,b)=>{let{asChild:c,...g}=a;return(0,d.jsx)(c?f:e,{...g,ref:b})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{});a.s(["Primitive",()=>e])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},7379,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e="horizontal",f=["horizontal","vertical"],g=c.forwardRef((a,c)=>{var g;let{decorative:h,orientation:i=e,...j}=a,k=(g=i,f.includes(g))?i:e;return(0,b.jsx)(d.Primitive.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});g.displayName="Separator";var h=a.i(97895);function i({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(g,{"data-slot":"separator",decorative:d,orientation:c,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>i],7379)},92475,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(70106);let h=(0,g.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),i=(0,g.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),j=(0,g.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),k=(0,g.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);async function l(){return await a.A(61751)}a.s(["default",0,({pdfUrl:a,suggestions:g,selectedSuggestion:m,onSuggestionClick:n,onApplyEdit:o})=>{let[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(0),[v,w]=(0,c.useState)(1.2),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(new Set),[D,E]=(0,c.useState)(new Set),F=(0,c.useRef)(new Map),G=(0,c.useRef)(new Map),H=(0,c.useRef)(new Map),I=(0,c.useRef)(new Map),J=(0,c.useRef)(null),K=(0,c.useRef)(new Map);(0,c.useEffect)(()=>{let b=async()=>{y(!0),A(null);try{let b=(await l()).getDocument(a),c=await b.promise;q(c),u(c.numPages),y(!1),console.log(`[ProofreadPdfViewer] PDF loaded with ${c.numPages} pages`)}catch(a){console.error("[ProofreadPdfViewer] Error loading PDF:",a),A("Failed to load PDF document"),y(!1)}};return a&&b(),()=>{H.current.forEach(a=>{try{a.cancel()}catch(a){}}),H.current.clear(),I.current.clear()}},[a]),(0,c.useEffect)(()=>{(async()=>{let a=[];H.current.forEach(b=>{a.push((async()=>{try{await b.cancel()}catch(a){}})())}),await Promise.all(a),H.current.clear(),I.current.clear(),C(new Set),E(new Set)})()},[v]);let L=(0,c.useCallback)(async a=>{if(!p)return;if(I.current.get(a))return void console.log(`[ProofreadPdfViewer] Page ${a} is already rendering, skipping`);if(!F.current.get(a))return void console.log(`[ProofreadPdfViewer] Canvas not ready for page ${a}`);I.current.set(a,!0);let b=H.current.get(a);if(b)try{console.log(`[ProofreadPdfViewer] Cancelling existing render for page ${a}`),await b.cancel(),H.current.delete(a),await new Promise(a=>setTimeout(a,100))}catch(b){console.log(`[ProofreadPdfViewer] Cancellation error for page ${a}:`,b)}try{let b=await p.getPage(a),c=F.current.get(a);if(!c)return void I.current.set(a,!1);let d=c.getContext("2d");if(!d)return void I.current.set(a,!1);let e=b.getViewport({scale:v});d.clearRect(0,0,c.width,c.height),c.width=e.width,c.height=e.height;let f=b.render({canvasContext:d,viewport:e});H.current.set(a,f),await f.promise,H.current.delete(a),C(b=>new Set([...b,a])),await M(b,a,e),console.log(`[ProofreadPdfViewer] Rendered page ${a}`)}catch(b){H.current.delete(a),b?.name!=="RenderingCancelledException"&&console.error(`[ProofreadPdfViewer] Error rendering page ${a}:`,b)}finally{I.current.set(a,!1)}},[p,v]),M=async(a,b,c)=>{let d=G.current.get(b);if(d)try{let e=await a.getTextContent(),f=await l();d.innerHTML="",d.style.width=`${c.width}px`,d.style.height=`${c.height}px`,e.items.forEach(a=>{let b=document.createElement("div"),g=f.Util.transform(f.Util.transform(c.transform,a.transform),[1,0,0,-1,0,0]),h=e.styles[a.fontName];b.style.position="absolute",b.style.left=`${g[4]}px`,b.style.top=`${g[5]}px`,b.style.fontSize=`${Math.abs(g[3])}px`,b.style.fontFamily=h?.fontFamily||"sans-serif",b.textContent=a.str,b.className="pdf-text-item",d.appendChild(b)}),E(a=>new Set([...a,b]))}catch(a){console.error(`[ProofreadPdfViewer] Error rendering text layer for page ${b}:`,a)}};(0,c.useEffect)(()=>{if(!p||0===t)return;let a=async()=>{for(let a=1;a<=t;a++)I.current.get(a)||(await L(a),await new Promise(a=>setTimeout(a,50)))},b=setTimeout(()=>{a()},100);return()=>clearTimeout(b)},[p,t,v,L]),(0,c.useEffect)(()=>{if(m&&m.page){let a=K.current.get(m.page);if(a){a.scrollIntoView({behavior:"smooth",block:"center"});let b=G.current.get(m.page);b&&N(b,m.original)}}else G.current.forEach(a=>{a.querySelectorAll(".highlighted-text").forEach(a=>{a.classList.remove("highlighted-text")})})},[m]);let N=(a,b)=>{a.querySelectorAll(".highlighted-text").forEach(a=>a.classList.remove("highlighted-text"));let c=a.querySelectorAll(".pdf-text-item"),d="",e=[];c.forEach(a=>{let b=d.length,c=a.textContent||"",f=(d+=c).length;e.push({start:b,end:f,element:a})});let f=b.toLowerCase().trim(),g=d.toLowerCase().indexOf(f);if(-1!==g){let a=g+f.length;e.forEach(({start:b,end:c,element:d})=>{(b>=g&&b<a||c>g&&c<=a||b<=g&&c>=a)&&d.classList.add("highlighted-text")})}};return x?(0,b.jsxs)(d.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-gray-900 dark:text-gray-50",children:"Loading PDF..."})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100"})})})]}):z?(0,b.jsxs)(d.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-red-600 dark:text-red-400",children:"Error"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:z})})]}):(0,b.jsxs)(d.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.CardTitle,{className:"text-gray-900 dark:text-gray-50",children:"Document Viewer"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(f.Badge,{variant:"secondary",children:["Page ",r," of ",t]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{if(r>1){let a=K.current.get(r-1);a&&a.scrollIntoView({behavior:"smooth",block:"start"}),s(r-1)}},disabled:1===r,children:(0,b.jsx)(j,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{if(r<t){let a=K.current.get(r+1);a&&a.scrollIntoView({behavior:"smooth",block:"start"}),s(r+1)}},disabled:r===t,children:(0,b.jsx)(k,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{w(a=>Math.max(a-.2,.5)),C(new Set)},disabled:v<=.5,children:(0,b.jsx)(i,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Math.round(100*v),"%"]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{w(a=>Math.min(a+.2,3)),C(new Set)},disabled:v>=3,children:(0,b.jsx)(h,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{ref:J,className:"relative overflow-auto bg-zinc-100 dark:bg-zinc-800 rounded-lg p-4",style:{maxHeight:"75vh"},children:(0,b.jsx)("div",{className:"flex flex-col items-center gap-4",children:Array.from({length:t},(a,b)=>b+1).map(a=>(0,b.jsxs)("div",{ref:b=>{b&&K.current.set(a,b)},className:"relative bg-white shadow-lg",style:{marginBottom:"20px"},children:[(0,b.jsx)("canvas",{ref:b=>{b&&F.current.set(a,b)},className:"block w-full h-auto"}),(0,b.jsx)("div",{ref:b=>{b&&G.current.set(a,b)},className:"absolute top-0 left-0 pointer-events-none pdf-text-layer",style:{overflow:"hidden"}}),(0,b.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,b.jsx)(f.Badge,{variant:"secondary",children:a})})]},a))})})})]})}],92475)}];

//# sourceMappingURL=_dd1debd4._.js.map