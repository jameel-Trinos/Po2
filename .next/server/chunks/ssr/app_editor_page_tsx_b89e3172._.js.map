{"version":3,"sources":["turbopack:///[project]/app/editor/page.tsx","turbopack:///[project]/lib/utils/pdfDownload.ts","turbopack:///[project]/components/editor/EditorSuggestionsPanel.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/arrow-left-right.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/file-down.ts"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { useAppContext } from '../../lib/AppContext';\nimport { motion } from 'framer-motion';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Download, Loader2, FileText, ArrowLeftRight, FileDown } from 'lucide-react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { analyzePdfContent } from '../../lib/services/geminiService';\nimport { downloadPdf, generatePdfFilename } from '../../lib/utils/pdfDownload';\nimport EditorSuggestionsPanel from '../../components/editor/EditorSuggestionsPanel';\nimport WordEditor from '../../components/editor/WordEditor';\nimport dynamic from 'next/dynamic';\nimport { convertPdfToWord, wordBlobToHtml, htmlToWordBlob, convertWordToPdf } from '../../lib/services/pdfWordConverter';\nimport { toast } from 'sonner';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n  const pdfjs = await import('pdfjs-dist');\n  if (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n    pdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.mjs';\n  }\n  return pdfjs;\n}\n\n// Dynamically import PDF viewer to avoid SSR issues with pdfjs-dist\nconst PdfViewerPdfJs = dynamic(() => import('@/components/editor/PdfViewerPdfJs'), {\n  ssr: false,\n  loading: () => (\n    <div className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800 flex items-center justify-center bg-zinc-50 dark:bg-zinc-900\">\n      <div className=\"flex flex-col items-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100 mb-4\"></div>\n        <p className=\"text-sm text-zinc-600 dark:text-zinc-400\">Loading PDF viewer...</p>\n      </div>\n    </div>\n  )\n});\n\nexport default function EditorPage() {\n  const searchParams = useSearchParams();\n  const documentId = searchParams.get('documentId');\n  const { \n    getDocumentPdfUrl, \n    getDocumentContent, \n    saveProjectAsDraft, \n    getDocument,\n    getModifiedPdfUrl,\n    setModifiedPdfUrl,\n  } = useAppContext();\n\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isConverting, setIsConverting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState<number | null>(null);\n  const [acceptedIndices, setAcceptedIndices] = useState<number[]>([]);\n  const [saveDialogOpen, setSaveDialogOpen] = useState(false);\n  const [projectName, setProjectName] = useState<string>('');\n  const [editingMode, setEditingMode] = useState<'pdf' | 'word'>('pdf');\n  const [wordHtml, setWordHtml] = useState<string>('');\n  const [wordBlob, setWordBlob] = useState<Blob | null>(null);\n  const [originalPdfUrl, setOriginalPdfUrl] = useState<string | null>(null);\n  const pdfApisRef = useRef<{ \n    gotoLocation: (opts: { pageNumber: number; zoom?: number }) => Promise<void>;\n    getCurrentPage: () => number;\n    getTotalPages: () => number;\n    reload: (file: Blob | string) => Promise<void>;\n    search?: (query: string) => Promise<{ pageNumber: number } | null>;\n  } | null>(null);\n\n  useEffect(() => {\n    if (!documentId) {\n      console.error('[EditorPage] No document ID provided');\n      setError(\"No document ID provided.\");\n      return;\n    }\n    \n    console.log('[EditorPage] Loading document:', documentId);\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const url = getDocumentPdfUrl(documentId);\n      console.log('[EditorPage] PDF URL retrieved:', url ? 'exists' : 'null');\n      \n      if (url) {\n        setPdfUrl(url);\n        setOriginalPdfUrl(url);\n      } else {\n        console.warn('[EditorPage] No PDF URL found for document');\n        setPdfUrl(null);\n      }\n    } catch (e) {\n      console.error('[EditorPage] Error loading PDF:', e);\n      setPdfUrl(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [documentId, getDocumentPdfUrl]);\n\n  // Load extracted text and fetch AI suggestions\n  useEffect(() => {\n    if (!documentId) return;\n    const content = getDocumentContent(documentId);\n    const document = getDocument(documentId);\n    if (document) {\n      setProjectName(document.projectName || '');\n    }\n    if (content) {\n      analyzePdfContent(content)\n        .then(ai => setSuggestions(ai))\n        .catch(e => console.error(e));\n    }\n  }, [documentId, getDocumentContent, getDocument]);\n\n  // Convert PDF to Word for editing\n  const handleConvertToWord = async () => {\n    if (!documentId || !pdfUrl) {\n      toast.error('PDF not available for conversion');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      // Extract text from PDF using pdfjs\n      const response = await fetch(pdfUrl);\n      const arrayBuffer = await response.arrayBuffer();\n      \n      // Dynamically load pdfjs\n      const pdfjs = await loadPdfJs();\n      const pdf = await pdfjs.getDocument({ data: arrayBuffer }).promise;\n      \n      let fullText = '';\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const textContent = await page.getTextContent();\n        const pageText = textContent.items.map((item: any) => item.str).join(' ');\n        fullText += pageText + '\\n\\n';\n      }\n      \n      // Convert to HTML format for editing\n      const htmlContent = fullText\n        .split('\\n\\n')\n        .filter(p => p.trim())\n        .map(p => `<p>${p}</p>`)\n        .join('\\n');\n      \n      setWordHtml(htmlContent);\n      setEditingMode('word');\n      toast.success('Converted to editable format');\n    } catch (err) {\n      console.error('Error converting PDF:', err);\n      toast.error('Failed to convert PDF. Please try again.');\n      setError('Failed to convert PDF to editable format.');\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  // Convert back to PDF\n  const handleConvertBackToPdf = async () => {\n    if (!documentId || !wordHtml) {\n      toast.error('No content to convert');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      const htmlBlob = await htmlToWordBlob(wordHtml);\n      const newPdfUrl = await convertWordToPdf(htmlBlob);\n      \n      setPdfUrl(newPdfUrl);\n      setModifiedPdfUrl(documentId, newPdfUrl);\n      setEditingMode('pdf');\n      toast.success('Converted back to PDF');\n    } catch (err) {\n      console.error('Error converting to PDF:', err);\n      toast.error('Failed to convert to PDF. Please try again.');\n      setError('Failed to convert to PDF.');\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  // Apply suggestion to Word content\n  const handleApplySuggestion = (index: number) => {\n    const s = suggestions[index];\n    if (!s) return;\n\n    if (editingMode === 'word') {\n      // Apply to Word HTML content\n      const regex = new RegExp(s.original.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n      const updatedHtml = wordHtml.replace(regex, s.suggestion);\n      setWordHtml(updatedHtml);\n      \n      setAcceptedIndices(prev => [...prev, index]);\n      setSuggestions(prev => prev.filter((_, i) => i !== index));\n      setSelectedSuggestionIndex(null);\n      toast.success('Suggestion applied');\n    } else {\n      toast.error('Convert to Word to apply suggestions');\n    }\n  };\n\n  // Navigate to suggestion in Word editor\n  const handleGoToSuggestion = (index: number) => {\n    setSelectedSuggestionIndex(index);\n    // The WordEditor component will handle highlighting\n  };\n\n  const handleDownloadPdf = async () => {\n    if (!documentId) return;\n\n    try {\n      if (!pdfUrl) {\n        toast.error('No PDF available to download');\n        return;\n      }\n\n      const filename = generatePdfFilename(projectName, pdfUrl !== originalPdfUrl ? 'modified' : 'original');\n      downloadPdf(pdfUrl, filename);\n    } catch (err) {\n      console.error('Error downloading PDF:', err);\n      toast.error('Failed to download PDF');\n    }\n  };\n\n  const handleConvertPdfToWord = async () => {\n    if (!documentId || !pdfUrl) {\n      toast.error('PDF not available for conversion');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      // Fetch the PDF file\n      const response = await fetch(pdfUrl);\n      const pdfBlob = await response.blob();\n      \n      // Create FormData to send to the API\n      const formData = new FormData();\n      const filename = projectName ? `${projectName}.pdf` : 'document.pdf';\n      formData.append('file', pdfBlob, filename);\n\n      // Call the PDF to DOCX conversion API\n      const convertResponse = await fetch('/api/pdf-to-docx', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!convertResponse.ok) {\n        // Try to get error details from the response\n        let errorMessage = 'Failed to convert PDF to Word';\n        const contentType = convertResponse.headers.get('content-type');\n        \n        try {\n          // Check if response is JSON\n          if (contentType && contentType.includes('application/json')) {\n            const errorText = await convertResponse.text();\n            if (errorText) {\n              try {\n                const errorData = JSON.parse(errorText);\n                // Try multiple fields for error message, prioritizing user-friendly messages\n                errorMessage = errorData.message || errorData.error || errorData.details || errorMessage;\n                // Only log to console, don't expose technical details to user\n                console.error('Conversion API error:', errorData);\n              } catch (parseError) {\n                // If JSON parsing fails, use the text as error message\n                errorMessage = errorText || errorMessage;\n                console.error('Conversion API error (non-JSON):', errorText);\n              }\n            } else {\n              errorMessage = convertResponse.statusText || `HTTP ${convertResponse.status}`;\n            }\n          } else {\n            // Response is not JSON, try to get text\n            const errorText = await convertResponse.text();\n            errorMessage = errorText || convertResponse.statusText || `HTTP ${convertResponse.status}`;\n            console.error('Conversion failed with status:', convertResponse.status, convertResponse.statusText);\n          }\n        } catch (e) {\n          // If we can't read the response, use status information\n          errorMessage = convertResponse.statusText || `HTTP ${convertResponse.status}: Failed to convert PDF to Word`;\n          console.error('Error reading conversion response:', e);\n        }\n        throw new Error(errorMessage);\n      }\n\n      // Get the DOCX blob\n      const docxBlob = await convertResponse.blob();\n      \n      // Download the DOCX file\n      const url = window.URL.createObjectURL(docxBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename.replace(/\\.pdf$/i, '.docx');\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n\n      toast.success('PDF converted to Word and downloaded');\n    } catch (err) {\n      console.error('Error converting PDF to Word:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to convert PDF to Word';\n      toast.error(errorMessage);\n      setError(errorMessage);\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  const handleSaveAsDraft = () => {\n    if (!documentId) return;\n    \n    if (projectName.trim()) {\n      saveProjectAsDraft(projectName.trim(), documentId);\n      toast.success('Project saved as draft!');\n    } else {\n      setSaveDialogOpen(true);\n    }\n  };\n\n  const handleConfirmSave = () => {\n    if (!documentId || !projectName.trim()) return;\n    saveProjectAsDraft(projectName.trim(), documentId);\n    setSaveDialogOpen(false);\n    toast.success('Project saved as draft!');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-zinc-50 dark:bg-zinc-950 text-center px-6\">\n        <Card className=\"w-full max-w-md border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-900 dark:text-gray-50\">Loading Documentâ€¦</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Progress value={66} />\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Preparing the viewer.</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (error && !documentId) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-zinc-50 dark:bg-zinc-950 text-center text-red-600 dark:text-red-400\">\n        <h2 className=\"text-2xl font-semibold\">Error: {error}</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-2\">Please go back and try again.</p>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"min-h-screen bg-zinc-50 dark:bg-zinc-950 p-4 sm:p-6 lg:p-8 flex justify-center\"\n    >\n      <div className=\"max-w-7xl w-full grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"md:col-span-2\">\n          <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n            <CardHeader className=\"pb-2\">\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"text-gray-900 dark:text-gray-50\">\n                  {editingMode === 'word' ? 'Document Editor' : 'Document Viewer'}\n                </CardTitle>\n                <div className=\"flex gap-2\">\n                  {editingMode === 'pdf' && pdfUrl && (\n                    <>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        onClick={handleConvertToWord}\n                        disabled={isConverting}\n                      >\n                        {isConverting ? (\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                          <FileText className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Edit Document\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        onClick={handleConvertPdfToWord}\n                        disabled={isConverting}\n                      >\n                        {isConverting ? (\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                          <FileDown className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Convert to Word\n                      </Button>\n                    </>\n                  )}\n                  {editingMode === 'word' && (\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\" \n                      onClick={handleConvertBackToPdf}\n                      disabled={isConverting}\n                    >\n                      {isConverting ? (\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      ) : (\n                        <ArrowLeftRight className=\"h-4 w-4 mr-2\" />\n                      )}\n                      Back to PDF\n                    </Button>\n                  )}\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={handleDownloadPdf} \n                    disabled={!pdfUrl}\n                  >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Download\n                  </Button>\n                </div>\n              </div>\n              {editingMode === 'pdf' && (\n                <Badge variant=\"secondary\" className=\"mt-2\">\n                  Click \"Edit Document\" to apply suggestions\n                </Badge>\n              )}\n            </CardHeader>\n            <CardContent className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md\">\n                  <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>\n                </div>\n              )}\n              \n              {editingMode === 'word' ? (\n                <WordEditor\n                  wordHtml={wordHtml}\n                  suggestions={suggestions}\n                  selectedSuggestionIndex={selectedSuggestionIndex}\n                  onContentChange={setWordHtml}\n                  onApplySuggestion={handleApplySuggestion}\n                  isLoading={isConverting}\n                />\n              ) : pdfUrl ? (\n                <PdfViewerPdfJs\n                  fileUrl={pdfUrl}\n                  fileName={projectName ? `${projectName}.pdf` : 'document.pdf'}\n                  onReady={(apis) => {\n                    pdfApisRef.current = apis;\n                  }}\n                  className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800\"\n                />\n              ) : (\n                <div className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-6 bg-zinc-50 dark:bg-zinc-900\">\n                  <svg\n                    className=\"w-16 h-16 text-zinc-400 dark:text-zinc-600 mb-4\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  <h3 className=\"text-lg font-semibold text-zinc-700 dark:text-zinc-300 mb-2\">No PDF Available</h3>\n                  <p className=\"text-sm text-zinc-600 dark:text-zinc-400 text-center max-w-md\">\n                    No PDF file was found for this document. Please upload a PDF file to view it here.\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        <aside className=\"md:col-span-1\">\n          <EditorSuggestionsPanel\n            suggestions={suggestions}\n            selectedIndex={selectedSuggestionIndex}\n            onSelectIndex={setSelectedSuggestionIndex}\n            onApplyAtIndex={handleApplySuggestion}\n            onGoToIndex={handleGoToSuggestion}\n            acceptedCount={acceptedIndices.length}\n            onSaveDraft={handleSaveAsDraft}\n            saveDialogOpen={saveDialogOpen}\n            setSaveDialogOpen={setSaveDialogOpen}\n            projectName={projectName}\n            setProjectName={setProjectName}\n            onConfirmSave={handleConfirmSave}\n            isApplying={isConverting}\n            canApply={editingMode === 'word'}\n          />\n        </aside>\n      </div>\n    </motion.div>\n  );\n}\n","/**\n * Download PDF from various sources (base64, blob URL, or regular URL)\n */\nexport function downloadPdf(\n  pdfUrl: string,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const link = document.createElement('a');\n    link.href = pdfUrl;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  } catch (error) {\n    console.error('Error downloading PDF:', error);\n    throw new Error('Failed to download PDF');\n  }\n}\n\n/**\n * Download PDF from Blob\n */\nexport function downloadPdfFromBlob(\n  blob: Blob,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const url = URL.createObjectURL(blob);\n    downloadPdf(url, filename);\n    // Clean up the object URL after a delay\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n  } catch (error) {\n    console.error('Error downloading PDF from blob:', error);\n    throw new Error('Failed to download PDF from blob');\n  }\n}\n\n/**\n * Download PDF from ArrayBuffer\n */\nexport function downloadPdfFromArrayBuffer(\n  buffer: ArrayBuffer,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const blob = new Blob([buffer], { type: 'application/pdf' });\n    downloadPdfFromBlob(blob, filename);\n  } catch (error) {\n    console.error('Error downloading PDF from ArrayBuffer:', error);\n    throw new Error('Failed to download PDF from ArrayBuffer');\n  }\n}\n\n/**\n * Generate a safe filename from a project name\n */\nexport function generatePdfFilename(\n  projectName: string,\n  suffix: string = 'modified'\n): string {\n  // Remove invalid filename characters\n  const safeName = projectName\n    .replace(/[<>:\"/\\\\|?*]/g, '_')\n    .replace(/\\s+/g, '_')\n    .trim();\n  \n  return `${safeName || 'document'}_${suffix}.pdf`;\n}\n\n\n","import React from 'react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Separator } from '@/components/ui/separator';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Loader2 } from 'lucide-react';\n\ninterface EditorSuggestionsPanelProps {\n  suggestions: Suggestion[];\n  selectedIndex: number | null;\n  onSelectIndex: (index: number | null) => void;\n  onApplyAtIndex: (index: number) => void;\n  onGoToIndex?: (index: number) => void;\n  acceptedCount: number;\n  onSaveDraft: () => void;\n  saveDialogOpen: boolean;\n  setSaveDialogOpen: (open: boolean) => void;\n  projectName: string;\n  setProjectName: (name: string) => void;\n  onConfirmSave: () => void;\n  isApplying: boolean;\n  canApply: boolean;\n}\n\nconst EditorSuggestionsPanel: React.FC<EditorSuggestionsPanelProps> = ({\n  suggestions,\n  selectedIndex,\n  onSelectIndex,\n  onApplyAtIndex,\n  onGoToIndex,\n  acceptedCount,\n  onSaveDraft,\n  saveDialogOpen,\n  setSaveDialogOpen,\n  projectName,\n  setProjectName,\n  onConfirmSave,\n  isApplying,\n  canApply,\n}) => {\n  return (\n    <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-emerald-600 dark:text-emerald-400\">\n            Suggestions\n          </CardTitle>\n        </div>\n        <div className=\"mt-2 grid grid-cols-2 gap-2\">\n          <div className=\"flex items-center justify-between rounded-md border border-zinc-200 dark:border-zinc-800 px-3 py-2\">\n            <div className=\"text-sm text-zinc-600 dark:text-zinc-300\">All</div>\n            <Badge variant=\"secondary\" className=\"rounded-full\">\n              {suggestions.length + acceptedCount}\n            </Badge>\n          </div>\n          <div className=\"flex items-center justify-between rounded-md border border-zinc-200 dark:border-zinc-800 px-3 py-2\">\n            <div className=\"text-sm text-zinc-600 dark:text-zinc-300\">Accepted</div>\n            <Badge variant=\"secondary\" className=\"rounded-full\">\n              {acceptedCount}\n            </Badge>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {suggestions.length === 0 ? (\n            <p className=\"text-sm text-zinc-600 dark:text-zinc-300\">No suggestions yet.</p>\n          ) : (\n            suggestions.map((s, i) => (\n              <div\n                key={`${s.page}-${i}-${s.original.slice(0, 16)}`}\n                className={`rounded-md border p-3 cursor-pointer transition ${\n                  selectedIndex === i\n                    ? 'border-emerald-400 bg-emerald-50/50 dark:bg-emerald-900/20'\n                    : 'border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50/50 dark:hover:bg-zinc-900/40'\n                }`}\n                onClick={() => onSelectIndex(i)}\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"secondary\" className=\"rounded-full\">Page {s.page}</Badge>\n                  <span className=\"text-xs text-zinc-500\">Click to highlight</span>\n                </div>\n                <div className=\"mt-2 text-sm text-zinc-800 dark:text-zinc-100\">\n                  {s.explanation}\n                </div>\n                <div className=\"mt-2 text-sm\">\n                  <span className=\"text-zinc-500\">Original:</span>{' '}\n                  <span className=\"font-medium\">{s.original}</span>\n                </div>\n                <div className=\"text-sm\">\n                  <span className=\"text-zinc-500\">Suggestion:</span>{' '}\n                  <span className=\"font-medium text-emerald-700 dark:text-emerald-300\">{s.suggestion}</span>\n                </div>\n                <div className=\"mt-3 flex gap-2\">\n                  <Button \n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={(e) => { e.stopPropagation(); onGoToIndex?.(i); }}\n                  >\n                    Go to\n                  </Button>\n                  <Button \n                    size=\"sm\" \n                    onClick={(e) => { e.stopPropagation(); onApplyAtIndex(i); }}\n                    disabled={isApplying || !canApply}\n                  >\n                    {isApplying ? (\n                      <>\n                        <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n                        Applying...\n                      </>\n                    ) : (\n                      'Apply to PDF'\n                    )}\n                  </Button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        <Separator className=\"my-4\" />\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <Button variant=\"outline\" onClick={onSaveDraft}>Save as draft</Button>\n          <Button>Send file to</Button>\n        </div>\n\n        <Dialog open={saveDialogOpen} onOpenChange={setSaveDialogOpen}>\n          <DialogContent className=\"bg-white dark:bg-zinc-900\">\n            <DialogHeader>\n              <DialogTitle className=\"text-gray-900 dark:text-gray-50\">Save Project as Draft</DialogTitle>\n              <DialogDescription className=\"text-gray-600 dark:text-gray-400\">\n                Enter a name for your project\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 py-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"project-name\" className=\"text-gray-900 dark:text-gray-50\">\n                  Project Name\n                </Label>\n                <Input\n                  id=\"project-name\"\n                  value={projectName}\n                  onChange={(e) => setProjectName(e.target.value)}\n                  placeholder=\"Enter project name\"\n                  className=\"bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-50\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && projectName.trim()) {\n                      onConfirmSave();\n                    }\n                  }}\n                />\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setSaveDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={onConfirmSave} disabled={!projectName.trim()}>\n                Save\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EditorSuggestionsPanel;\n\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 3 4 7l4 4', key: '9rb6wj' }],\n  ['path', { d: 'M4 7h16', key: '6tx8e3' }],\n  ['path', { d: 'm16 21 4-4-4-4', key: 'siv7j2' }],\n  ['path', { d: 'M20 17H4', key: 'h6l3hr' }],\n];\n\n/**\n * @component @name ArrowLeftRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAzIDQgN2w0IDQiIC8+CiAgPHBhdGggZD0iTTQgN2gxNiIgLz4KICA8cGF0aCBkPSJtMTYgMjEgNC00LTQtNCIgLz4KICA8cGF0aCBkPSJNMjAgMTdINCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeftRight = createLucideIcon('arrow-left-right', __iconNode);\n\nexport default ArrowLeftRight;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z',\n      key: '1oefj6',\n    },\n  ],\n  ['path', { d: 'M14 2v5a1 1 0 0 0 1 1h5', key: 'wfsgrz' }],\n  ['path', { d: 'M12 18v-6', key: '17g6i2' }],\n  ['path', { d: 'm9 15 3 3 3-3', key: '1npd3o' }],\n];\n\n/**\n * @component @name FileDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAyMmEyIDIgMCAwIDEtMi0yVjRhMiAyIDAgMCAxIDItMmg4YTIuNCAyLjQgMCAwIDEgMS43MDQuNzA2bDMuNTg4IDMuNTg4QTIuNCAyLjQgMCAwIDEgMjAgOHYxMmEyIDIgMCAwIDEtMiAyeiIgLz4KICA8cGF0aCBkPSJNMTQgMnY1YTEgMSAwIDAgMCAxIDFoNSIgLz4KICA8cGF0aCBkPSJNMTIgMTh2LTYiIC8+CiAgPHBhdGggZD0ibTkgMTUgMyAzIDMtMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/file-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileDown = createLucideIcon('file-down', __iconNode);\n\nexport default FileDown;\n"],"names":[],"mappings":"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","ignoreList":[3,4]}