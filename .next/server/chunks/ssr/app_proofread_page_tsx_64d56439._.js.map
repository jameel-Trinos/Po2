{"version":3,"sources":["turbopack:///[project]/components/proofreader/ProofreadPdfViewer.tsx","turbopack:///[project]/app/proofread/page.tsx","turbopack:///[project]/components/proofreader/SuggestionSidebar.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/chevron-left.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/circle-check-big.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/zoom-in.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/zoom-out.ts"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { ZoomIn, ZoomOut, ChevronLeft, ChevronRight } from 'lucide-react';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n  const pdfjs = await import('pdfjs-dist');\n  if (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n    pdfjs.GlobalWorkerOptions.workerSrc = `//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.mjs`;\n  }\n  return pdfjs;\n}\n\ninterface ProofreadPdfViewerProps {\n  pdfUrl: string;\n  suggestions: Suggestion[];\n  selectedSuggestion: Suggestion | null;\n  onSuggestionClick: (suggestion: Suggestion | null) => void;\n  onApplyEdit: (pageNumber: number, originalText: string, newText: string) => void;\n}\n\nconst ProofreadPdfViewer: React.FC<ProofreadPdfViewerProps> = ({\n  pdfUrl,\n  suggestions,\n  selectedSuggestion,\n  onSuggestionClick,\n  onApplyEdit,\n}) => {\n  const [pdfDoc, setPdfDoc] = useState<any | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [zoom, setZoom] = useState(1.2);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [renderedPages, setRenderedPages] = useState<Set<number>>(new Set());\n  const [textLayerLoaded, setTextLayerLoaded] = useState<Set<number>>(new Set());\n  \n  const canvasRefs = useRef<Map<number, HTMLCanvasElement>>(new Map());\n  const textLayerRefs = useRef<Map<number, HTMLDivElement>>(new Map());\n  const renderTasksRef = useRef<Map<number, any>>(new Map());\n  const textLayerTasksRef = useRef<Map<number, AbortController>>(new Map());\n  const renderingInProgressRef = useRef<Map<number, boolean>>(new Map());\n  const containerRef = useRef<HTMLDivElement>(null);\n  const pageRefs = useRef<Map<number, HTMLDivElement>>(new Map());\n\n  // Load PDF document\n  useEffect(() => {\n    const loadPdf = async () => {\n      setIsLoading(true);\n      setError(null);\n      \n      try {\n        // Dynamically load pdfjs\n        const pdfjs = await loadPdfJs();\n        const loadingTask = pdfjs.getDocument(pdfUrl);\n        const pdf = await loadingTask.promise;\n        setPdfDoc(pdf);\n        setTotalPages(pdf.numPages);\n        setIsLoading(false);\n        console.log(`[ProofreadPdfViewer] PDF loaded with ${pdf.numPages} pages`);\n      } catch (err) {\n        console.error('[ProofreadPdfViewer] Error loading PDF:', err);\n        setError('Failed to load PDF document');\n        setIsLoading(false);\n      }\n    };\n\n    if (pdfUrl) {\n      loadPdf();\n    }\n\n    return () => {\n      // Cleanup render tasks\n      renderTasksRef.current.forEach((task) => {\n        try {\n          task.cancel();\n        } catch (e) {\n          // Ignore\n        }\n      });\n      renderTasksRef.current.clear();\n      \n      // Cleanup text layer tasks\n      textLayerTasksRef.current.forEach((controller) => {\n        try {\n          controller.abort();\n        } catch (e) {\n          // Ignore\n        }\n      });\n      textLayerTasksRef.current.clear();\n      \n      renderingInProgressRef.current.clear();\n    };\n  }, [pdfUrl]);\n\n  // Cleanup render tasks when zoom changes\n  useEffect(() => {\n    const cancelAllTasks = async () => {\n      const cancelPromises: Promise<void>[] = [];\n      renderTasksRef.current.forEach((task) => {\n        cancelPromises.push(\n          (async () => {\n            try {\n              await task.cancel();\n            } catch (e) {\n              // Ignore errors during cancellation\n            }\n          })()\n        );\n      });\n      await Promise.all(cancelPromises);\n      renderTasksRef.current.clear();\n      \n      // Cancel text layer tasks\n      textLayerTasksRef.current.forEach((controller) => {\n        try {\n          controller.abort();\n        } catch (e) {\n          // Ignore errors during cancellation\n        }\n      });\n      textLayerTasksRef.current.clear();\n      \n      renderingInProgressRef.current.clear();\n      setRenderedPages(new Set());\n      setTextLayerLoaded(new Set());\n    };\n    \n    cancelAllTasks();\n  }, [zoom]);\n\n  // Render a page\n  const renderPage = useCallback(async (pageNum: number) => {\n    if (!pdfDoc) return;\n\n    // Check if already rendering this page\n    if (renderingInProgressRef.current.get(pageNum)) {\n      console.log(`[ProofreadPdfViewer] Page ${pageNum} is already rendering, skipping`);\n      return;\n    }\n\n    const canvas = canvasRefs.current.get(pageNum);\n    if (!canvas) {\n      console.log(`[ProofreadPdfViewer] Canvas not ready for page ${pageNum}`);\n      return;\n    }\n\n    // Mark as rendering in progress\n    renderingInProgressRef.current.set(pageNum, true);\n\n    // Cancel existing render task\n    const existingTask = renderTasksRef.current.get(pageNum);\n    if (existingTask) {\n      try {\n        console.log(`[ProofreadPdfViewer] Cancelling existing render for page ${pageNum}`);\n        await existingTask.cancel();\n        renderTasksRef.current.delete(pageNum);\n        // Wait for cancellation to fully complete\n        await new Promise(resolve => setTimeout(resolve, 100));\n      } catch (e) {\n        // Ignore\n        console.log(`[ProofreadPdfViewer] Cancellation error for page ${pageNum}:`, e);\n      }\n    }\n\n    try {\n      const page: any = await pdfDoc.getPage(pageNum);\n      \n      // Double-check canvas is still available\n      const currentCanvas = canvasRefs.current.get(pageNum);\n      if (!currentCanvas) {\n        renderingInProgressRef.current.set(pageNum, false);\n        return;\n      }\n      \n      const context = currentCanvas.getContext('2d');\n      if (!context) {\n        renderingInProgressRef.current.set(pageNum, false);\n        return;\n      }\n\n      const viewport = page.getViewport({ scale: zoom });\n\n      // Clear canvas\n      context.clearRect(0, 0, currentCanvas.width, currentCanvas.height);\n      currentCanvas.width = viewport.width;\n      currentCanvas.height = viewport.height;\n\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n      };\n\n      const renderTask = page.render(renderContext);\n      renderTasksRef.current.set(pageNum, renderTask);\n\n      await renderTask.promise;\n      renderTasksRef.current.delete(pageNum);\n      setRenderedPages(prev => new Set([...prev, pageNum]));\n\n      // Render text layer for highlighting\n      await renderTextLayer(page, pageNum, viewport);\n\n      console.log(`[ProofreadPdfViewer] Rendered page ${pageNum}`);\n    } catch (err: any) {\n      renderTasksRef.current.delete(pageNum);\n      if (err?.name !== 'RenderingCancelledException') {\n        console.error(`[ProofreadPdfViewer] Error rendering page ${pageNum}:`, err);\n      }\n    } finally {\n      // Always mark as no longer rendering\n      renderingInProgressRef.current.set(pageNum, false);\n    }\n  }, [pdfDoc, zoom]);\n\n  // Render text layer for text selection and highlighting\n  const renderTextLayer = async (page: any, pageNum: number, viewport: any) => {\n    const textLayerDiv = textLayerRefs.current.get(pageNum);\n    if (!textLayerDiv) return;\n\n    // Cancel any existing text layer task for this page\n    const existingController = textLayerTasksRef.current.get(pageNum);\n    if (existingController) {\n      existingController.abort();\n      textLayerTasksRef.current.delete(pageNum);\n    }\n\n    // Create new AbortController for this text layer task\n    const abortController = new AbortController();\n    textLayerTasksRef.current.set(pageNum, abortController);\n\n    try {\n      // Check if already aborted before starting async work\n      if (abortController.signal.aborted) {\n        textLayerTasksRef.current.delete(pageNum);\n        return;\n      }\n\n      const textContent = await page.getTextContent();\n      \n      // Check again after async operation\n      if (abortController.signal.aborted) {\n        textLayerTasksRef.current.delete(pageNum);\n        return;\n      }\n      \n      // Dynamically load pdfjs for Util\n      const pdfjs = await loadPdfJs();\n      \n      // Check again after loading pdfjs\n      if (abortController.signal.aborted) {\n        textLayerTasksRef.current.delete(pageNum);\n        return;\n      }\n      \n      // Clear existing text layer\n      textLayerDiv.innerHTML = '';\n      textLayerDiv.style.width = `${viewport.width}px`;\n      textLayerDiv.style.height = `${viewport.height}px`;\n\n      // Render text items\n      textContent.items.forEach((item: any) => {\n        // Check if aborted during iteration\n        if (abortController.signal.aborted) {\n          return;\n        }\n\n        const textDiv = document.createElement('div');\n        const tx = pdfjs.Util.transform(\n          pdfjs.Util.transform(viewport.transform, item.transform),\n          [1, 0, 0, -1, 0, 0]\n        );\n        const style = textContent.styles[item.fontName];\n        \n        textDiv.style.position = 'absolute';\n        textDiv.style.left = `${tx[4]}px`;\n        textDiv.style.top = `${tx[5]}px`;\n        textDiv.style.fontSize = `${Math.abs(tx[3])}px`;\n        textDiv.style.fontFamily = style?.fontFamily || 'sans-serif';\n        textDiv.textContent = item.str;\n        textDiv.className = 'pdf-text-item';\n        \n        textLayerDiv.appendChild(textDiv);\n      });\n\n      // Only update state if not aborted\n      if (!abortController.signal.aborted) {\n        setTextLayerLoaded(prev => new Set([...prev, pageNum]));\n      }\n      \n      // Clean up the controller\n      textLayerTasksRef.current.delete(pageNum);\n    } catch (err: any) {\n      // Clean up the controller\n      textLayerTasksRef.current.delete(pageNum);\n      \n      // Silently ignore AbortError and other expected cancellation errors\n      if (err?.name === 'AbortError' || err?.name === 'AbortException') {\n        // Task was cancelled, this is expected\n        return;\n      }\n      \n      // Only log unexpected errors\n      if (err?.message && !err.message.includes('cancelled') && !err.message.includes('abort')) {\n        console.error(`[ProofreadPdfViewer] Error rendering text layer for page ${pageNum}:`, err);\n      }\n    }\n  };\n\n  // Render visible pages\n  useEffect(() => {\n    if (!pdfDoc || totalPages === 0) return;\n\n    // Render all pages sequentially to avoid canvas conflicts\n    const renderAllPages = async () => {\n      for (let i = 1; i <= totalPages; i++) {\n        if (!renderingInProgressRef.current.get(i)) {\n          await renderPage(i);\n          // Small delay between renders to ensure clean separation\n          await new Promise(resolve => setTimeout(resolve, 50));\n        }\n      }\n    };\n\n    // Use a small delay to ensure canvases are mounted and ready\n    const timeoutId = setTimeout(() => {\n      renderAllPages();\n    }, 100);\n\n    return () => clearTimeout(timeoutId);\n  }, [pdfDoc, totalPages, zoom, renderPage]);\n\n  // Scroll to selected suggestion\n  useEffect(() => {\n    if (selectedSuggestion && selectedSuggestion.page && selectedSuggestion.original) {\n      const pageDiv = pageRefs.current.get(selectedSuggestion.page);\n      if (pageDiv) {\n        pageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        \n        // Highlight the text\n        const textLayerDiv = textLayerRefs.current.get(selectedSuggestion.page);\n        if (textLayerDiv) {\n          highlightTextInLayer(textLayerDiv, selectedSuggestion.original);\n        }\n      }\n    } else {\n      // Clear all highlights\n      textLayerRefs.current.forEach((textLayerDiv) => {\n        const highlighted = textLayerDiv.querySelectorAll('.highlighted-text');\n        highlighted.forEach(el => {\n          el.classList.remove('highlighted-text');\n        });\n      });\n    }\n  }, [selectedSuggestion]);\n\n  // Highlight text in text layer\n  const highlightTextInLayer = (textLayerDiv: HTMLDivElement, text: string) => {\n    // Clear previous highlights\n    const previousHighlights = textLayerDiv.querySelectorAll('.highlighted-text');\n    previousHighlights.forEach(el => el.classList.remove('highlighted-text'));\n\n    // Find and highlight matching text\n    const textItems = textLayerDiv.querySelectorAll('.pdf-text-item');\n    let fullText = '';\n    const itemMap: { start: number; end: number; element: HTMLElement }[] = [];\n\n    textItems.forEach((item) => {\n      const start = fullText.length;\n      const content = item.textContent || '';\n      fullText += content;\n      const end = fullText.length;\n      itemMap.push({ start, end, element: item as HTMLElement });\n    });\n\n    // Find text position\n    const searchText = text.toLowerCase().trim();\n    const fullTextLower = fullText.toLowerCase();\n    const index = fullTextLower.indexOf(searchText);\n\n    if (index !== -1) {\n      const matchStart = index;\n      const matchEnd = index + searchText.length;\n\n      // Highlight matching elements\n      itemMap.forEach(({ start, end, element }) => {\n        if ((start >= matchStart && start < matchEnd) || (end > matchStart && end <= matchEnd) || (start <= matchStart && end >= matchEnd)) {\n          element.classList.add('highlighted-text');\n        }\n      });\n    }\n  };\n\n  // Navigation handlers\n  const handlePrevPage = () => {\n    if (currentPage > 1) {\n      const pageDiv = pageRefs.current.get(currentPage - 1);\n      if (pageDiv) {\n        pageDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      }\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  const handleNextPage = () => {\n    if (currentPage < totalPages) {\n      const pageDiv = pageRefs.current.get(currentPage + 1);\n      if (pageDiv) {\n        pageDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      }\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const handleZoomIn = () => {\n    setZoom(prev => Math.min(prev + 0.2, 3));\n    setRenderedPages(new Set());\n  };\n\n  const handleZoomOut = () => {\n    setZoom(prev => Math.max(prev - 0.2, 0.5));\n    setRenderedPages(new Set());\n  };\n\n  if (isLoading) {\n    return (\n      <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n        <CardHeader>\n          <CardTitle className=\"text-gray-900 dark:text-gray-50\">Loading PDF...</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center h-96\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n        <CardHeader>\n          <CardTitle className=\"text-red-600 dark:text-red-400\">Error</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-700 dark:text-gray-300\">{error}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-gray-900 dark:text-gray-50\">Document Viewer</CardTitle>\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\">\n              Page {currentPage} of {totalPages}\n            </Badge>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2 mt-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={handlePrevPage} disabled={currentPage === 1}>\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={handleNextPage} disabled={currentPage === totalPages}>\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n          <div className=\"flex-1\" />\n          <Button variant=\"outline\" size=\"sm\" onClick={handleZoomOut} disabled={zoom <= 0.5}>\n            <ZoomOut className=\"h-4 w-4\" />\n          </Button>\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">{Math.round(zoom * 100)}%</span>\n          <Button variant=\"outline\" size=\"sm\" onClick={handleZoomIn} disabled={zoom >= 3}>\n            <ZoomIn className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div \n          ref={containerRef}\n          className=\"relative overflow-auto bg-zinc-100 dark:bg-zinc-800 rounded-lg p-4\"\n          style={{ maxHeight: '75vh' }}\n        >\n          <div className=\"flex flex-col items-center gap-4\">\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((pageNum) => (\n              <div\n                key={pageNum}\n                ref={(el) => {\n                  if (el) pageRefs.current.set(pageNum, el);\n                }}\n                className=\"relative bg-white shadow-lg\"\n                style={{ marginBottom: '20px' }}\n              >\n                <canvas\n                  ref={(el) => {\n                    if (el) canvasRefs.current.set(pageNum, el);\n                  }}\n                  className=\"block w-full h-auto\"\n                />\n                <div\n                  ref={(el) => {\n                    if (el) textLayerRefs.current.set(pageNum, el);\n                  }}\n                  className=\"absolute top-0 left-0 pointer-events-none pdf-text-layer\"\n                  style={{\n                    overflow: 'hidden',\n                  }}\n                />\n                <div className=\"absolute bottom-2 right-2\">\n                  <Badge variant=\"secondary\">\n                    {pageNum}\n                  </Badge>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ProofreadPdfViewer;\n\n","\"use client\";\n\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useRouter } from 'next/navigation';\nimport { Upload } from 'lucide-react';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n  const pdfjs = await import('pdfjs-dist');\n  if (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n    pdfjs.GlobalWorkerOptions.workerSrc = `//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.mjs`;\n  }\n  return pdfjs;\n}\n\nimport { analyzePdfContent } from '../../lib/services/geminiService';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport SuggestionSidebar from '../../components/proofreader/SuggestionSidebar';\nimport PdfViewer from '../../components/proofreader/PdfViewer';\nimport ProofreadPdfViewer from '../../components/proofreader/ProofreadPdfViewer';\nimport WordEditor from '@/components/editor/WordEditor';\nimport mammoth from 'mammoth';\n\n// shadcn/ui components\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Progress } from \"@/components/ui/progress\";\n\n// Placeholder for SuggestionSidebar\ninterface SuggestionSidebarProps {\n  suggestions: Suggestion[];\n  onSuggestionClick: (suggestion: Suggestion) => void;\n  selectedSuggestion: Suggestion | null;\n  onEditPage: (pageNum: number) => void;\n}\n\nconst ProofreadPage: React.FC<{}> = () => {\n  const router = useRouter();\n  const [file, setFile] = useState<File | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n  const [extractedText, setExtractedText] = useState<string>('');\n  const [selectedSuggestion, setSelectedSuggestion] = useState<Suggestion | null>(null);\n  const [progress, setProgress] = useState<number>(66);\n  const [docxHtml, setDocxHtml] = useState<string>('');\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [fileType, setFileType] = useState<'pdf' | 'docx' | null>(null);\n\n  // Cleanup blob URL on unmount\n  React.useEffect(() => {\n    return () => {\n      if (pdfUrl) {\n        URL.revokeObjectURL(pdfUrl);\n      }\n    };\n  }, [pdfUrl]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    // Revoke old blob URL if exists\n    if (pdfUrl) {\n      URL.revokeObjectURL(pdfUrl);\n    }\n    \n    setFile(e.target.files ? e.target.files[0] : null);\n    setSuggestions([]); // Clear previous suggestions\n    setError(null);\n    setExtractedText(''); // Clear extracted text\n    setDocxHtml('');\n    setPdfUrl(null);\n    setFileType(null);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!file) {\n      setError(\"Please select a document to upload.\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setSuggestions([]);\n    setSelectedSuggestion(null); // Clear any selected suggestion\n    setProgress(12);\n\n    try {\n      const lower = file.name.toLowerCase();\n      const isPdf = lower.endsWith('.pdf') || file.type === 'application/pdf';\n      const isDocx = lower.endsWith('.docx') || file.type.includes('officedocument.wordprocessingml');\n\n      if (isPdf) {\n        const arrayBuffer = await file.arrayBuffer();\n        \n        // Dynamically load pdfjs\n        const pdfjs = await loadPdfJs();\n        const pdf = await pdfjs.getDocument({ data: arrayBuffer }).promise;\n        let fullText = '';\n\n        // Create a blob URL for the PDF viewer\n        const blob = new Blob([arrayBuffer], { type: 'application/pdf' });\n        const url = URL.createObjectURL(blob);\n        setPdfUrl(url);\n        setFileType('pdf');\n\n        for (let i = 1; i <= pdf.numPages; i++) {\n          const page = await pdf.getPage(i);\n          const textContent = await page.getTextContent();\n          const pageText = textContent.items.map((item: any) => item.str).join(' ');\n          fullText += `--- PAGE ${i} ---\\n${pageText}\\n`;\n          // simple perceived progress\n          setProgress(Math.min(90, Math.round((i / pdf.numPages) * 80) + 10));\n        }\n        setExtractedText(fullText); \n        setProgress(92);\n\n        console.log('[ProofreadPage] Extracted text length:', fullText.length);\n        console.log('[ProofreadPage] Extracted text preview:', fullText.substring(0, 500));\n        const aiSuggestions = await analyzePdfContent(fullText);\n        console.log('[ProofreadPage] PDF suggestions received:', aiSuggestions);\n        console.log('[ProofreadPage] Number of suggestions:', aiSuggestions.length);\n        setSuggestions(aiSuggestions);\n        setProgress(100);\n      } else if (isDocx) {\n        // Convert DOCX to HTML, then extract text for analysis\n        const arrayBuffer = await file.arrayBuffer();\n        const result = await mammoth.convertToHtml({ arrayBuffer });\n        const html = result.value || '';\n        setDocxHtml(html);\n        setFileType('docx');\n        setProgress(82);\n\n        // Extract text content from HTML for analysis\n        const tmp = document.createElement('div');\n        tmp.innerHTML = html;\n        const plainText = tmp.textContent || tmp.innerText || '';\n\n        console.log('[ProofreadPage] DOCX extracted text length:', plainText.length);\n        console.log('[ProofreadPage] DOCX extracted text preview:', plainText.substring(0, 500));\n\n        // Call DOCX analyze endpoint\n        const resp = await fetch('/api/analyze/docx', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ text: plainText }),\n        });\n        if (!resp.ok) {\n          throw new Error(`Analyze error ${resp.status}`);\n        }\n        const data = await resp.json();\n        const aiSuggestions: Suggestion[] = Array.isArray(data.suggestions) ? data.suggestions : [];\n        console.log('[ProofreadPage] DOCX suggestions received:', aiSuggestions);\n        console.log('[ProofreadPage] Number of suggestions:', aiSuggestions.length);\n        setSuggestions(aiSuggestions);\n        setProgress(100);\n      } else {\n        throw new Error('Unsupported file type. Please upload a PDF or DOCX.');\n      }\n    } catch (e) {\n      console.error(\"Failed to process file or get suggestions:\", e);\n      setError(\"Could not process the file or get suggestions. Ensure it's a valid PDF/DOCX and your API_KEY is set.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleApplyEdit = (pageNumber: number, originalText: string, newText: string) => {\n    // A simplified text replacement. In a real PDF viewer, this would involve more complex DOM manipulation\n    // or updating a state that controls PDF rendering.\n    setExtractedText((prevText) => {\n      // Replace only the first occurrence on the specific page to avoid unintended global replacements\n      const pageIdentifier = `--- PAGE ${pageNumber} ---\\n`;\n      const parts = prevText.split(pageIdentifier);\n      if (parts.length > 1) {\n        const beforePage = parts[0];\n        const pageContentAndAfter = parts.slice(1).join(pageIdentifier); // Rest of the document\n\n        const pageContentParts = pageContentAndAfter.split(originalText);\n        if (pageContentParts.length > 1) {\n          // Replace only the first occurrence within this specific page block\n          const newPageContent = pageContentParts[0] + newText + pageContentParts.slice(1).join(originalText);\n          return beforePage + pageIdentifier + newPageContent;\n        }\n      }\n      return prevText; // If not found or something went wrong, return original text\n    });\n    setSuggestions((prevSuggestions) => prevSuggestions.filter(s => !(s.page === pageNumber && s.original === originalText)));\n    setSelectedSuggestion(null); // Clear selected suggestion after applying\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-zinc-50 dark:bg-zinc-950 text-center gap-4 px-6\">\n        <Card className=\"w-full max-w-md border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-900 dark:text-gray-50\">Analyzing Document...</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Progress value={progress} />\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Please wait while our AI proofreads your document.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"min-h-screen bg-zinc-50 dark:bg-zinc-950 p-4 sm:p-6 lg:p-8 flex items-center justify-center\"\n    >\n      <Card className=\"max-w-6xl w-full border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n        <CardContent className=\"p-6 sm:p-8 flex flex-col md:flex-row gap-8\">\n        {/* Document Upload / Viewer Area */}\n        <div className=\"flex-1\">\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-50 mb-7 text-center\">Document Proofreader</h1>\n          {error && (\n            <Alert variant=\"destructive\" className=\"mb-6\">\n              <AlertTitle>Error</AlertTitle>\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          {!fileType ? (\n            <form onSubmit={handleSubmit} className=\"space-y-6 mb-8\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"file-upload\">Upload Document</Label>\n                <div className=\"flex items-center gap-3\">\n                  <Input\n                    id=\"file-upload\"\n                    name=\"file-upload\"\n                    type=\"file\"\n                    accept=\".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                    onChange={handleFileChange}\n                  />\n                  <Button type=\"submit\">\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Analyze\n                  </Button>\n                </div>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">PDF or DOCX, up to 10MB</p>\n                {file && <p className=\"text-sm text-green-600 dark:text-green-400\">{file.name}</p>}\n              </div>\n            </form>\n          ) : fileType === 'pdf' && pdfUrl ? (\n            <ProofreadPdfViewer\n              pdfUrl={pdfUrl}\n              suggestions={suggestions}\n              selectedSuggestion={selectedSuggestion}\n              onSuggestionClick={setSelectedSuggestion}\n              onApplyEdit={handleApplyEdit}\n            />\n          ) : fileType === 'docx' && docxHtml ? (\n            <WordEditor\n              wordHtml={docxHtml}\n              suggestions={suggestions}\n              selectedSuggestionIndex={selectedSuggestion ? suggestions.findIndex(s => s === selectedSuggestion) : null}\n              onContentChange={setDocxHtml}\n              onApplySuggestion={(index) => {\n                const s = suggestions[index];\n                if (!s) return;\n                // Replace a single occurrence within HTML content\n                const originalText = s.original || s.text;\n                const escaped = originalText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const regex = new RegExp(escaped, 'i');\n                setDocxHtml(prev => prev.replace(regex, s.suggestion));\n                setSuggestions(prev => prev.filter((_, i) => i !== index));\n              }}\n            />\n          ) : null}\n        </div>\n\n        {/* Suggestion Sidebar Area */}\n        <div className=\"md:w-1/3\">\n          <SuggestionSidebar\n            suggestions={suggestions}\n            onSuggestionClick={setSelectedSuggestion}\n            selectedSuggestion={selectedSuggestion}\n            onApplySuggestion={(index) => {\n              const s = suggestions[index];\n              if (!s) return;\n              const originalText = s.original || s.text;\n              handleApplyEdit(s.page, originalText, s.suggestion);\n            }}\n          />\n        </div>\n        </CardContent>\n      </Card>\n    </motion.div>\n  );\n};\n\nexport default ProofreadPage;\n","import React from 'react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { CheckCircle, FileText } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Separator } from '@/components/ui/separator';\n\ninterface SuggestionSidebarProps {\n  suggestions: Suggestion[];\n  onSuggestionClick: (suggestion: Suggestion) => void;\n  selectedSuggestion: Suggestion | null;\n  onApplySuggestion?: (index: number) => void;\n}\n\nconst SuggestionSidebar: React.FC<SuggestionSidebarProps> = ({ \n  suggestions, \n  onSuggestionClick, \n  selectedSuggestion,\n  onApplySuggestion \n}) => {\n  React.useEffect(() => {\n    console.log('[SuggestionSidebar] Received suggestions:', suggestions);\n    console.log('[SuggestionSidebar] Number of suggestions:', suggestions?.length || 0);\n  }, [suggestions]);\n\n  return (\n    <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 sticky top-24\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-emerald-600 dark:text-emerald-400\">\n            AI Suggestions\n          </CardTitle>\n          <Badge variant=\"secondary\" className=\"rounded-full\">\n            {suggestions.length}\n          </Badge>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"max-h-[calc(100vh-12rem)] overflow-y-auto space-y-3\">\n          {suggestions.length === 0 ? (\n            <div className=\"p-6 text-center flex flex-col items-center gap-4\">\n              <CheckCircle className=\"w-12 h-12 text-green-500\" />\n              <div>\n                <p className=\"font-semibold text-gray-900 dark:text-gray-50\">No suggestions found!</p>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                  The document looks great from a grammatical standpoint.\n                </p>\n              </div>\n            </div>\n          ) : (\n            suggestions.map((s, index) => (\n              <div\n                key={index}\n                onClick={() => onSuggestionClick(s)}\n                className={`rounded-md border p-3 cursor-pointer transition-colors ${\n                  selectedSuggestion === s\n                    ? 'border-emerald-400 bg-emerald-50/50 dark:bg-emerald-900/20'\n                    : 'border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-800/50'\n                }`}\n              >\n                <div className=\"flex items-center justify-between mb-2\">\n                  <Badge variant=\"secondary\" className=\"rounded-full\">\n                    <FileText className=\"w-3 h-3 mr-1\" />\n                    Page {s.page}\n                  </Badge>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <div>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Original:</p>\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 line-through\">{s.original}</p>\n                  </div>\n                  \n                  <div>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Suggestion:</p>\n                    <p className=\"text-sm text-green-600 dark:text-green-400 font-medium\">{s.suggestion}</p>\n                  </div>\n                  \n                  {s.explanation && (\n                    <div>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Reason:</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400 italic\">{s.explanation}</p>\n                    </div>\n                  )}\n                </div>\n\n                {onApplySuggestion && (\n                  <>\n                    <Separator className=\"my-3\" />\n                    <Button\n                      size=\"sm\"\n                      className=\"w-full\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onApplySuggestion(index);\n                      }}\n                    >\n                      Apply Change\n                    </Button>\n                  </>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SuggestionSidebar;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['line', { x1: '21', x2: '16.65', y1: '21', y2: '16.65', key: '13gj7c' }],\n  ['line', { x1: '11', x2: '11', y1: '8', y2: '14', key: '1vmskp' }],\n  ['line', { x1: '8', x2: '14', y1: '11', y2: '11', key: 'durymu' }],\n];\n\n/**\n * @component @name ZoomIn\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxsaW5lIHgxPSIyMSIgeDI9IjE2LjY1IiB5MT0iMjEiIHkyPSIxNi42NSIgLz4KICA8bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIgLz4KICA8bGluZSB4MT0iOCIgeDI9IjE0IiB5MT0iMTEiIHkyPSIxMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zoom-in\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ZoomIn = createLucideIcon('zoom-in', __iconNode);\n\nexport default ZoomIn;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['line', { x1: '21', x2: '16.65', y1: '21', y2: '16.65', key: '13gj7c' }],\n  ['line', { x1: '8', x2: '14', y1: '11', y2: '11', key: 'durymu' }],\n];\n\n/**\n * @component @name ZoomOut\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxsaW5lIHgxPSIyMSIgeDI9IjE2LjY1IiB5MT0iMjEiIHkyPSIxNi42NSIgLz4KICA8bGluZSB4MT0iOCIgeDI9IjE0IiB5MT0iMTEiIHkyPSIxMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zoom-out\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ZoomOut = createLucideIcon('zoom-out', __iconNode);\n\nexport default ZoomOut;\n"],"names":[],"mappings":"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","ignoreList":[3,4,5,6]}