{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/backend/src/jwt/legacyReturn.ts"],"sourcesContent":["import type { JwtReturnType } from './types';\n\n// TODO(dimkl): Will be probably be dropped in next major version\nexport function withLegacyReturn<T extends (...args: any[]) => Promise<JwtReturnType<any, any>>>(cb: T) {\n  return async (...args: Parameters<T>): Promise<NonNullable<Awaited<ReturnType<T>>['data']>> | never => {\n    const { data, errors } = await cb(...args);\n    if (errors) {\n      throw errors[0];\n    }\n    return data;\n  };\n}\n\n// TODO(dimkl): Will be probably be dropped in next major version\nexport function withLegacySyncReturn<T extends (...args: any[]) => JwtReturnType<any, any>>(cb: T) {\n  return (...args: Parameters<T>): NonNullable<Awaited<ReturnType<T>>['data']> | never => {\n    const { data, errors } = cb(...args);\n    if (errors) {\n      throw errors[0];\n    }\n    return data;\n  };\n}\n"],"names":[],"mappings":";;;;;;;AAGO,SAAS,iBAAiF,EAAA,EAAO;IACtG,OAAO,OAAA,GAAU,SAAsF;QACrG,MAAM,EAAE,IAAA,EAAM,MAAA,CAAO,CAAA,GAAI,MAAM,GAAG,GAAG,IAAI;QACzC,IAAI,QAAQ;YACV,MAAM,MAAA,CAAO,CAAC,CAAA;QAChB;QACA,OAAO;IACT;AACF;AAGO,SAAS,qBAA4E,EAAA,EAAO;IACjG,OAAO,CAAA,GAAI,SAA6E;QACtF,MAAM,EAAE,IAAA,EAAM,MAAA,CAAO,CAAA,GAAI,GAAG,GAAG,IAAI;QACnC,IAAI,QAAQ;YACV,MAAM,MAAA,CAAO,CAAC,CAAA;QAChB;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@clerk/shared/dist/runtime/telemetry-x9LpQpc1.mjs","sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/throttler.ts","file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/collector.ts","file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/events/component-mounted.ts","file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/events/method-called.ts","file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/events/framework-metadata.ts","file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/src/telemetry/events/theme-usage.ts"],"sourcesContent":["import type { TelemetryEvent } from '../types';\n\ntype TtlInMilliseconds = number;\n\nconst DEFAULT_CACHE_TTL_MS = 86400000; // 24 hours\n\n/**\n * Interface for cache storage used by the telemetry throttler.\n * Implementations can use localStorage, in-memory storage, or any other storage mechanism.\n */\nexport interface ThrottlerCache {\n  getItem(key: string): TtlInMilliseconds | undefined;\n  setItem(key: string, value: TtlInMilliseconds): void;\n  removeItem(key: string): void;\n}\n\n/**\n * Manages throttling for telemetry events using a configurable cache implementation\n * to mitigate event flooding in frequently executed code paths.\n */\nexport class TelemetryEventThrottler {\n  #cache: ThrottlerCache;\n  #cacheTtl = DEFAULT_CACHE_TTL_MS;\n\n  constructor(cache: ThrottlerCache) {\n    this.#cache = cache;\n  }\n\n  isEventThrottled(payload: TelemetryEvent): boolean {\n    const now = Date.now();\n    const key = this.#generateKey(payload);\n    const entry = this.#cache.getItem(key);\n\n    if (!entry) {\n      this.#cache.setItem(key, now);\n      return false;\n    }\n\n    const shouldInvalidate = now - entry > this.#cacheTtl;\n    if (shouldInvalidate) {\n      this.#cache.setItem(key, now);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Generates a consistent unique key for telemetry events by sorting payload properties.\n   * This ensures that payloads with identical content in different orders produce the same key.\n   */\n  #generateKey(event: TelemetryEvent): string {\n    const { sk: _sk, pk: _pk, payload, ...rest } = event;\n\n    const sanitizedEvent: Omit<TelemetryEvent, 'sk' | 'pk' | 'payload'> & TelemetryEvent['payload'] = {\n      ...payload,\n      ...rest,\n    };\n\n    return JSON.stringify(\n      Object.keys({\n        ...payload,\n        ...rest,\n      })\n        .sort()\n        .map(key => sanitizedEvent[key]),\n    );\n  }\n}\n\n/**\n * LocalStorage-based cache implementation for browser environments.\n */\nexport class LocalStorageThrottlerCache implements ThrottlerCache {\n  #storageKey = 'clerk_telemetry_throttler';\n\n  getItem(key: string): TtlInMilliseconds | undefined {\n    return this.#getCache()[key];\n  }\n\n  setItem(key: string, value: TtlInMilliseconds): void {\n    try {\n      const cache = this.#getCache();\n      cache[key] = value;\n      localStorage.setItem(this.#storageKey, JSON.stringify(cache));\n    } catch (err: unknown) {\n      const isQuotaExceededError =\n        err instanceof DOMException &&\n        // Check error names for different browsers\n        (err.name === 'QuotaExceededError' || err.name === 'NS_ERROR_DOM_QUOTA_REACHED');\n\n      if (isQuotaExceededError && localStorage.length > 0) {\n        // Clear our cache if quota exceeded\n        localStorage.removeItem(this.#storageKey);\n      }\n    }\n  }\n\n  removeItem(key: string): void {\n    try {\n      const cache = this.#getCache();\n      delete cache[key];\n      localStorage.setItem(this.#storageKey, JSON.stringify(cache));\n    } catch {\n      // Silently fail if we can't remove\n    }\n  }\n\n  #getCache(): Record<string, TtlInMilliseconds> {\n    try {\n      const cacheString = localStorage.getItem(this.#storageKey);\n      if (!cacheString) {\n        return {};\n      }\n      return JSON.parse(cacheString);\n    } catch {\n      return {};\n    }\n  }\n\n  static isSupported(): boolean {\n    return typeof window !== 'undefined' && !!window.localStorage;\n  }\n}\n\n/**\n * In-memory cache implementation for non-browser environments (e.g., React Native).\n */\nexport class InMemoryThrottlerCache implements ThrottlerCache {\n  #cache: Map<string, TtlInMilliseconds> = new Map();\n  #maxSize = 10000; // Defensive limit to prevent memory issues\n\n  getItem(key: string): TtlInMilliseconds | undefined {\n    // Defensive: clear cache if it gets too large\n    if (this.#cache.size > this.#maxSize) {\n      this.#cache.clear();\n      return undefined;\n    }\n\n    return this.#cache.get(key);\n  }\n\n  setItem(key: string, value: TtlInMilliseconds): void {\n    this.#cache.set(key, value);\n  }\n\n  removeItem(key: string): void {\n    this.#cache.delete(key);\n  }\n}\n","/**\n * The `TelemetryCollector` class handles collection of telemetry events from Clerk SDKs. Telemetry is opt-out and can be disabled by setting a CLERK_TELEMETRY_DISABLED environment variable.\n * The `ClerkProvider` also accepts a `telemetry` prop that will be passed to the collector during initialization:.\n *\n * ```jsx\n * <ClerkProvider telemetry={false}>\n *    ...\n * </ClerkProvider>\n * ```\n *\n * For more information, please see the telemetry documentation page: https://clerk.com/docs/telemetry.\n */\nimport { parsePublishableKey } from '../keys';\nimport type {\n  InstanceType,\n  SDKMetadata,\n  TelemetryCollector as TelemetryCollectorInterface,\n  TelemetryEvent,\n  TelemetryEventRaw,\n  TelemetryLogEntry,\n} from '../types';\nimport { isTruthy } from '../underscore';\nimport { InMemoryThrottlerCache, LocalStorageThrottlerCache, TelemetryEventThrottler } from './throttler';\nimport type { TelemetryCollectorOptions } from './types';\n\n/**\n * Local interface for window.Clerk to avoid global type pollution.\n * This is only used within this module and doesn't affect other packages.\n */\ninterface WindowWithClerk extends Window {\n  Clerk?: {\n    constructor?: {\n      sdkMetadata?: SDKMetadata;\n    };\n  };\n}\n\n/**\n * Type guard to check if window.Clerk exists and has the expected structure.\n */\nfunction isWindowClerkWithMetadata(clerk: unknown): clerk is { constructor: { sdkMetadata?: SDKMetadata } } {\n  return (\n    typeof clerk === 'object' && clerk !== null && 'constructor' in clerk && typeof clerk.constructor === 'function'\n  );\n}\n\ntype TelemetryCollectorConfig = Pick<\n  TelemetryCollectorOptions,\n  'samplingRate' | 'disabled' | 'debug' | 'maxBufferSize' | 'perEventSampling'\n> & {\n  endpoint: string;\n};\n\ntype TelemetryMetadata = Required<\n  Pick<TelemetryCollectorOptions, 'clerkVersion' | 'sdk' | 'sdkVersion' | 'publishableKey' | 'secretKey'>\n> & {\n  /**\n   * The instance type, derived from the provided publishableKey.\n   */\n  instanceType: InstanceType;\n};\n\n/**\n * Structure of log data sent to the telemetry endpoint.\n */\ntype TelemetryLogData = {\n  /** Service that generated the log. */\n  sdk: string;\n  /** The version of the SDK where the event originated from. */\n  sdkv: string;\n  /** The version of Clerk where the event originated from. */\n  cv: string;\n  /** Log level (info, warn, error, debug, etc.). */\n  lvl: TelemetryLogEntry['level'];\n  /** Log message. */\n  msg: string;\n  /** Instance ID - optional. */\n  iid?: string;\n  /** Timestamp when log was generated. */\n  ts: string;\n  /** Primary key. */\n  pk: string | null;\n  /** Additional payload for the log. */\n  payload: Record<string, unknown> | null;\n};\n\ntype TelemetryBufferItem = { kind: 'event'; value: TelemetryEvent } | { kind: 'log'; value: TelemetryLogData };\n\n// Accepted log levels for runtime validation\nconst VALID_LOG_LEVELS = new Set<string>(['error', 'warn', 'info', 'debug', 'trace']);\n\nconst DEFAULT_CONFIG: Partial<TelemetryCollectorConfig> = {\n  samplingRate: 1,\n  maxBufferSize: 5,\n  // Production endpoint: https://clerk-telemetry.com\n  // Staging endpoint: https://staging.clerk-telemetry.com\n  // Local: http://localhost:8787\n  endpoint: 'https://clerk-telemetry.com',\n};\n\nexport class TelemetryCollector implements TelemetryCollectorInterface {\n  #config: Required<TelemetryCollectorConfig>;\n  #eventThrottler: TelemetryEventThrottler;\n  #metadata: TelemetryMetadata = {} as TelemetryMetadata;\n  #buffer: TelemetryBufferItem[] = [];\n  #pendingFlush: number | ReturnType<typeof setTimeout> | null = null;\n\n  constructor(options: TelemetryCollectorOptions) {\n    this.#config = {\n      maxBufferSize: options.maxBufferSize ?? DEFAULT_CONFIG.maxBufferSize,\n      samplingRate: options.samplingRate ?? DEFAULT_CONFIG.samplingRate,\n      perEventSampling: options.perEventSampling ?? true,\n      disabled: options.disabled ?? false,\n      debug: options.debug ?? false,\n      endpoint: DEFAULT_CONFIG.endpoint,\n    } as Required<TelemetryCollectorConfig>;\n\n    if (!options.clerkVersion && typeof window === 'undefined') {\n      // N/A in a server environment\n      this.#metadata.clerkVersion = '';\n    } else {\n      this.#metadata.clerkVersion = options.clerkVersion ?? '';\n    }\n\n    // We will try to grab the SDK data lazily when an event is triggered, so it should always be defined once the event is sent.\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    this.#metadata.sdk = options.sdk!;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    this.#metadata.sdkVersion = options.sdkVersion!;\n\n    this.#metadata.publishableKey = options.publishableKey ?? '';\n\n    const parsedKey = parsePublishableKey(options.publishableKey);\n    if (parsedKey) {\n      this.#metadata.instanceType = parsedKey.instanceType;\n    }\n\n    if (options.secretKey) {\n      // Only send the first 16 characters of the secret key to to avoid sending the full key. We can still query against the partial key.\n      this.#metadata.secretKey = options.secretKey.substring(0, 16);\n    }\n\n    // Use LocalStorage cache in browsers where it's supported, otherwise fall back to in-memory cache\n    const cache = LocalStorageThrottlerCache.isSupported()\n      ? new LocalStorageThrottlerCache()\n      : new InMemoryThrottlerCache();\n    this.#eventThrottler = new TelemetryEventThrottler(cache);\n  }\n\n  get isEnabled(): boolean {\n    if (this.#metadata.instanceType !== 'development') {\n      return false;\n    }\n\n    // In browser or client environments, we most likely pass the disabled option to the collector, but in environments\n    // where environment variables are available we also check for `CLERK_TELEMETRY_DISABLED`.\n    if (\n      this.#config.disabled ||\n      (typeof process !== 'undefined' && process.env && isTruthy(process.env.CLERK_TELEMETRY_DISABLED))\n    ) {\n      return false;\n    }\n\n    // navigator.webdriver is a property generally set by headless browsers that are running in an automated testing environment.\n    // Data from these environments is not meaningful for us and has the potential to produce a large volume of events, so we disable\n    // collection in this case. (ref: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/webdriver)\n    if (typeof window !== 'undefined' && !!window?.navigator?.webdriver) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get isDebug(): boolean {\n    return (\n      this.#config.debug ||\n      (typeof process !== 'undefined' && process.env && isTruthy(process.env.CLERK_TELEMETRY_DEBUG))\n    );\n  }\n\n  record(event: TelemetryEventRaw): void {\n    try {\n      const preparedPayload = this.#preparePayload(event.event, event.payload);\n\n      this.#logEvent(preparedPayload.event, preparedPayload);\n\n      if (!this.#shouldRecord(preparedPayload, event.eventSamplingRate)) {\n        return;\n      }\n\n      this.#buffer.push({ kind: 'event', value: preparedPayload });\n\n      this.#scheduleFlush();\n    } catch (error) {\n      console.error('[clerk/telemetry] Error recording telemetry event', error);\n    }\n  }\n\n  /**\n   * Records a telemetry log entry if logging is enabled and not in debug mode.\n   *\n   * @param entry - The telemetry log entry to record.\n   */\n  recordLog(entry: TelemetryLogEntry): void {\n    try {\n      if (!this.#shouldRecordLog(entry)) {\n        return;\n      }\n\n      const levelIsValid = typeof entry?.level === 'string' && VALID_LOG_LEVELS.has(entry.level);\n      const messageIsValid = typeof entry?.message === 'string' && entry.message.trim().length > 0;\n\n      let normalizedTimestamp: Date | null = null;\n      const timestampInput: unknown = (entry as unknown as { timestamp?: unknown })?.timestamp;\n      if (typeof timestampInput === 'number' || typeof timestampInput === 'string') {\n        const candidate = new Date(timestampInput);\n        if (!Number.isNaN(candidate.getTime())) {\n          normalizedTimestamp = candidate;\n        }\n      }\n\n      if (!levelIsValid || !messageIsValid || normalizedTimestamp === null) {\n        if (this.isDebug && typeof console !== 'undefined') {\n          console.warn('[clerk/telemetry] Dropping invalid telemetry log entry', {\n            levelIsValid,\n            messageIsValid,\n            timestampIsValid: normalizedTimestamp !== null,\n          });\n        }\n        return;\n      }\n\n      const sdkMetadata = this.#getSDKMetadata();\n\n      const logData: TelemetryLogData = {\n        sdk: sdkMetadata.name,\n        sdkv: sdkMetadata.version,\n        cv: this.#metadata.clerkVersion ?? '',\n        lvl: entry.level,\n        msg: entry.message,\n        ts: normalizedTimestamp.toISOString(),\n        pk: this.#metadata.publishableKey || null,\n        payload: this.#sanitizeContext(entry.context),\n      };\n\n      this.#buffer.push({ kind: 'log', value: logData });\n\n      this.#scheduleFlush();\n    } catch (error) {\n      console.error('[clerk/telemetry] Error recording telemetry log entry', error);\n    }\n  }\n\n  #shouldRecord(preparedPayload: TelemetryEvent, eventSamplingRate?: number) {\n    return this.isEnabled && !this.isDebug && this.#shouldBeSampled(preparedPayload, eventSamplingRate);\n  }\n\n  #shouldRecordLog(_entry: TelemetryLogEntry): boolean {\n    // Always allow logs from debug logger to be sent. Debug logger itself is already gated elsewhere.\n    return true;\n  }\n\n  #shouldBeSampled(preparedPayload: TelemetryEvent, eventSamplingRate?: number) {\n    const randomSeed = Math.random();\n\n    const toBeSampled =\n      randomSeed <= this.#config.samplingRate &&\n      (this.#config.perEventSampling === false ||\n        typeof eventSamplingRate === 'undefined' ||\n        randomSeed <= eventSamplingRate);\n\n    if (!toBeSampled) {\n      return false;\n    }\n\n    return !this.#eventThrottler.isEventThrottled(preparedPayload);\n  }\n\n  #scheduleFlush(): void {\n    // On the server, we want to flush immediately as we have less guarantees about the lifecycle of the process\n    if (typeof window === 'undefined') {\n      this.#flush();\n      return;\n    }\n    const isBufferFull = this.#buffer.length >= this.#config.maxBufferSize;\n    if (isBufferFull) {\n      // If the buffer is full, flush immediately to make sure we minimize the chance of event loss.\n      // Cancel any pending flushes as we're going to flush immediately\n      if (this.#pendingFlush) {\n        if (typeof cancelIdleCallback !== 'undefined') {\n          cancelIdleCallback(Number(this.#pendingFlush));\n        } else {\n          clearTimeout(Number(this.#pendingFlush));\n        }\n      }\n      this.#flush();\n      return;\n    }\n\n    // If we have a pending flush, do nothing\n    if (this.#pendingFlush) {\n      return;\n    }\n\n    if ('requestIdleCallback' in window) {\n      this.#pendingFlush = requestIdleCallback(() => {\n        this.#flush();\n        this.#pendingFlush = null;\n      });\n    } else {\n      // This is not an ideal solution, but it at least waits until the next tick\n      this.#pendingFlush = setTimeout(() => {\n        this.#flush();\n        this.#pendingFlush = null;\n      }, 0);\n    }\n  }\n\n  #flush(): void {\n    // Capture the current buffer and clear it immediately to avoid closure references\n    const itemsToSend = [...this.#buffer];\n    this.#buffer = [];\n\n    this.#pendingFlush = null;\n\n    if (itemsToSend.length === 0) {\n      return;\n    }\n\n    const eventsToSend = itemsToSend\n      .filter(item => item.kind === 'event')\n      .map(item => (item as { kind: 'event'; value: TelemetryEvent }).value);\n\n    const logsToSend = itemsToSend\n      .filter(item => item.kind === 'log')\n      .map(item => (item as { kind: 'log'; value: TelemetryLogData }).value);\n\n    if (eventsToSend.length > 0) {\n      const eventsUrl = new URL('/v1/event', this.#config.endpoint);\n      fetch(eventsUrl, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        keepalive: true,\n        method: 'POST',\n        // TODO: We send an array here with that idea that we can eventually send multiple events.\n        body: JSON.stringify({ events: eventsToSend }),\n      }).catch(() => void 0);\n    }\n\n    if (logsToSend.length > 0) {\n      const logsUrl = new URL('/v1/logs', this.#config.endpoint);\n      fetch(logsUrl, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        keepalive: true,\n        method: 'POST',\n        body: JSON.stringify({ logs: logsToSend }),\n      }).catch(() => void 0);\n    }\n  }\n\n  /**\n   * If running in debug mode, log the event and its payload to the console.\n   */\n  #logEvent(event: TelemetryEvent['event'], payload: Record<string, any>) {\n    if (!this.isDebug) {\n      return;\n    }\n\n    if (typeof console.groupCollapsed !== 'undefined') {\n      console.groupCollapsed('[clerk/telemetry]', event);\n      console.log(payload);\n      console.groupEnd();\n    } else {\n      console.log('[clerk/telemetry]', event, payload);\n    }\n  }\n\n  /**\n   * If in browser, attempt to lazily grab the SDK metadata from the Clerk singleton, otherwise fallback to the initially passed in values.\n   *\n   * This is necessary because the sdkMetadata can be set by the host SDK after the TelemetryCollector is instantiated.\n   */\n  #getSDKMetadata() {\n    const sdkMetadata = {\n      name: this.#metadata.sdk,\n      version: this.#metadata.sdkVersion,\n    };\n\n    if (typeof window !== 'undefined') {\n      const windowWithClerk = window as WindowWithClerk;\n\n      if (windowWithClerk.Clerk) {\n        const windowClerk = windowWithClerk.Clerk;\n\n        if (isWindowClerkWithMetadata(windowClerk) && windowClerk.constructor.sdkMetadata) {\n          const { name, version } = windowClerk.constructor.sdkMetadata;\n\n          if (name !== undefined) {\n            sdkMetadata.name = name;\n          }\n          if (version !== undefined) {\n            sdkMetadata.version = version;\n          }\n        }\n      }\n    }\n\n    return sdkMetadata;\n  }\n\n  /**\n   * Append relevant metadata from the Clerk singleton to the event payload.\n   */\n  #preparePayload(event: TelemetryEvent['event'], payload: TelemetryEvent['payload']): TelemetryEvent {\n    const sdkMetadata = this.#getSDKMetadata();\n\n    return {\n      event,\n      cv: this.#metadata.clerkVersion ?? '',\n      it: this.#metadata.instanceType ?? '',\n      sdk: sdkMetadata.name,\n      sdkv: sdkMetadata.version,\n      ...(this.#metadata.publishableKey ? { pk: this.#metadata.publishableKey } : {}),\n      ...(this.#metadata.secretKey ? { sk: this.#metadata.secretKey } : {}),\n      payload,\n    };\n  }\n\n  /**\n   * Best-effort sanitization of the context payload. Returns a plain object with JSON-serializable\n   * values or null when the input is missing or not serializable. Arrays are not accepted.\n   */\n  #sanitizeContext(context: unknown): Record<string, unknown> | null {\n    if (context === null || typeof context === 'undefined') {\n      return null;\n    }\n    if (typeof context !== 'object') {\n      return null;\n    }\n    try {\n      const cleaned = JSON.parse(JSON.stringify(context));\n      if (cleaned && typeof cleaned === 'object' && !Array.isArray(cleaned)) {\n        return cleaned as Record<string, unknown>;\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }\n}\n","import type { TelemetryEventRaw } from '../../types';\n\nconst EVENT_COMPONENT_MOUNTED = 'COMPONENT_MOUNTED';\nconst EVENT_COMPONENT_OPENED = 'COMPONENT_OPENED';\nconst EVENT_SAMPLING_RATE = 0.1;\n\n/** Increase sampling for high-signal auth components on mount. */\nconst AUTH_COMPONENTS = new Set<string>(['SignIn', 'SignUp']);\n\n/**\n * Returns the per-event sampling rate for component-mounted telemetry events.\n * Uses a higher rate for SignIn/SignUp to improve signal quality.\n *\n *  @internal\n */\nfunction getComponentMountedSamplingRate(component: string): number {\n  return AUTH_COMPONENTS.has(component) ? 1 : EVENT_SAMPLING_RATE;\n}\n\ntype ComponentMountedBase = {\n  component: string;\n};\n\ntype EventPrebuiltComponent = ComponentMountedBase & {\n  appearanceProp: boolean;\n  elements: boolean;\n  variables: boolean;\n  baseTheme: boolean;\n};\n\ntype EventComponentMounted = ComponentMountedBase & TelemetryEventRaw['payload'];\n\n/**\n * Factory for prebuilt component telemetry events.\n *\n * @internal\n */\nfunction createPrebuiltComponentEvent(event: typeof EVENT_COMPONENT_MOUNTED | typeof EVENT_COMPONENT_OPENED) {\n  return function (\n    component: string,\n    props?: Record<string, any>,\n    additionalPayload?: TelemetryEventRaw['payload'],\n  ): TelemetryEventRaw<EventPrebuiltComponent> {\n    return {\n      event,\n      eventSamplingRate:\n        event === EVENT_COMPONENT_MOUNTED ? getComponentMountedSamplingRate(component) : EVENT_SAMPLING_RATE,\n      payload: {\n        component,\n        appearanceProp: Boolean(props?.appearance),\n        baseTheme: Boolean(props?.appearance?.baseTheme),\n        elements: Boolean(props?.appearance?.elements),\n        variables: Boolean(props?.appearance?.variables),\n        ...additionalPayload,\n      },\n    };\n  };\n}\n\n/**\n * Helper function for `telemetry.record()`. Create a consistent event object for when a prebuilt (AIO) component is mounted.\n *\n * @param component - The name of the component.\n * @param props - The props passed to the component. Will be filtered to a known list of props.\n * @param additionalPayload - Additional data to send with the event.\n * @example\n * telemetry.record(eventPrebuiltComponentMounted('SignUp', props));\n */\nexport function eventPrebuiltComponentMounted(\n  component: string,\n  props?: Record<string, any>,\n  additionalPayload?: TelemetryEventRaw['payload'],\n): TelemetryEventRaw<EventPrebuiltComponent> {\n  return createPrebuiltComponentEvent(EVENT_COMPONENT_MOUNTED)(component, props, additionalPayload);\n}\n\n/**\n * Helper function for `telemetry.record()`. Create a consistent event object for when a prebuilt (AIO) component is opened as a modal.\n *\n * @param component - The name of the component.\n * @param props - The props passed to the component. Will be filtered to a known list of props.\n * @param additionalPayload - Additional data to send with the event.\n * @example\n * telemetry.record(eventPrebuiltComponentOpened('GoogleOneTap', props));\n */\nexport function eventPrebuiltComponentOpened(\n  component: string,\n  props?: Record<string, any>,\n  additionalPayload?: TelemetryEventRaw['payload'],\n): TelemetryEventRaw<EventPrebuiltComponent> {\n  return createPrebuiltComponentEvent(EVENT_COMPONENT_OPENED)(component, props, additionalPayload);\n}\n\n/**\n * Helper function for `telemetry.record()`. Create a consistent event object for when a component is mounted. Use `eventPrebuiltComponentMounted` for prebuilt components.\n *\n * **Caution:** Filter the `props` you pass to this function to avoid sending too much data.\n *\n * @param component - The name of the component.\n * @param props - The props passed to the component. Ideally you only pass a handful of props here.\n * @example\n * telemetry.record(eventComponentMounted('SignUp', props));\n */\nexport function eventComponentMounted(\n  component: string,\n  props: TelemetryEventRaw['payload'] = {},\n): TelemetryEventRaw<EventComponentMounted> {\n  return {\n    event: EVENT_COMPONENT_MOUNTED,\n    eventSamplingRate: getComponentMountedSamplingRate(component),\n    payload: {\n      component,\n      ...props,\n    },\n  };\n}\n","import type { TelemetryEventRaw } from '../../types';\n\nconst EVENT_METHOD_CALLED = 'METHOD_CALLED';\nconst EVENT_SAMPLING_RATE = 0.1;\n\ntype EventMethodCalled = {\n  method: string;\n} & Record<string, string | number | boolean>;\n\n/**\n * Fired when a helper method is called from a Clerk SDK.\n */\nexport function eventMethodCalled(\n  method: string,\n  payload?: Record<string, unknown>,\n): TelemetryEventRaw<EventMethodCalled> {\n  return {\n    event: EVENT_METHOD_CALLED,\n    eventSamplingRate: EVENT_SAMPLING_RATE,\n    payload: {\n      method,\n      ...payload,\n    },\n  };\n}\n","import type { TelemetryEventRaw } from '../../types';\n\nconst EVENT_FRAMEWORK_METADATA = 'FRAMEWORK_METADATA';\nconst EVENT_SAMPLING_RATE = 0.1;\n\ntype EventFrameworkMetadata = Record<string, string | number | boolean>;\n\n/**\n * Fired when a helper method is called from a Clerk SDK.\n */\nexport function eventFrameworkMetadata(payload: EventFrameworkMetadata): TelemetryEventRaw<EventFrameworkMetadata> {\n  return {\n    event: EVENT_FRAMEWORK_METADATA,\n    eventSamplingRate: EVENT_SAMPLING_RATE,\n    payload,\n  };\n}\n","import type { Appearance, BaseTheme, TelemetryEventRaw } from '../../types';\n\nexport const EVENT_THEME_USAGE = 'THEME_USAGE';\nexport const EVENT_SAMPLING_RATE = 1;\n\ntype EventThemeUsage = {\n  /**\n   * The name of the theme being used (e.g., \"shadcn\", \"neobrutalism\", etc.).\n   */\n  themeName?: string;\n};\n\n/**\n * Helper function for `telemetry.record()`. Create a consistent event object for tracking theme usage in ClerkProvider.\n *\n * @param appearance - The appearance prop from ClerkProvider.\n * @example\n * telemetry.record(eventThemeUsage(appearance));\n */\nexport function eventThemeUsage(appearance?: Appearance): TelemetryEventRaw<EventThemeUsage> {\n  const payload = analyzeThemeUsage(appearance);\n\n  return {\n    event: EVENT_THEME_USAGE,\n    eventSamplingRate: EVENT_SAMPLING_RATE,\n    payload,\n  };\n}\n\n/**\n * Analyzes the appearance prop to extract theme usage information for telemetry.\n *\n * @internal\n */\nfunction analyzeThemeUsage(appearance?: Appearance): EventThemeUsage {\n  if (!appearance || typeof appearance !== 'object') {\n    return {};\n  }\n\n  // Prioritize the new theme property over deprecated baseTheme\n  const themeProperty = appearance.theme || appearance.baseTheme;\n\n  if (!themeProperty) {\n    return {};\n  }\n\n  let themeName: string | undefined;\n\n  if (Array.isArray(themeProperty)) {\n    // Look for the first identifiable theme name in the array\n    for (const theme of themeProperty) {\n      const name = extractThemeName(theme);\n      if (name) {\n        themeName = name;\n        break;\n      }\n    }\n  } else {\n    themeName = extractThemeName(themeProperty);\n  }\n\n  return { themeName };\n}\n\n/**\n * Extracts the theme name from a theme object.\n *\n * @internal\n */\nfunction extractThemeName(theme: BaseTheme): string | undefined {\n  if (typeof theme === 'string') {\n    return theme;\n  }\n\n  if (typeof theme === 'object' && theme !== null) {\n    // Check for explicit theme name\n    if ('name' in theme && typeof theme.name === 'string') {\n      return theme.name;\n    }\n  }\n\n  return undefined;\n}\n"],"names":["cache: ThrottlerCache","#cache","payload: TelemetryEvent","#generateKey","#cacheTtl","event: TelemetryEvent","sanitizedEvent: Omit<TelemetryEvent, 'sk' | 'pk' | 'payload'> & TelemetryEvent['payload']","key: string","#getCache","value: TtlInMilliseconds","#storageKey","err: unknown","#maxSize","clerk: unknown","DEFAULT_CONFIG: Partial<TelemetryCollectorConfig>","options: TelemetryCollectorOptions","#config","#metadata","#eventThrottler","event: TelemetryEventRaw","#preparePayload","#logEvent","#shouldRecord","#buffer","#scheduleFlush","entry: TelemetryLogEntry","#shouldRecordLog","normalizedTimestamp: Date | null","timestampInput: unknown","#getSDKMetadata","logData: TelemetryLogData","#sanitizeContext","preparedPayload: TelemetryEvent","eventSamplingRate?: number","#shouldBeSampled","_entry: TelemetryLogEntry","#flush","#pendingFlush","event: TelemetryEvent['event']","payload: Record<string, any>","payload: TelemetryEvent['payload']","context: unknown","EVENT_SAMPLING_RATE","component: string","event: typeof EVENT_COMPONENT_MOUNTED | typeof EVENT_COMPONENT_OPENED","props?: Record<string, any>","additionalPayload?: TelemetryEventRaw['payload']","props: TelemetryEventRaw['payload']","EVENT_SAMPLING_RATE","method: string","payload?: Record<string, unknown>","EVENT_SAMPLING_RATE","payload: EventFrameworkMetadata","appearance?: Appearance","themeName: string | undefined","theme: BaseTheme"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAM,uBAAuB;;;;GAgB7B,IAAa,0BAAb,MAAqC;KACnC,KAAA,CAAA;KACA,QAAA,GAAY,qBAAA;IAEZ,YAAYA,KAAAA,CAAuB;QACjC,IAAA,EAAKC,KAAAA,GAAS;IACf;IAED,iBAAiBC,OAAAA,EAAkC;QACjD,MAAM,MAAM,KAAK,GAAA,EAAK;QACtB,MAAM,MAAM,IAAA,EAAKC,WAAAA,CAAa,QAAQ;QACtC,MAAM,QAAQ,IAAA,EAAKF,KAAAA,CAAO,OAAA,CAAQ,IAAI;QAEtC,IAAA,CAAK,OAAO;YACV,IAAA,EAAKA,KAAAA,CAAO,OAAA,CAAQ,KAAK,IAAI;YAC7B,OAAO;QACR;QAED,MAAM,mBAAmB,MAAM,QAAQ,IAAA,EAAKG,QAAAA;QAC5C,IAAI,kBAAkB;YACpB,IAAA,EAAKH,KAAAA,CAAO,OAAA,CAAQ,KAAK,IAAI;YAC7B,OAAO;QACR;QAED,OAAO;IACR;;;;KAMD,WAAA,CAAaI,KAAAA,EAA+B;QAC1C,MAAM,EAAE,IAAI,GAAA,EAAK,IAAI,GAAA,EAAK,OAAA,EAAS,GAAG,MAAM,GAAG;QAE/C,MAAMC,iBAA4F;YAChG,GAAG,OAAA;YACH,GAAG,IAAA;QACJ;QAED,OAAO,KAAK,SAAA,CACV,OAAO,IAAA,CAAK;YACV,GAAG,OAAA;YACH,GAAG,IAAA;QACJ,EAAC,CACC,IAAA,EAAM,CACN,GAAA,CAAI,CAAA,MAAO,cAAA,CAAe,IAAA,CAAK,CACnC;IACF;AACF;;;GAKD,IAAa,6BAAb,MAAkE;KAChE,UAAA,GAAc,4BAAA;IAEd,QAAQC,GAAAA,EAA4C;QAClD,OAAO,IAAA,EAAKC,QAAAA,EAAW,CAAC,IAAA;IACzB;IAED,QAAQD,GAAAA,EAAaE,KAAAA,EAAgC;QACnD,IAAI;YACF,MAAM,QAAQ,IAAA,EAAKD,QAAAA,EAAW;YAC9B,KAAA,CAAM,IAAA,GAAO;YACb,aAAa,OAAA,CAAQ,IAAA,EAAKE,UAAAA,EAAa,KAAK,SAAA,CAAU,MAAM,CAAC;QAC9D,EAAA,OAAQC,KAAc;YACrB,MAAM,uBACJ,eAAe,gBAAA,CAEd,IAAI,IAAA,KAAS,wBAAwB,IAAI,IAAA,KAAS,4BAAA;YAErD,IAAI,wBAAwB,aAAa,MAAA,GAAS,EAEhD,CAAA,aAAa,UAAA,CAAW,IAAA,EAAKD,UAAAA,CAAY;QAE5C;IACF;IAED,WAAWH,GAAAA,EAAmB;QAC5B,IAAI;YACF,MAAM,QAAQ,IAAA,EAAKC,QAAAA,EAAW;YAC9B,OAAO,KAAA,CAAM,IAAA;YACb,aAAa,OAAA,CAAQ,IAAA,EAAKE,UAAAA,EAAa,KAAK,SAAA,CAAU,MAAM,CAAC;QAC9D,EAAA,OAAO,CAEP;IACF;KAED,QAAA,GAA+C;QAC7C,IAAI;YACF,MAAM,cAAc,aAAa,OAAA,CAAQ,IAAA,EAAKA,UAAAA,CAAY;YAC1D,IAAA,CAAK,YACH,CAAA,OAAO,CAAE;YAEX,OAAO,KAAK,KAAA,CAAM,YAAY;QAC/B,EAAA,OAAO;YACN,OAAO,CAAE;QACV;IACF;IAED,OAAO,cAAuB;QAC5B,OAAA,OAAc,2CAAW,eAAA,CAAA,CAAiB,OAAO,YAAA;IAClD;AACF;;;GAKD,IAAa,yBAAb,MAA8D;KAC5D,KAAA,GAAyC,IAAI,MAAA;KAC7C,OAAA,GAAW,IAAA;IAEX,QAAQH,GAAAA,EAA4C;QAElD,IAAI,IAAA,EAAKN,KAAAA,CAAO,IAAA,GAAO,IAAA,EAAKW,OAAAA,EAAU;YACpC,IAAA,EAAKX,KAAAA,CAAO,KAAA,EAAO;YACnB,OAAA,KAAA;QACD;QAED,OAAO,IAAA,EAAKA,KAAAA,CAAO,GAAA,CAAI,IAAI;IAC5B;IAED,QAAQM,GAAAA,EAAaE,KAAAA,EAAgC;QACnD,IAAA,EAAKR,KAAAA,CAAO,GAAA,CAAI,KAAK,MAAM;IAC5B;IAED,WAAWM,GAAAA,EAAmB;QAC5B,IAAA,EAAKN,KAAAA,CAAO,MAAA,CAAO,IAAI;IACxB;AACF;;;;;GC7GD,SAAS,0BAA0BY,KAAAA,EAAyE;IAC1G,OAAA,OACS,UAAU,YAAY,UAAU,QAAQ,iBAAiB,SAAA,OAAgB,MAAM,WAAA,KAAgB;AAEzG;AA6CD,MAAM,mBAAmB,IAAI,IAAY;IAAC;IAAS;IAAQ;IAAQ;IAAS;CAAQ;AAEpF,MAAMC,iBAAoD;IACxD,cAAc;IACd,eAAe;IAIf,UAAU;AACX;AAED,IAAa,qBAAb,MAAuE;KACrE,MAAA,CAAA;KACA,cAAA,CAAA;KACA,QAAA,GAA+B,CAAE,EAAA;KACjC,MAAA,GAAiC,CAAE,CAAA,CAAA;KACnC,YAAA,GAA+D,KAAA;IAE/D,YAAYC,OAAAA,CAAoC;QAC9C,IAAA,EAAKC,MAAAA,GAAU;YACb,eAAe,QAAQ,aAAA,IAAiB,eAAe,aAAA;YACvD,cAAc,QAAQ,YAAA,IAAgB,eAAe,YAAA;YACrD,kBAAkB,QAAQ,gBAAA,IAAoB;YAC9C,UAAU,QAAQ,QAAA,IAAY;YAC9B,OAAO,QAAQ,KAAA,IAAS;YACxB,UAAU,eAAe,QAAA;QAC1B;QAED,IAAA,CAAK,QAAQ,YAAA,IAAA,OAAuB,2CAAW,YAE7C,CAAA,IAAA,EAAKC,QAAAA,CAAU,YAAA,GAAe;aAE9B,IAAA,EAAKA,QAAAA,CAAU,YAAA,GAAe,QAAQ,YAAA,IAAgB;QAKxD,IAAA,EAAKA,QAAAA,CAAU,GAAA,GAAM,QAAQ,GAAA;QAE7B,IAAA,EAAKA,QAAAA,CAAU,UAAA,GAAa,QAAQ,UAAA;QAEpC,IAAA,EAAKA,QAAAA,CAAU,cAAA,GAAiB,QAAQ,cAAA,IAAkB;QAE1D,MAAM,gBAAY,gMAAA,EAAoB,QAAQ,cAAA,CAAe;QAC7D,IAAI,UACF,CAAA,IAAA,EAAKA,QAAAA,CAAU,YAAA,GAAe,UAAU,YAAA;QAG1C,IAAI,QAAQ,SAAA,CAEV,CAAA,IAAA,EAAKA,QAAAA,CAAU,SAAA,GAAY,QAAQ,SAAA,CAAU,SAAA,CAAU,GAAG,GAAG;QAI/D,MAAM,QAAQ,2BAA2B,WAAA,EAAa,GAClD,IAAI,+BACJ,IAAI;QACR,IAAA,EAAKC,cAAAA,GAAkB,IAAI,wBAAwB;IACpD;IAED,IAAI,YAAqB;QACvB,IAAI,IAAA,EAAKD,QAAAA,CAAU,YAAA,KAAiB,cAClC,CAAA,OAAO;QAKT,IACE,IAAA,EAAKD,MAAAA,CAAQ,QAAA,IAAA,OACL,YAAY,eAAe,QAAQ,GAAA,QAAO,2LAAA,EAAS,QAAQ,GAAA,CAAI,wBAAA,CAAyB,CAEhG,CAAA,OAAO;QAMT,IAAA,OAAW,2CAAW,eAAA,CAAA,CAAiB,QAAQ,WAAW,UACxD,QAAO;;QAGT,OAAO;IACR;IAED,IAAI,UAAmB;QACrB,OACE,IAAA,EAAKA,MAAAA,CAAQ,KAAA,IAAA,OACL,YAAY,eAAe,QAAQ,GAAA,QAAO,2LAAA,EAAS,QAAQ,GAAA,CAAI,qBAAA,CAAsB;IAEhG;IAED,OAAOG,KAAAA,EAAgC;QACrC,IAAI;YACF,MAAM,kBAAkB,IAAA,EAAKC,cAAAA,CAAgB,MAAM,KAAA,EAAO,MAAM,OAAA,CAAQ;YAExE,IAAA,EAAKC,QAAAA,CAAU,gBAAgB,KAAA,EAAO,gBAAgB;YAEtD,IAAA,CAAK,IAAA,EAAKC,YAAAA,CAAc,iBAAiB,MAAM,iBAAA,CAAkB,CAC/D,CAAA;YAGF,IAAA,EAAKC,MAAAA,CAAQ,IAAA,CAAK;gBAAE,MAAM;gBAAS,OAAO;YAAiB,EAAC;YAE5D,IAAA,EAAKC,aAAAA,EAAgB;QACtB,EAAA,OAAQ,OAAO;YACd,QAAQ,KAAA,CAAM,qDAAqD,MAAM;QAC1E;IACF;;;;;IAOD,UAAUC,KAAAA,EAAgC;QACxC,IAAI;YACF,IAAA,CAAK,IAAA,EAAKC,eAAAA,CAAiB,MAAM,CAC/B,CAAA;YAGF,MAAM,eAAA,OAAsB,OAAO,UAAU,YAAY,iBAAiB,GAAA,CAAI,MAAM,KAAA,CAAM;YAC1F,MAAM,iBAAA,OAAwB,OAAO,YAAY,YAAY,MAAM,OAAA,CAAQ,IAAA,EAAM,CAAC,MAAA,GAAS;YAE3F,IAAIC,sBAAmC;YACvC,MAAMC,iBAA2B,OAA8C;YAC/E,IAAA,OAAW,mBAAmB,YAAA,OAAmB,mBAAmB,UAAU;gBAC5E,MAAM,YAAY,IAAI,KAAK;gBAC3B,IAAA,CAAK,OAAO,KAAA,CAAM,UAAU,OAAA,EAAS,CAAC,CACpC,CAAA,sBAAsB;YAEzB;YAED,IAAA,CAAK,gBAAA,CAAiB,kBAAkB,wBAAwB,MAAM;gBACpE,IAAI,IAAA,CAAK,OAAA,IAAA,OAAkB,YAAY,YACrC,CAAA,QAAQ,IAAA,CAAK,0DAA0D;oBACrE;oBACA;oBACA,kBAAkB,wBAAwB;gBAC3C,EAAC;gBAEJ;YACD;YAED,MAAM,cAAc,IAAA,EAAKC,cAAAA,EAAiB;YAE1C,MAAMC,UAA4B;gBAChC,KAAK,YAAY,IAAA;gBACjB,MAAM,YAAY,OAAA;gBAClB,IAAI,IAAA,EAAKb,QAAAA,CAAU,YAAA,IAAgB;gBACnC,KAAK,MAAM,KAAA;gBACX,KAAK,MAAM,OAAA;gBACX,IAAI,oBAAoB,WAAA,EAAa;gBACrC,IAAI,IAAA,EAAKA,QAAAA,CAAU,cAAA,IAAkB;gBACrC,SAAS,IAAA,EAAKc,eAAAA,CAAiB,MAAM,OAAA,CAAQ;YAC9C;YAED,IAAA,EAAKR,MAAAA,CAAQ,IAAA,CAAK;gBAAE,MAAM;gBAAO,OAAO;YAAS,EAAC;YAElD,IAAA,EAAKC,aAAAA,EAAgB;QACtB,EAAA,OAAQ,OAAO;YACd,QAAQ,KAAA,CAAM,yDAAyD,MAAM;QAC9E;IACF;KAED,YAAA,CAAcQ,eAAAA,EAAiCC,iBAAAA,EAA4B;QACzE,OAAO,IAAA,CAAK,SAAA,IAAA,CAAc,IAAA,CAAK,OAAA,IAAW,IAAA,EAAKC,eAAAA,CAAiB,iBAAiB,kBAAkB;IACpG;KAED,eAAA,CAAiBC,MAAAA,EAAoC;QAEnD,OAAO;IACR;KAED,eAAA,CAAiBH,eAAAA,EAAiCC,iBAAAA,EAA4B;QAC5E,MAAM,aAAa,KAAK,MAAA,EAAQ;QAEhC,MAAM,cACJ,cAAc,IAAA,EAAKjB,MAAAA,CAAQ,YAAA,IAAA,CAC1B,IAAA,EAAKA,MAAAA,CAAQ,gBAAA,KAAqB,SAAA,OAC1B,sBAAsB,eAC7B,cAAc,iBAAA;QAElB,IAAA,CAAK,YACH,CAAA,OAAO;QAGT,OAAA,CAAQ,IAAA,EAAKE,cAAAA,CAAgB,gBAAA,CAAiB,gBAAgB;IAC/D;KAED,aAAA,GAAuB;QAErB,WAAW,WAAW,kBAAa;YACjC,IAAA,EAAKkB,KAAAA,EAAQ;YACb;QACD;;;QACD,MAAM,eAAe,KAAKb,QAAQ,UAAU,KAAKP,QAAQ;IAgC1D;KAED,KAAA,GAAe;QAEb,MAAM,cAAc,CAAC;eAAG,IAAA,EAAKO,MAAQ;SAAA;QACrC,IAAA,EAAKA,MAAAA,GAAU,CAAE,CAAA;QAEjB,IAAA,EAAKc,YAAAA,GAAgB;QAErB,IAAI,YAAY,MAAA,KAAW,EACzB,CAAA;QAGF,MAAM,eAAe,YAClB,MAAA,CAAO,CAAA,OAAQ,KAAK,IAAA,KAAS,QAAQ,CACrC,GAAA,CAAI,CAAA,OAAS,KAAkD,KAAA,CAAM;QAExE,MAAM,aAAa,YAChB,MAAA,CAAO,CAAA,OAAQ,KAAK,IAAA,KAAS,MAAM,CACnC,GAAA,CAAI,CAAA,OAAS,KAAkD,KAAA,CAAM;QAExE,IAAI,aAAa,MAAA,GAAS,GAAG;YAC3B,MAAM,YAAY,IAAI,IAAI,aAAa,IAAA,EAAKrB,MAAAA,CAAQ,QAAA;YACpD,MAAM,WAAW;gBACf,SAAS;oBACP,gBAAgB;gBACjB;gBACD,WAAW;gBACX,QAAQ;gBAER,MAAM,KAAK,SAAA,CAAU;oBAAE,QAAQ;gBAAc,EAAC;YAC/C,EAAC,CAAC,KAAA,CAAM,IAAA,KAAW,EAAE;QACvB;QAED,IAAI,WAAW,MAAA,GAAS,GAAG;YACzB,MAAM,UAAU,IAAI,IAAI,YAAY,IAAA,EAAKA,MAAAA,CAAQ,QAAA;YACjD,MAAM,SAAS;gBACb,SAAS;oBACP,gBAAgB;gBACjB;gBACD,WAAW;gBACX,QAAQ;gBACR,MAAM,KAAK,SAAA,CAAU;oBAAE,MAAM;gBAAY,EAAC;YAC3C,EAAC,CAAC,KAAA,CAAM,IAAA,KAAW,EAAE;QACvB;IACF;;;KAKD,QAAA,CAAUsB,KAAAA,EAAgCC,OAAAA,EAA8B;QACtE,IAAA,CAAK,IAAA,CAAK,OAAA,CACR,CAAA;QAGF,IAAA,OAAW,QAAQ,cAAA,KAAmB,aAAa;YACjD,QAAQ,cAAA,CAAe,qBAAqB,MAAM;YAClD,QAAQ,GAAA,CAAI,QAAQ;YACpB,QAAQ,QAAA,EAAU;QACnB,MACC,CAAA,QAAQ,GAAA,CAAI,qBAAqB,OAAO,QAAQ;IAEnD;;;;;KAOD,cAAA,GAAkB;QAChB,MAAM,cAAc;YAClB,MAAM,IAAA,EAAKtB,QAAAA,CAAU,GAAA;YACrB,SAAS,IAAA,EAAKA,QAAAA,CAAU,UAAA;QACzB;QAED,WAAW,WAAW,aAAa;;QAmBnC,OAAO;IACR;;;KAKD,cAAA,CAAgBqB,KAAAA,EAAgCE,OAAAA,EAAoD;QAClG,MAAM,cAAc,IAAA,EAAKX,cAAAA,EAAiB;QAE1C,OAAO;YACL;YACA,IAAI,IAAA,EAAKZ,QAAAA,CAAU,YAAA,IAAgB;YACnC,IAAI,IAAA,EAAKA,QAAAA,CAAU,YAAA,IAAgB;YACnC,KAAK,YAAY,IAAA;YACjB,MAAM,YAAY,OAAA;YAClB,GAAI,IAAA,EAAKA,QAAAA,CAAU,cAAA,GAAiB;gBAAE,IAAI,IAAA,EAAKA,QAAAA,CAAU,cAAA;YAAgB,IAAG,CAAE,CAAA;YAC9E,GAAI,IAAA,EAAKA,QAAAA,CAAU,SAAA,GAAY;gBAAE,IAAI,IAAA,EAAKA,QAAAA,CAAU,SAAA;YAAW,IAAG,CAAE,CAAA;YACpE;QACD;IACF;;;;KAMD,eAAA,CAAiBwB,OAAAA,EAAkD;QACjE,IAAI,YAAY,QAAA,OAAe,YAAY,YACzC,CAAA,OAAO;QAET,IAAA,OAAW,YAAY,SACrB,CAAA,OAAO;QAET,IAAI;YACF,MAAM,UAAU,KAAK,KAAA,CAAM,KAAK,SAAA,CAAU,QAAQ,CAAC;YACnD,IAAI,WAAA,OAAkB,YAAY,YAAA,CAAa,MAAM,OAAA,CAAQ,QAAQ,CACnE,CAAA,OAAO;YAET,OAAO;QACR,EAAA,OAAO;YACN,OAAO;QACR;IACF;AACF;;;AClcD,MAAM,0BAA0B;AAChC,MAAM,yBAAyB;AAC/B,MAAMC,wBAAsB;mEAG5B,MAAM,kBAAkB,IAAI,IAAY;IAAC;IAAU,QAAS;CAAA;;;;;;GAQ5D,SAAS,gCAAgCC,SAAAA,EAA2B;IAClE,OAAO,gBAAgB,GAAA,CAAI,UAAU,GAAG,IAAID;AAC7C;;;;;GAoBD,SAAS,6BAA6BE,KAAAA,EAAuE;IAC3G,OAAO,SACLD,SAAAA,EACAE,KAAAA,EACAC,iBAAAA,EAC2C;QAC3C,OAAO;YACL;YACA,mBACE,UAAU,0BAA0B,gCAAgC,UAAU,GAAGJ;YACnF,SAAS;gBACP;gBACA,gBAAgB,QAAQ,OAAO,WAAW;gBAC1C,WAAW,QAAQ,OAAO,YAAY,UAAU;gBAChD,UAAU,QAAQ,OAAO,YAAY,SAAS;gBAC9C,WAAW,QAAQ,OAAO,YAAY,UAAU;gBAChD,GAAG,iBAAA;YACJ;QACF;IACF;AACF;;;;;;;;;GAWD,SAAgB,8BACdC,SAAAA,EACAE,KAAAA,EACAC,iBAAAA,EAC2C;IAC3C,OAAO,6BAA6B,wBAAwB,CAAC,WAAW,OAAO,kBAAkB;AAClG;;;;;;;;;GAWD,SAAgB,6BACdH,SAAAA,EACAE,KAAAA,EACAC,iBAAAA,EAC2C;IAC3C,OAAO,6BAA6B,uBAAuB,CAAC,WAAW,OAAO,kBAAkB;AACjG;;;;;;;;;;GAYD,SAAgB,sBACdH,SAAAA,EACAI,QAAsC,CAAE,CAAA,EACE;IAC1C,OAAO;QACL,OAAO;QACP,mBAAmB,gCAAgC,UAAU;QAC7D,SAAS;YACP;YACA,GAAG,KAAA;QACJ;IACF;AACF;;;ACjHD,MAAM,sBAAsB;AAC5B,MAAMC,wBAAsB;;;GAS5B,SAAgB,kBACdC,MAAAA,EACAC,OAAAA,EACsC;IACtC,OAAO;QACL,OAAO;QACP,mBAAmBF;QACnB,SAAS;YACP;YACA,GAAG,OAAA;QACJ;IACF;AACF;;;ACtBD,MAAM,2BAA2B;AACjC,MAAMG,wBAAsB;;;GAO5B,SAAgB,uBAAuBC,OAAAA,EAA4E;IACjH,OAAO;QACL,OAAO;QACP,mBAAmBD;QACnB;IACD;AACF;;;ACdD,MAAa,oBAAoB;AACjC,MAAa,sBAAsB;;;;;;;GAgBnC,SAAgB,gBAAgBE,UAAAA,EAA6D;IAC3F,MAAM,UAAU,kBAAkB,WAAW;IAE7C,OAAO;QACL,OAAO;QACP,mBAAmB;QACnB;IACD;AACF;;;;;GAOD,SAAS,kBAAkBA,UAAAA,EAA0C;IACnE,IAAA,CAAK,cAAA,OAAqB,eAAe,SACvC,CAAA,OAAO,CAAE;IAIX,MAAM,gBAAgB,WAAW,KAAA,IAAS,WAAW,SAAA;IAErD,IAAA,CAAK,cACH,CAAA,OAAO,CAAE;IAGX,IAAIC;IAEJ,IAAI,MAAM,OAAA,CAAQ,cAAc,CAE9B,CAAA,KAAK,MAAM,SAAS,cAAe;QACjC,MAAM,OAAO,iBAAiB,MAAM;QACpC,IAAI,MAAM;YACR,YAAY;YACZ;QACD;IACF;SAED,YAAY,iBAAiB,cAAc;IAG7C,OAAO;QAAE;IAAW;AACrB;;;;;GAOD,SAAS,iBAAiBC,KAAAA,EAAsC;IAC9D,IAAA,OAAW,UAAU,SACnB,CAAA,OAAO;IAGT,IAAA,OAAW,UAAU,YAAY,UAAU,MAEzC;YAAI,UAAU,SAAA,OAAgB,MAAM,IAAA,KAAS,SAC3C,CAAA,OAAO,MAAM,IAAA;IACd;IAGH,OAAA,KAAA;AACD","debugId":null}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/shared/dist/runtime/telemetry.mjs"],"sourcesContent":["import \"./constants-ByUssRbE.mjs\";\nimport \"./isomorphicAtob-DybBXGFR.mjs\";\nimport \"./isomorphicBtoa-Dr7WubZv.mjs\";\nimport \"./keys-Dcilj3cS.mjs\";\nimport \"./underscore-DjQrhefX.mjs\";\nimport { EVENT_SAMPLING_RATE, EVENT_THEME_USAGE, TelemetryCollector, eventComponentMounted, eventFrameworkMetadata, eventMethodCalled, eventPrebuiltComponentMounted, eventPrebuiltComponentOpened, eventThemeUsage } from \"./telemetry-x9LpQpc1.mjs\";\n\nexport { EVENT_SAMPLING_RATE, EVENT_THEME_USAGE, TelemetryCollector, eventComponentMounted, eventFrameworkMetadata, eventMethodCalled, eventPrebuiltComponentMounted, eventPrebuiltComponentOpened, eventThemeUsage };"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/backend/src/index.ts"],"sourcesContent":["import type { TelemetryCollectorOptions } from '@clerk/shared/telemetry';\nimport { TelemetryCollector } from '@clerk/shared/telemetry';\nimport type { SDKMetadata } from '@clerk/types';\n\nimport type { ApiClient, CreateBackendApiOptions } from './api';\nimport { createBackendApiClient } from './api';\nimport { withLegacyReturn } from './jwt/legacyReturn';\nimport type { CreateAuthenticateRequestOptions } from './tokens/factory';\nimport { createAuthenticateRequest } from './tokens/factory';\nimport { verifyToken as _verifyToken } from './tokens/verify';\n\nexport const verifyToken = withLegacyReturn(_verifyToken);\n\nexport type ClerkOptions = Omit<CreateBackendApiOptions, 'skipApiVersionInUrl' | 'useMachineSecretKey'> &\n  Partial<\n    Pick<\n      CreateAuthenticateRequestOptions['options'],\n      'audience' | 'jwtKey' | 'proxyUrl' | 'secretKey' | 'publishableKey' | 'domain' | 'isSatellite'\n    >\n  > & { sdkMetadata?: SDKMetadata; telemetry?: Pick<TelemetryCollectorOptions, 'disabled' | 'debug' | 'samplingRate'> };\n\n// The current exported type resolves the following issue in packages importing createClerkClient\n// TS4023: Exported variable 'clerkClient' has or is using name 'AuthErrorReason' from external module \"/packages/backend/dist/index\" but cannot be named.\nexport type ClerkClient = {\n  telemetry: TelemetryCollector;\n} & ApiClient &\n  ReturnType<typeof createAuthenticateRequest>;\n\nexport function createClerkClient(options: ClerkOptions): ClerkClient {\n  const opts = { ...options };\n  const apiClient = createBackendApiClient(opts);\n  const requestState = createAuthenticateRequest({ options: opts, apiClient });\n  const telemetry = new TelemetryCollector({\n    publishableKey: opts.publishableKey,\n    secretKey: opts.secretKey,\n    samplingRate: 0.1,\n    ...(opts.sdkMetadata ? { sdk: opts.sdkMetadata.name, sdkVersion: opts.sdkMetadata.version } : {}),\n    ...(opts.telemetry || {}),\n  });\n\n  return {\n    ...apiClient,\n    ...requestState,\n    telemetry,\n  };\n}\n\n/**\n * General Types\n */\nexport type { OrganizationMembershipRole } from './api/resources';\nexport type { VerifyTokenOptions } from './tokens/verify';\n/**\n * JSON types\n */\nexport type {\n  ActorTokenJSON,\n  AccountlessApplicationJSON,\n  ClerkResourceJSON,\n  TokenJSON,\n  AllowlistIdentifierJSON,\n  BlocklistIdentifierJSON,\n  ClientJSON,\n  CnameTargetJSON,\n  DomainJSON,\n  EmailJSON,\n  EmailAddressJSON,\n  ExternalAccountJSON,\n  IdentificationLinkJSON,\n  InstanceJSON,\n  InstanceRestrictionsJSON,\n  InstanceSettingsJSON,\n  InvitationJSON,\n  JwtTemplateJSON,\n  OauthAccessTokenJSON,\n  OAuthApplicationJSON,\n  OrganizationJSON,\n  OrganizationDomainJSON,\n  OrganizationDomainVerificationJSON,\n  OrganizationInvitationJSON,\n  OrganizationSettingsJSON,\n  PublicOrganizationDataJSON,\n  OrganizationMembershipJSON,\n  OrganizationMembershipPublicUserDataJSON,\n  PhoneNumberJSON,\n  ProxyCheckJSON,\n  RedirectUrlJSON,\n  SessionJSON,\n  SignInJSON,\n  SignInTokenJSON,\n  SignUpJSON,\n  SignUpVerificationJSON,\n  SignUpVerificationsJSON,\n  SMSMessageJSON,\n  UserJSON,\n  VerificationJSON,\n  WaitlistEntryJSON,\n  Web3WalletJSON,\n  DeletedObjectJSON,\n  PaginatedResponseJSON,\n  TestingTokenJSON,\n  WebhooksSvixJSON,\n  BillingPlanJSON,\n  BillingSubscriptionJSON,\n  BillingSubscriptionItemJSON,\n} from './api/resources/JSON';\n\n/**\n * Resources\n */\nexport type {\n  APIKey,\n  ActorToken,\n  AccountlessApplication,\n  AllowlistIdentifier,\n  BlocklistIdentifier,\n  Client,\n  CnameTarget,\n  Domain,\n  EmailAddress,\n  ExternalAccount,\n  Feature,\n  Instance,\n  InstanceRestrictions,\n  InstanceSettings,\n  Invitation,\n  JwtTemplate,\n  Machine,\n  M2MToken,\n  OauthAccessToken,\n  OAuthApplication,\n  Organization,\n  OrganizationDomain,\n  OrganizationDomainVerification,\n  OrganizationInvitation,\n  OrganizationMembership,\n  OrganizationMembershipPublicUserData,\n  OrganizationSettings,\n  PhoneNumber,\n  SamlConnection,\n  Session,\n  SignInToken,\n  SignUpAttempt,\n  SMSMessage,\n  Token,\n  User,\n  TestingToken,\n  BillingPlan,\n  BillingSubscription,\n  BillingSubscriptionItem,\n} from './api/resources';\n\n/**\n * Webhooks event types\n */\nexport type {\n  EmailWebhookEvent,\n  OrganizationWebhookEvent,\n  OrganizationDomainWebhookEvent,\n  OrganizationInvitationWebhookEvent,\n  OrganizationMembershipWebhookEvent,\n  RoleWebhookEvent,\n  PermissionWebhookEvent,\n  SessionWebhookEvent,\n  SMSWebhookEvent,\n  UserWebhookEvent,\n  WaitlistEntryWebhookEvent,\n  WebhookEvent,\n  WebhookEventType,\n  BillingPaymentAttemptWebhookEvent,\n  BillingSubscriptionWebhookEvent,\n  BillingSubscriptionItemWebhookEvent,\n} from './api/resources/Webhooks';\n\n/**\n * Auth objects\n */\nexport type { AuthObject, InvalidTokenAuthObject } from './tokens/authObjects';\nexport type { SessionAuthObject, MachineAuthObject } from './tokens/types';\n"],"names":["verifyToken"],"mappings":";;;;;;;;;;;;;;AACA,SAAS,0BAA0B;;;;;;;;AAU5B,IAAMA,mBAAc,oLAAA,EAAiB,+LAAY;AAiBjD,SAAS,kBAAkB,OAAA,EAAoC;IACpE,MAAM,OAAO;QAAE,GAAG,OAAA;IAAQ;IAC1B,MAAM,gBAAY,0MAAA,EAAuB,IAAI;IAC7C,MAAM,mBAAe,6MAAA,EAA0B;QAAE,SAAS;QAAM;IAAU,CAAC;IAC3E,MAAM,YAAY,IAAI,oMAAA,CAAmB;QACvC,gBAAgB,KAAK,cAAA;QACrB,WAAW,KAAK,SAAA;QAChB,cAAc;QACd,GAAI,KAAK,WAAA,GAAc;YAAE,KAAK,KAAK,WAAA,CAAY,IAAA;YAAM,YAAY,KAAK,WAAA,CAAY,OAAA;QAAQ,IAAI,CAAC,CAAA;QAC/F,GAAI,KAAK,SAAA,IAAa,CAAC,CAAA;IACzB,CAAC;IAED,OAAO;QACL,GAAG,SAAA;QACH,GAAG,YAAA;QACH;IACF;AACF","debugId":null}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/nextjs/src/server/createClerkClient.ts"],"sourcesContent":["import { createClerkClient } from '@clerk/backend';\n\nimport {\n  API_URL,\n  API_VERSION,\n  DOMAIN,\n  IS_SATELLITE,\n  MACHINE_SECRET_KEY,\n  PROXY_URL,\n  PUBLISHABLE_KEY,\n  SDK_METADATA,\n  SECRET_KEY,\n  TELEMETRY_DEBUG,\n  TELEMETRY_DISABLED,\n} from './constants';\n\nconst clerkClientDefaultOptions = {\n  secretKey: SECRET_KEY,\n  publishableKey: PUBLISHABLE_KEY,\n  apiUrl: API_URL,\n  apiVersion: API_VERSION,\n  userAgent: `${PACKAGE_NAME}@${PACKAGE_VERSION}`,\n  proxyUrl: PROXY_URL,\n  domain: DOMAIN,\n  isSatellite: IS_SATELLITE,\n  machineSecretKey: MACHINE_SECRET_KEY,\n  sdkMetadata: SDK_METADATA,\n  telemetry: {\n    disabled: TELEMETRY_DISABLED,\n    debug: TELEMETRY_DEBUG,\n  },\n};\n\nexport const createClerkClientWithOptions: typeof createClerkClient = options =>\n  createClerkClient({ ...clerkClientDefaultOptions, ...options });\n"],"names":[],"mappings":";;;;AAAA,SAAS,yBAAyB;AAElC;;;;AAcA,MAAM,4BAA4B;IAChC,WAAW,qLAAA;IACX,gBAAgB,0LAAA;IAChB,QAAQ,kLAAA;IACR,YAAY,sLAAA;IACZ,WAAW,GAAG,eAAY,CAAA,CAAA,EAAI,QAAe,EAAA;IAC7C,UAAU,oLAAA;IACV,QAAQ,iLAAA;IACR,aAAa,uLAAA;IACb,kBAAkB,6LAAA;IAClB,aAAa,uLAAA;IACb,WAAW;QACT,UAAU,6LAAA;QACV,OAAO,0LAAA;IACT;AACF;AAEO,MAAM,+BAAyD,CAAA,cACpE,yKAAA,EAAkB;QAAE,GAAG,yBAAA;QAA2B,GAAG,OAAA;IAAQ,CAAC","debugId":null}},
    {"offset": {"line": 664, "column": 0}, "map": {"version":3,"sources":[],"sourcesContent":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/nextjs/src/runtime/node/safe-node-apis.js"],"sourcesContent":["/**\n * This file is used for conditional imports to mitigate bundling issues with Next.js server actions on version prior to 14.1.0.\n */\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nconst { existsSync, writeFileSync, readFileSync, appendFileSync, mkdirSync, rmSync } = require('node:fs');\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nconst path = require('node:path');\nconst fs = {\n  existsSync,\n  writeFileSync,\n  readFileSync,\n  appendFileSync,\n  mkdirSync,\n  rmSync,\n};\n\nconst cwd = () => process.cwd();\n\nmodule.exports = { fs, path, cwd };\n"],"names":[],"mappings":";;;;;;AAAA,IAAA,yBAAA,IAAA,mLAAA,EAAA;IAAA,sCAAA,OAAA,EAAA,MAAA;QAIA,MAAM,EAAE,UAAA,EAAY,aAAA,EAAe,YAAA,EAAc,cAAA,EAAgB,SAAA,EAAW,MAAA,CAAO,CAAA,GAAI,QAAQ,SAAS;QAExG,MAAM,OAAO,QAAQ,WAAW;QAChC,MAAM,KAAK;YACT;YACA;YACA;YACA;YACA;YACA;QACF;QAEA,MAAM,MAAM,IAAM,QAAQ,GAAA,CAAI;QAE9B,OAAO,OAAA,GAAU;YAAE;YAAI;YAAM;QAAI;IAAA;AAAA","debugId":null}},
    {"offset": {"line": 712, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/nextjs/src/server/fs/utils.ts"],"sourcesContent":["/**\n * Attention: Only import this module when the node runtime is used.\n * We are using conditional imports to mitigate bundling issues with Next.js server actions on version prior to 14.1.0.\n */\nimport nodeRuntime from '#safe-node-apis';\n\n// Generic assertion function that acts as a proper type guard\nfunction assertNotNullable<T>(value: T, moduleName: string): asserts value is NonNullable<T> {\n  if (!value) {\n    throw new Error(`Clerk: ${moduleName} is missing. This is an internal error. Please contact Clerk's support.`);\n  }\n}\n\nconst nodeFsOrThrow = (): NonNullable<typeof nodeRuntime.fs> => {\n  assertNotNullable(nodeRuntime.fs, 'fs');\n  return nodeRuntime.fs;\n};\n\nconst nodePathOrThrow = (): NonNullable<typeof nodeRuntime.path> => {\n  assertNotNullable(nodeRuntime.path, 'path');\n  return nodeRuntime.path;\n};\n\nconst nodeCwdOrThrow = (): NonNullable<typeof nodeRuntime.cwd> => {\n  assertNotNullable(nodeRuntime.cwd, 'cwd');\n  return nodeRuntime.cwd;\n};\n\nexport { nodeCwdOrThrow, nodeFsOrThrow, nodePathOrThrow };\n"],"names":[],"mappings":";;;;;;;;AAIA,OAAO,iBAAiB;;;AAGxB,SAAS,kBAAqB,KAAA,EAAU,UAAA,EAAqD;IAC3F,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM,CAAA,OAAA,EAAU,UAAU,CAAA,uEAAA,CAAyE;IAC/G;AACF;AAEA,MAAM,gBAAgB,MAA0C;IAC9D,kBAAkB,sMAAA,CAAY,EAAA,EAAI,IAAI;IACtC,OAAO,sMAAA,CAAY,EAAA;AACrB;AAEA,MAAM,kBAAkB,MAA4C;IAClE,kBAAkB,sMAAA,CAAY,IAAA,EAAM,MAAM;IAC1C,OAAO,sMAAA,CAAY,IAAA;AACrB;AAEA,MAAM,iBAAiB,MAA2C;IAChE,kBAAkB,sMAAA,CAAY,GAAA,EAAK,KAAK;IACxC,OAAO,sMAAA,CAAY,GAAA;AACrB","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/nextjs/src/server/keyless-custom-headers.ts"],"sourcesContent":["'use server';\n\nimport { headers } from 'next/headers';\n\ninterface MetadataHeaders {\n  nodeVersion?: string;\n  nextVersion?: string;\n  npmConfigUserAgent?: string;\n  userAgent: string;\n  port?: string;\n  host: string;\n  xHost: string;\n  xPort: string;\n  xProtocol: string;\n  xClerkAuthStatus: string;\n  isCI: boolean;\n}\n\n/**\n * Collects metadata from the environment and request headers\n */\nexport async function collectKeylessMetadata(): Promise<MetadataHeaders> {\n  const headerStore = await headers(); // eslint-disable-line\n\n  return {\n    nodeVersion: process.version,\n    nextVersion: getNextVersion(),\n    npmConfigUserAgent: process.env.npm_config_user_agent, // eslint-disable-line\n    userAgent: headerStore.get('User-Agent') ?? 'unknown user-agent',\n    port: process.env.PORT, // eslint-disable-line\n    host: headerStore.get('host') ?? 'unknown host',\n    xPort: headerStore.get('x-forwarded-port') ?? 'unknown x-forwarded-port',\n    xHost: headerStore.get('x-forwarded-host') ?? 'unknown x-forwarded-host',\n    xProtocol: headerStore.get('x-forwarded-proto') ?? 'unknown x-forwarded-proto',\n    xClerkAuthStatus: headerStore.get('x-clerk-auth-status') ?? 'unknown x-clerk-auth-status',\n    isCI: detectCIEnvironment(),\n  };\n}\n\n// Common CI environment variables\nconst CI_ENV_VARS = [\n  'CI',\n  'CONTINUOUS_INTEGRATION',\n  'BUILD_NUMBER',\n  'BUILD_ID',\n  'BUILDKITE',\n  'CIRCLECI',\n  'GITHUB_ACTIONS',\n  'GITLAB_CI',\n  'JENKINS_URL',\n  'TRAVIS',\n  'APPVEYOR',\n  'WERCKER',\n  'DRONE',\n  'CODESHIP',\n  'SEMAPHORE',\n  'SHIPPABLE',\n  'TEAMCITY_VERSION',\n  'BAMBOO_BUILDKEY',\n  'GO_PIPELINE_NAME',\n  'TF_BUILD',\n  'SYSTEM_TEAMFOUNDATIONCOLLECTIONURI',\n  'BITBUCKET_BUILD_NUMBER',\n  'HEROKU_TEST_RUN_ID',\n  'VERCEL',\n  'NETLIFY',\n];\n\n/**\n * Detects if the application is running in a CI environment\n */\nfunction detectCIEnvironment(): boolean {\n  const ciIndicators = CI_ENV_VARS;\n\n  const falsyValues = new Set<string>(['', 'false', '0', 'no']);\n\n  return ciIndicators.some(indicator => {\n    const value = process.env[indicator];\n    if (value === undefined) {\n      return false;\n    }\n\n    const normalizedValue = value.trim().toLowerCase();\n    return !falsyValues.has(normalizedValue);\n  });\n}\n\n/**\n * Extracts Next.js version from process title\n */\nfunction getNextVersion(): string | undefined {\n  try {\n    return process.title ?? 'unknown-process-title'; // 'next-server (v15.4.5)'\n  } catch {\n    return undefined;\n  }\n}\n\n/**\n * Converts metadata to HTTP headers\n */\nexport function formatMetadataHeaders(metadata: MetadataHeaders): Headers {\n  const headers = new Headers();\n\n  if (metadata.nodeVersion) {\n    headers.set('Clerk-Node-Version', metadata.nodeVersion);\n  }\n\n  if (metadata.nextVersion) {\n    headers.set('Clerk-Next-Version', metadata.nextVersion);\n  }\n\n  if (metadata.npmConfigUserAgent) {\n    headers.set('Clerk-NPM-Config-User-Agent', metadata.npmConfigUserAgent);\n  }\n\n  if (metadata.userAgent) {\n    headers.set('Clerk-Client-User-Agent', metadata.userAgent);\n  }\n\n  if (metadata.port) {\n    headers.set('Clerk-Node-Port', metadata.port);\n  }\n\n  if (metadata.host) {\n    headers.set('Clerk-Client-Host', metadata.host);\n  }\n\n  if (metadata.xPort) {\n    headers.set('Clerk-X-Port', metadata.xPort);\n  }\n\n  if (metadata.xHost) {\n    headers.set('Clerk-X-Host', metadata.xHost);\n  }\n\n  if (metadata.xProtocol) {\n    headers.set('Clerk-X-Protocol', metadata.xProtocol);\n  }\n\n  if (metadata.xClerkAuthStatus) {\n    headers.set('Clerk-Auth-Status', metadata.xClerkAuthStatus);\n  }\n\n  if (metadata.isCI) {\n    headers.set('Clerk-Is-CI', 'true');\n  }\n\n  return headers;\n}\n"],"names":["headers"],"mappings":"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","debugId":null}},
    {"offset": {"line": 881, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/node_modules/%40clerk/nextjs/src/server/keyless-node.ts"],"sourcesContent":["import type { AccountlessApplication } from '@clerk/backend';\n\nimport { createClerkClientWithOptions } from './createClerkClient';\nimport { nodeCwdOrThrow, nodeFsOrThrow, nodePathOrThrow } from './fs/utils';\nimport { collectKeylessMetadata, formatMetadataHeaders } from './keyless-custom-headers';\n\n/**\n * The Clerk-specific directory name.\n */\nconst CLERK_HIDDEN = '.clerk';\n\n/**\n * The Clerk-specific lock file that is used to mitigate multiple key creation.\n * This is automatically cleaned up.\n */\nconst CLERK_LOCK = 'clerk.lock';\n\n/**\n * The `.clerk/` directory is NOT safe to be committed as it may include sensitive information about a Clerk instance.\n * It may include an instance's secret key and the secret token for claiming that instance.\n */\nfunction updateGitignore() {\n  const { existsSync, writeFileSync, readFileSync, appendFileSync } = nodeFsOrThrow();\n\n  const path = nodePathOrThrow();\n  const cwd = nodeCwdOrThrow();\n  const gitignorePath = path.join(cwd(), '.gitignore');\n  if (!existsSync(gitignorePath)) {\n    writeFileSync(gitignorePath, '');\n  }\n\n  // Check if `.clerk/` entry exists in .gitignore\n  const gitignoreContent = readFileSync(gitignorePath, 'utf-8');\n  const COMMENT = `# clerk configuration (can include secrets)`;\n  if (!gitignoreContent.includes(CLERK_HIDDEN + '/')) {\n    appendFileSync(gitignorePath, `\\n${COMMENT}\\n/${CLERK_HIDDEN}/\\n`);\n  }\n}\n\nconst generatePath = (...slugs: string[]) => {\n  const path = nodePathOrThrow();\n  const cwd = nodeCwdOrThrow();\n  return path.join(cwd(), CLERK_HIDDEN, ...slugs);\n};\n\nconst _TEMP_DIR_NAME = '.tmp';\nconst getKeylessConfigurationPath = () => generatePath(_TEMP_DIR_NAME, 'keyless.json');\nconst getKeylessReadMePath = () => generatePath(_TEMP_DIR_NAME, 'README.md');\n\nlet isCreatingFile = false;\n\nexport function safeParseClerkFile(): AccountlessApplication | undefined {\n  const { readFileSync } = nodeFsOrThrow();\n  try {\n    const CONFIG_PATH = getKeylessConfigurationPath();\n    let fileAsString;\n    try {\n      fileAsString = readFileSync(CONFIG_PATH, { encoding: 'utf-8' }) || '{}';\n    } catch {\n      fileAsString = '{}';\n    }\n    return JSON.parse(fileAsString) as AccountlessApplication;\n  } catch {\n    return undefined;\n  }\n}\n\n/**\n * Using both an in-memory and file system lock seems to be the most effective solution.\n */\nconst lockFileWriting = () => {\n  const { writeFileSync } = nodeFsOrThrow();\n\n  isCreatingFile = true;\n\n  writeFileSync(\n    CLERK_LOCK,\n    // In the rare case, the file persists give the developer enough context.\n    'This file can be deleted. Please delete this file and refresh your application',\n    {\n      encoding: 'utf8',\n      mode: '0777',\n      flag: 'w',\n    },\n  );\n};\n\nconst unlockFileWriting = () => {\n  const { rmSync } = nodeFsOrThrow();\n\n  try {\n    rmSync(CLERK_LOCK, { force: true, recursive: true });\n  } catch {\n    // Simply ignore if the removal of the directory/file fails\n  }\n\n  isCreatingFile = false;\n};\n\nconst isFileWritingLocked = () => {\n  const { existsSync } = nodeFsOrThrow();\n  return isCreatingFile || existsSync(CLERK_LOCK);\n};\n\nasync function createOrReadKeyless(): Promise<AccountlessApplication | null> {\n  const { writeFileSync, mkdirSync } = nodeFsOrThrow();\n\n  /**\n   * If another request is already in the process of acquiring keys return early.\n   * Using both an in-memory and file system lock seems to be the most effective solution.\n   */\n  if (isFileWritingLocked()) {\n    return null;\n  }\n\n  lockFileWriting();\n\n  const CONFIG_PATH = getKeylessConfigurationPath();\n  const README_PATH = getKeylessReadMePath();\n\n  mkdirSync(generatePath(_TEMP_DIR_NAME), { recursive: true });\n  updateGitignore();\n\n  /**\n   * When the configuration file exists, always read the keys from the file\n   */\n  const envVarsMap = safeParseClerkFile();\n  if (envVarsMap?.publishableKey && envVarsMap?.secretKey) {\n    unlockFileWriting();\n\n    return envVarsMap;\n  }\n\n  /**\n   * At this step, it is safe to create new keys and store them.\n   */\n  const client = createClerkClientWithOptions({});\n\n  // Collect metadata\n  const keylessHeaders = await collectKeylessMetadata()\n    .then(formatMetadataHeaders)\n    .catch(() => new Headers());\n\n  const accountlessApplication = await client.__experimental_accountlessApplications\n    .createAccountlessApplication({ requestHeaders: keylessHeaders })\n    .catch(() => null);\n\n  if (accountlessApplication) {\n    writeFileSync(CONFIG_PATH, JSON.stringify(accountlessApplication), {\n      encoding: 'utf8',\n      mode: '0777',\n      flag: 'w',\n    });\n\n    // TODO-KEYLESS: Add link to official documentation.\n    const README_NOTIFICATION = `\n## DO NOT COMMIT\nThis directory is auto-generated from \\`@clerk/nextjs\\` because you are running in Keyless mode. Avoid committing the \\`.clerk/\\` directory as it includes the secret key of the unclaimed instance.\n  `;\n\n    writeFileSync(README_PATH, README_NOTIFICATION, {\n      encoding: 'utf8',\n      mode: '0777',\n      flag: 'w',\n    });\n  }\n  /**\n   * Clean up locks.\n   */\n  unlockFileWriting();\n\n  return accountlessApplication;\n}\n\nfunction removeKeyless() {\n  const { rmSync } = nodeFsOrThrow();\n\n  /**\n   * If another request is already in the process of acquiring keys return early.\n   * Using both an in-memory and file system lock seems to be the most effective solution.\n   */\n  if (isFileWritingLocked()) {\n    return undefined;\n  }\n\n  lockFileWriting();\n\n  try {\n    rmSync(generatePath(), { force: true, recursive: true });\n  } catch {\n    // Simply ignore if the removal of the directory/file fails\n  }\n\n  /**\n   * Clean up locks.\n   */\n  unlockFileWriting();\n}\n\nexport { createOrReadKeyless, removeKeyless };\n"],"names":[],"mappings":"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","debugId":null}}]
}