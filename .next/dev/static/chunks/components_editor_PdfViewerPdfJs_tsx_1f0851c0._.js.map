{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/editor/PdfViewerPdfJs.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n\tconst pdfjs = await import('pdfjs-dist');\n\tif (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n\t\tpdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.mjs';\n\t}\n\treturn pdfjs;\n}\n\ntype PdfJsApis = {\n\tgotoLocation: (opts: { pageNumber: number; zoom?: number }) => Promise<void>;\n\tgetCurrentPage: () => number;\n\tgetTotalPages: () => number;\n\treload: (file: Blob | string) => Promise<void>;\n\tsearch?: (query: string) => Promise<{ pageNumber: number } | null>;\n};\n\ninterface PdfViewerPdfJsProps {\n\tfileUrl: string;\n\tfileName?: string;\n\tonReady?: (apis: PdfJsApis) => void;\n\tclassName?: string;\n}\n\nconst PdfViewerPdfJs: React.FC<PdfViewerPdfJsProps> = ({ \n\tfileUrl, \n\tfileName = 'document.pdf', \n\tonReady, \n\tclassName \n}) => {\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\tconst canvasRefs = useRef<Map<number, HTMLCanvasElement>>(new Map());\n\tconst renderTasksRef = useRef<Map<number, any>>(new Map());\n\tconst renderingInProgressRef = useRef<Map<number, boolean>>(new Map());\n\tconst [pdfDoc, setPdfDoc] = useState<any | null>(null);\n\tconst [currentPage, setCurrentPage] = useState(1);\n\tconst [totalPages, setTotalPages] = useState(0);\n\tconst [zoom, setZoom] = useState(1.5);\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [renderedPages, setRenderedPages] = useState<Set<number>>(new Set());\n\n\t// Load PDF document\n\tconst loadPdf = useCallback(async (url: string) => {\n\t\ttry {\n\t\t\tsetIsLoading(true);\n\t\t\tsetError(null);\n\n\t\t\t// Dynamically load pdfjs\n\t\t\tconst pdfjs = await loadPdfJs();\n\t\t\tconst loadingTask = pdfjs.getDocument(url);\n\t\t\tconst pdf = await loadingTask.promise;\n\t\t\t\n\t\t\tsetPdfDoc(pdf);\n\t\t\tsetTotalPages(pdf.numPages);\n\t\t\tsetRenderedPages(new Set());\n\t\t\t\n\t\t\tconsole.log('[PdfViewerPdfJs] PDF loaded successfully:', pdf.numPages, 'pages');\n\t\t\tsetIsLoading(false);\n\t\t} catch (err) {\n\t\t\tconsole.error('[PdfViewerPdfJs] Error loading PDF:', err);\n\t\t\tsetError(err instanceof Error ? err.message : 'Failed to load PDF document');\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, []);\n\n\t// Render a single page\n\tconst renderPage = useCallback(async (pageNum: number) => {\n\t\tif (!pdfDoc) return;\n\n\t\t// Check if already rendering this page\n\t\tif (renderingInProgressRef.current.get(pageNum)) {\n\t\t\tconsole.log(`[PdfViewerPdfJs] Page ${pageNum} is already rendering, skipping`);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait a bit for canvas to be ready if it's not available yet\n\t\tconst canvas = canvasRefs.current.get(pageNum);\n\t\tif (!canvas) {\n\t\t\tconsole.log(`[PdfViewerPdfJs] Canvas not ready for page ${pageNum}, skipping render`);\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as rendering in progress\n\t\trenderingInProgressRef.current.set(pageNum, true);\n\n\t\t// Cancel any existing render task for this page\n\t\tconst existingTask = renderTasksRef.current.get(pageNum);\n\t\tif (existingTask) {\n\t\t\ttry {\n\t\t\t\tconsole.log(`[PdfViewerPdfJs] Cancelling existing render for page ${pageNum}`);\n\t\t\t\tawait existingTask.cancel();\n\t\t\t\trenderTasksRef.current.delete(pageNum);\n\t\t\t\t// Wait for cancellation to fully complete\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 100));\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore errors during cancellation\n\t\t\t\tconsole.log(`[PdfViewerPdfJs] Cancellation error for page ${pageNum}:`, e);\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst page: any = await pdfDoc.getPage(pageNum);\n\t\t\t\n\t\t\t// Double-check canvas is still available\n\t\t\tconst currentCanvas = canvasRefs.current.get(pageNum);\n\t\t\tif (!currentCanvas) {\n\t\t\t\trenderingInProgressRef.current.set(pageNum, false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst context = currentCanvas.getContext('2d');\n\t\t\tif (!context) {\n\t\t\t\trenderingInProgressRef.current.set(pageNum, false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewport = page.getViewport({ scale: zoom });\n\t\t\t\n\t\t\t// Clear any previous content before resizing\n\t\t\tcontext.clearRect(0, 0, currentCanvas.width, currentCanvas.height);\n\t\t\t\n\t\t\tcurrentCanvas.width = viewport.width;\n\t\t\tcurrentCanvas.height = viewport.height;\n\t\t\tcurrentCanvas.style.width = '100%';\n\t\t\tcurrentCanvas.style.height = 'auto';\n\n\t\t\tconst renderContext = {\n\t\t\t\tcanvasContext: context,\n\t\t\t\tviewport: viewport,\n\t\t\t};\n\n\t\t\tconst renderTask = page.render(renderContext);\n\t\t\trenderTasksRef.current.set(pageNum, renderTask);\n\n\t\t\tawait renderTask.promise;\n\t\t\trenderTasksRef.current.delete(pageNum);\n\t\t\tsetRenderedPages(prev => new Set([...prev, pageNum]));\n\t\t\t\n\t\t\tconsole.log(`[PdfViewerPdfJs] Rendered page ${pageNum}/${totalPages}`);\n\t\t} catch (err: any) {\n\t\t\t// Clean up the render task reference\n\t\t\trenderTasksRef.current.delete(pageNum);\n\t\t\t// Ignore cancellation errors\n\t\t\tif (err?.name !== 'RenderingCancelledException') {\n\t\t\t\tconsole.error(`[PdfViewerPdfJs] Error rendering page ${pageNum}:`, err);\n\t\t\t}\n\t\t} finally {\n\t\t\t// Always mark as no longer rendering\n\t\t\trenderingInProgressRef.current.set(pageNum, false);\n\t\t}\n\t}, [pdfDoc, zoom, totalPages]);\n\n\t// Cleanup render tasks when zoom changes\n\tuseEffect(() => {\n\t\t// Cancel all existing render tasks when zoom changes\n\t\tconst cancelAllTasks = async () => {\n\t\t\tconst cancelPromises: Promise<void>[] = [];\n\t\t\trenderTasksRef.current.forEach((task, pageNum) => {\n\t\t\t\tcancelPromises.push(\n\t\t\t\t\t(async () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait task.cancel();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Ignore errors during cancellation\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t);\n\t\t\t});\n\t\t\tawait Promise.all(cancelPromises);\n\t\t\trenderTasksRef.current.clear();\n\t\t\trenderingInProgressRef.current.clear();\n\t\t\tsetRenderedPages(new Set());\n\t\t};\n\t\t\n\t\tcancelAllTasks();\n\t}, [zoom]);\n\n\t// Cleanup on unmount\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\t// Cancel all render tasks on unmount\n\t\t\trenderTasksRef.current.forEach((task) => {\n\t\t\t\ttry {\n\t\t\t\t\ttask.cancel();\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Ignore errors during cleanup\n\t\t\t\t}\n\t\t\t});\n\t\t\trenderTasksRef.current.clear();\n\t\t\trenderingInProgressRef.current.clear();\n\t\t};\n\t}, []);\n\n\t// Initial PDF load\n\tuseEffect(() => {\n\t\tif (fileUrl) {\n\t\t\tloadPdf(fileUrl);\n\t\t}\n\t}, [fileUrl, loadPdf]);\n\n\t// Render visible pages\n\tuseEffect(() => {\n\t\tif (pdfDoc && totalPages > 0) {\n\t\t\t// Render current page and a few pages around it for smooth scrolling\n\t\t\tconst pagesToRender = [\n\t\t\t\tcurrentPage,\n\t\t\t\tMath.max(1, currentPage - 1),\n\t\t\t\tMath.min(totalPages, currentPage + 1),\n\t\t\t];\n\t\t\t\n\t\t\t// Render pages sequentially to avoid canvas conflicts\n\t\t\tconst renderSequentially = async () => {\n\t\t\t\tfor (const pageNum of pagesToRender) {\n\t\t\t\t\tif (!renderedPages.has(pageNum) && !renderingInProgressRef.current.get(pageNum)) {\n\t\t\t\t\t\tawait renderPage(pageNum);\n\t\t\t\t\t\t// Small delay between renders to ensure clean separation\n\t\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 50));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\t// Use a small delay to ensure canvases are mounted and ready\n\t\t\tconst timeoutId = setTimeout(() => {\n\t\t\t\trenderSequentially();\n\t\t\t}, 100);\n\t\t\t\n\t\t\treturn () => clearTimeout(timeoutId);\n\t\t}\n\t}, [pdfDoc, currentPage, totalPages, renderPage, renderedPages]);\n\n\t// Setup APIs\n\tuseEffect(() => {\n\t\tif (!pdfDoc || !onReady) return;\n\n\t\tconst apis: PdfJsApis = {\n\t\t\tgotoLocation: async ({ pageNumber, zoom: newZoom }) => {\n\t\t\t\tif (pageNumber > 0 && pageNumber <= totalPages) {\n\t\t\t\t\tsetCurrentPage(pageNumber);\n\t\t\t\t\tif (newZoom) {\n\t\t\t\t\t\tsetZoom(newZoom / 100); // Convert percentage to scale\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Scroll to page\n\t\t\t\t\tconst pageElement = document.getElementById(`pdf-page-${pageNumber}`);\n\t\t\t\t\tif (pageElement) {\n\t\t\t\t\t\tpageElement.scrollIntoView({ behavior: 'smooth', block: 'start' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetCurrentPage: () => currentPage,\n\t\t\tgetTotalPages: () => totalPages,\n\t\t\treload: async (file: Blob | string) => {\n\t\t\t\tconst url = typeof file === 'string' ? file : URL.createObjectURL(file);\n\t\t\t\tawait loadPdf(url);\n\t\t\t},\n\t\t\tsearch: async (query: string) => {\n\t\t\t\t// Basic text search implementation\n\t\t\t\ttry {\n\t\t\t\t\tfor (let pageNum = 1; pageNum <= totalPages; pageNum++) {\n\t\t\t\t\t\tconst page = await pdfDoc.getPage(pageNum);\n\t\t\t\t\t\tconst textContent = await page.getTextContent();\n\t\t\t\t\t\tconst text = textContent.items.map((item: any) => item.str).join(' ');\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (text.toLowerCase().includes(query.toLowerCase())) {\n\t\t\t\t\t\t\treturn { pageNumber: pageNum };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error('[PdfViewerPdfJs] Search error:', err);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\tonReady(apis);\n\t}, [pdfDoc, currentPage, totalPages, onReady, loadPdf]);\n\n\t// Handle scroll to update current page\n\tconst handleScroll = useCallback(() => {\n\t\tif (!containerRef.current) return;\n\n\t\tconst container = containerRef.current;\n\t\tconst scrollTop = container.scrollTop;\n\t\t\n\t\t// Find which page is most visible\n\t\tfor (let pageNum = 1; pageNum <= totalPages; pageNum++) {\n\t\t\tconst pageElement = document.getElementById(`pdf-page-${pageNum}`);\n\t\t\tif (pageElement) {\n\t\t\t\tconst rect = pageElement.getBoundingClientRect();\n\t\t\t\tconst containerRect = container.getBoundingClientRect();\n\t\t\t\t\n\t\t\t\tif (rect.top <= containerRect.top + 100 && rect.bottom >= containerRect.top) {\n\t\t\t\t\tsetCurrentPage(pageNum);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [totalPages]);\n\n\tif (error) {\n\t\treturn (\n\t\t\t<div className={className ?? 'w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800'}>\n\t\t\t\t<div className=\"flex flex-col items-center justify-center h-full p-6 bg-red-50 dark:bg-red-900/10\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName=\"w-16 h-16 text-red-500 dark:text-red-400 mb-4\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\tstrokeWidth={2}\n\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<h3 className=\"text-lg font-semibold text-red-700 dark:text-red-300 mb-2\">Failed to Load PDF</h3>\n\t\t\t\t\t<p className=\"text-sm text-red-600 dark:text-red-400 text-center max-w-md\">{error}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div className={className ?? 'w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800'}>\n\t\t\t\t<div className=\"flex flex-col items-center justify-center h-full p-6 bg-zinc-50 dark:bg-zinc-900\">\n\t\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100 mb-4\"></div>\n\t\t\t\t\t<p className=\"text-sm text-zinc-600 dark:text-zinc-400\">Loading PDF viewer...</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div \n\t\t\tref={containerRef}\n\t\t\tclassName={className ?? 'w-full h-[75vh] rounded-md overflow-auto border border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900'}\n\t\t\tonScroll={handleScroll}\n\t\t>\n\t\t\t{/* Toolbar */}\n\t\t\t<div className=\"sticky top-0 z-10 bg-white dark:bg-zinc-800 border-b border-zinc-200 dark:border-zinc-700 px-4 py-2 flex items-center justify-between shadow-sm\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst newPage = Math.max(1, currentPage - 1);\n\t\t\t\t\t\t\tsetCurrentPage(newPage);\n\t\t\t\t\t\t\tdocument.getElementById(`pdf-page-${newPage}`)?.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={currentPage <= 1}\n\t\t\t\t\t\tclassName=\"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\tPrevious\n\t\t\t\t\t</button>\n\t\t\t\t\t<span className=\"text-sm text-zinc-700 dark:text-zinc-300\">\n\t\t\t\t\t\tPage {currentPage} of {totalPages}\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst newPage = Math.min(totalPages, currentPage + 1);\n\t\t\t\t\t\t\tsetCurrentPage(newPage);\n\t\t\t\t\t\t\tdocument.getElementById(`pdf-page-${newPage}`)?.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={currentPage >= totalPages}\n\t\t\t\t\t\tclassName=\"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\tNext\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setZoom(z => Math.max(0.5, z - 0.25))}\n\t\t\t\t\t\tclassName=\"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\t-\n\t\t\t\t\t</button>\n\t\t\t\t\t<span className=\"text-sm text-zinc-700 dark:text-zinc-300 min-w-[60px] text-center\">\n\t\t\t\t\t\t{Math.round(zoom * 100)}%\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setZoom(z => Math.min(3, z + 0.25))}\n\t\t\t\t\t\tclassName=\"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* PDF Pages */}\n\t\t\t<div className=\"p-4 space-y-4\">\n\t\t\t\t{Array.from({ length: totalPages }, (_, i) => i + 1).map(pageNum => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={pageNum}\n\t\t\t\t\t\tid={`pdf-page-${pageNum}`}\n\t\t\t\t\t\tclassName=\"bg-white dark:bg-white shadow-lg mx-auto\"\n\t\t\t\t\t\tstyle={{ maxWidth: 'fit-content' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\t\t\tif (el) {\n\t\t\t\t\t\t\t\t\tcanvasRefs.current.set(pageNum, el);\n\t\t\t\t\t\t\t\t\t// Don't eagerly render here - let the useEffect control rendering\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Clean up when canvas is unmounted\n\t\t\t\t\t\t\t\t\tcanvasRefs.current.delete(pageNum);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default PdfViewerPdfJs;\n\n"],"names":[],"mappings":"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","debugId":null}}]
}