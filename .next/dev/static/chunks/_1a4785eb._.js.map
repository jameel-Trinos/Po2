{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/lib/services/geminiService.ts"],"sourcesContent":["import type { Suggestion } from '../types/proofreader';\n\nexport async function analyzePdfContent(pdfTextByPage: string): Promise<Suggestion[]> {\n    try {\n        let response: Response;\n        try {\n            response = await fetch('/api/analyze', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ pdfTextByPage }),\n            });\n        } catch (fetchError) {\n            // Handle network-level fetch failures (before getting a response)\n            console.error(\"Network error during fetch:\", fetchError);\n            \n            if (fetchError instanceof TypeError && fetchError.message.includes('fetch failed')) {\n                throw new Error(\n                    \"Unable to connect to the server. Please check your internet connection and ensure the server is running.\"\n                );\n            }\n            \n            // Re-throw with a more user-friendly message\n            throw new Error(\n                `Network error: ${fetchError instanceof Error ? fetchError.message : 'Failed to send request'}. Please check your connection and try again.`\n            );\n        }\n\n        if (!response.ok) {\n            let errorMessage = `HTTP error! status: ${response.status}`;\n            \n            // Clone response to allow multiple reads if needed\n            const responseClone = response.clone();\n            \n            // Try to read as JSON first (since our API returns JSON errors)\n            let errorData: any = null;\n            try {\n                errorData = await response.json();\n            } catch (jsonError) {\n                // If JSON parsing fails, try reading the cloned response as text\n                try {\n                    const responseText = await responseClone.text();\n                    errorMessage = responseText || errorMessage;\n                } catch (textError) {\n                    // If we can't read the response at all, use the default message\n                    console.error(\"Could not read error response:\", textError);\n                }\n            }\n            \n            // If we successfully parsed JSON, extract the error message\n            if (errorData && typeof errorData === 'object' && errorData !== null) {\n                // Handle nested error structure: { error: { message: \"...\", code: 503 } }\n                // This is the format returned by our API route\n                if (errorData.error !== undefined && errorData.error !== null) {\n                    if (typeof errorData.error === 'string') {\n                        errorMessage = errorData.error;\n                    } else if (typeof errorData.error === 'object') {\n                        // Extract message from nested error object\n                        // Check for error.error.message (triple nested) first\n                        if (errorData.error.error && typeof errorData.error.error === 'object' && typeof errorData.error.error.message === 'string') {\n                            errorMessage = errorData.error.error.message;\n                        } else if (typeof errorData.error.message === 'string' && errorData.error.message.length > 0) {\n                            // This is the expected path: errorData.error.message\n                            errorMessage = errorData.error.message;\n                        } else if (errorData.error.error !== undefined) {\n                            // Triple nested without message property\n                            const innerError = errorData.error.error;\n                            if (typeof innerError === 'string') {\n                                errorMessage = innerError;\n                            }\n                        }\n                    }\n                } else if (typeof errorData.message === 'string' && errorData.message.length > 0) {\n                    // Direct message property\n                    errorMessage = errorData.message;\n                }\n            }\n            \n            // Final safety check: if errorMessage is still the default and we have errorData, try to stringify just the message part\n            if (errorMessage === `HTTP error! status: ${response.status}` && errorData) {\n                // Last resort: if we couldn't extract, at least try to get something meaningful\n                if (errorData.error?.message) {\n                    errorMessage = String(errorData.error.message);\n                }\n            }\n            \n            // Provide user-friendly messages for common error codes if we still have the default\n            if (errorMessage === `HTTP error! status: ${response.status}`) {\n                if (response.status === 503) {\n                    errorMessage = \"The AI service is temporarily unavailable. Please try again in a few moments.\";\n                } else if (response.status === 429) {\n                    errorMessage = \"Too many requests. Please wait a moment and try again.\";\n                } else if (response.status === 401 || response.status === 403) {\n                    errorMessage = \"Authentication failed. Please check your API key configuration.\";\n                } else if (response.status === 500) {\n                    errorMessage = \"An internal server error occurred. Please try again later.\";\n                }\n            }\n            \n            // Ensure we have a string, not an object\n            if (typeof errorMessage !== 'string') {\n                errorMessage = String(errorMessage);\n            }\n            \n            throw new Error(errorMessage);\n        }\n\n        const data = await response.json();\n        return data.suggestions || [];\n    } catch (error) {\n        console.error(\"Error analyzing content with Gemini:\", error);\n        // Preserve the original error message if it's already an Error instance\n        if (error instanceof Error) {\n            throw error;\n        }\n        throw new Error(\"Failed to get suggestions from the AI. Please check the console for details.\");\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/lib/utils/pdfDownload.ts"],"sourcesContent":["/**\n * Download PDF from various sources (base64, blob URL, or regular URL)\n */\nexport function downloadPdf(\n  pdfUrl: string,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const link = document.createElement('a');\n    link.href = pdfUrl;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  } catch (error) {\n    console.error('Error downloading PDF:', error);\n    throw new Error('Failed to download PDF');\n  }\n}\n\n/**\n * Download PDF from Blob\n */\nexport function downloadPdfFromBlob(\n  blob: Blob,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const url = URL.createObjectURL(blob);\n    downloadPdf(url, filename);\n    // Clean up the object URL after a delay\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n  } catch (error) {\n    console.error('Error downloading PDF from blob:', error);\n    throw new Error('Failed to download PDF from blob');\n  }\n}\n\n/**\n * Download PDF from ArrayBuffer\n */\nexport function downloadPdfFromArrayBuffer(\n  buffer: ArrayBuffer,\n  filename: string = 'document.pdf'\n): void {\n  try {\n    const blob = new Blob([buffer], { type: 'application/pdf' });\n    downloadPdfFromBlob(blob, filename);\n  } catch (error) {\n    console.error('Error downloading PDF from ArrayBuffer:', error);\n    throw new Error('Failed to download PDF from ArrayBuffer');\n  }\n}\n\n/**\n * Generate a safe filename from a project name\n */\nexport function generatePdfFilename(\n  projectName: string,\n  suffix: string = 'modified'\n): string {\n  // Remove invalid filename characters\n  const safeName = projectName\n    .replace(/[<>:\"/\\\\|?*]/g, '_')\n    .replace(/\\s+/g, '_')\n    .trim();\n  \n  return `${safeName || 'document'}_${suffix}.pdf`;\n}\n\n\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AACM,SAAS,YACd,MAAc,EACd,WAAmB,cAAc;IAEjC,IAAI;QACF,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,IAAI,GAAG;QACZ,KAAK,QAAQ,GAAG;QAChB,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,SAAS,oBACd,IAAU,EACV,WAAmB,cAAc;IAEjC,IAAI;QACF,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,YAAY,KAAK;QACjB,wCAAwC;QACxC,WAAW,IAAM,IAAI,eAAe,CAAC,MAAM;IAC7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,SAAS,2BACd,MAAmB,EACnB,WAAmB,cAAc;IAEjC,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;YAAC;SAAO,EAAE;YAAE,MAAM;QAAkB;QAC1D,oBAAoB,MAAM;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;QACzD,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,SAAS,oBACd,WAAmB,EACnB,SAAiB,UAAU;IAE3B,qCAAqC;IACrC,MAAM,WAAW,YACd,OAAO,CAAC,iBAAiB,KACzB,OAAO,CAAC,QAAQ,KAChB,IAAI;IAEP,OAAO,GAAG,YAAY,WAAW,CAAC,EAAE,OAAO,IAAI,CAAC;AAClD","debugId":null}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,kKACA;QAED,GAAG,KAAK;;;;;;AAGf;KAlBS","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/editor/EditorSuggestionsPanel.tsx"],"sourcesContent":["import React from 'react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Separator } from '@/components/ui/separator';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Loader2 } from 'lucide-react';\n\ninterface EditorSuggestionsPanelProps {\n  suggestions: Suggestion[];\n  selectedIndex: number | null;\n  onSelectIndex: (index: number | null) => void;\n  onApplyAtIndex: (index: number) => void;\n  onGoToIndex?: (index: number) => void;\n  acceptedCount: number;\n  onSaveDraft: () => void;\n  saveDialogOpen: boolean;\n  setSaveDialogOpen: (open: boolean) => void;\n  projectName: string;\n  setProjectName: (name: string) => void;\n  onConfirmSave: () => void;\n  isApplying: boolean;\n  canApply: boolean;\n}\n\nconst EditorSuggestionsPanel: React.FC<EditorSuggestionsPanelProps> = ({\n  suggestions,\n  selectedIndex,\n  onSelectIndex,\n  onApplyAtIndex,\n  onGoToIndex,\n  acceptedCount,\n  onSaveDraft,\n  saveDialogOpen,\n  setSaveDialogOpen,\n  projectName,\n  setProjectName,\n  onConfirmSave,\n  isApplying,\n  canApply,\n}) => {\n  return (\n    <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-emerald-600 dark:text-emerald-400\">\n            Suggestions\n          </CardTitle>\n        </div>\n        <div className=\"mt-2 grid grid-cols-2 gap-2\">\n          <div className=\"flex items-center justify-between rounded-md border border-zinc-200 dark:border-zinc-800 px-3 py-2\">\n            <div className=\"text-sm text-zinc-600 dark:text-zinc-300\">All</div>\n            <Badge variant=\"secondary\" className=\"rounded-full\">\n              {suggestions.length + acceptedCount}\n            </Badge>\n          </div>\n          <div className=\"flex items-center justify-between rounded-md border border-zinc-200 dark:border-zinc-800 px-3 py-2\">\n            <div className=\"text-sm text-zinc-600 dark:text-zinc-300\">Accepted</div>\n            <Badge variant=\"secondary\" className=\"rounded-full\">\n              {acceptedCount}\n            </Badge>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {suggestions.length === 0 ? (\n            <p className=\"text-sm text-zinc-600 dark:text-zinc-300\">No suggestions yet.</p>\n          ) : (\n            suggestions.map((s, i) => (\n              <div\n                key={`${s.page}-${i}-${s.original.slice(0, 16)}`}\n                className={`rounded-md border p-3 cursor-pointer transition ${\n                  selectedIndex === i\n                    ? 'border-emerald-400 bg-emerald-50/50 dark:bg-emerald-900/20'\n                    : 'border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50/50 dark:hover:bg-zinc-900/40'\n                }`}\n                onClick={() => onSelectIndex(i)}\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"secondary\" className=\"rounded-full\">Page {s.page}</Badge>\n                  <span className=\"text-xs text-zinc-500\">Click to highlight</span>\n                </div>\n                <div className=\"mt-2 text-sm text-zinc-800 dark:text-zinc-100\">\n                  {s.explanation}\n                </div>\n                <div className=\"mt-2 text-sm\">\n                  <span className=\"text-zinc-500\">Original:</span>{' '}\n                  <span className=\"font-medium\">{s.original}</span>\n                </div>\n                <div className=\"text-sm\">\n                  <span className=\"text-zinc-500\">Suggestion:</span>{' '}\n                  <span className=\"font-medium text-emerald-700 dark:text-emerald-300\">{s.suggestion}</span>\n                </div>\n                <div className=\"mt-3 flex gap-2\">\n                  <Button \n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={(e) => { e.stopPropagation(); onGoToIndex?.(i); }}\n                  >\n                    Go to\n                  </Button>\n                  <Button \n                    size=\"sm\" \n                    onClick={(e) => { e.stopPropagation(); onApplyAtIndex(i); }}\n                    disabled={isApplying || !canApply}\n                  >\n                    {isApplying ? (\n                      <>\n                        <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n                        Applying...\n                      </>\n                    ) : (\n                      'Apply to PDF'\n                    )}\n                  </Button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        <Separator className=\"my-4\" />\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <Button variant=\"outline\" onClick={onSaveDraft}>Save as draft</Button>\n          <Button>Send file to</Button>\n        </div>\n\n        <Dialog open={saveDialogOpen} onOpenChange={setSaveDialogOpen}>\n          <DialogContent className=\"bg-white dark:bg-zinc-900\">\n            <DialogHeader>\n              <DialogTitle className=\"text-gray-900 dark:text-gray-50\">Save Project as Draft</DialogTitle>\n              <DialogDescription className=\"text-gray-600 dark:text-gray-400\">\n                Enter a name for your project\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 py-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"project-name\" className=\"text-gray-900 dark:text-gray-50\">\n                  Project Name\n                </Label>\n                <Input\n                  id=\"project-name\"\n                  value={projectName}\n                  onChange={(e) => setProjectName(e.target.value)}\n                  placeholder=\"Enter project name\"\n                  className=\"bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-50\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && projectName.trim()) {\n                      onConfirmSave();\n                    }\n                  }}\n                />\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setSaveDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={onConfirmSave} disabled={!projectName.trim()}>\n                Save\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EditorSuggestionsPanel;\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/components/editor/WordEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Loader2 } from 'lucide-react';\nimport type { Suggestion } from '../../lib/types/proofreader';\n\ninterface WordEditorProps {\n  wordHtml: string;\n  suggestions: Suggestion[];\n  selectedSuggestionIndex: number | null;\n  onContentChange: (html: string) => void;\n  onApplySuggestion: (index: number) => void;\n  isLoading?: boolean;\n}\n\nexport default function WordEditor({\n  wordHtml,\n  suggestions,\n  selectedSuggestionIndex,\n  onContentChange,\n  onApplySuggestion,\n  isLoading = false,\n}: WordEditorProps) {\n  const [content, setContent] = useState<string>(wordHtml);\n  const editorRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    setContent(wordHtml);\n  }, [wordHtml]);\n\n  useEffect(() => {\n    // Highlight the selected suggestion\n    if (selectedSuggestionIndex !== null && editorRef.current) {\n      const s = suggestions[selectedSuggestionIndex];\n      if (s) {\n        highlightText(s.original);\n      }\n    }\n  }, [selectedSuggestionIndex, suggestions]);\n\n  const handleInput = (e: React.FormEvent<HTMLDivElement>) => {\n    const newContent = (e.target as HTMLDivElement).innerHTML;\n    setContent(newContent);\n    onContentChange(newContent);\n  };\n\n  const highlightText = (text: string) => {\n    if (!editorRef.current) return;\n    \n    // Remove previous highlights\n    const previousHighlights = editorRef.current.querySelectorAll('.suggestion-highlight');\n    previousHighlights.forEach(el => {\n      const parent = el.parentNode;\n      if (parent) {\n        parent.replaceChild(document.createTextNode(el.textContent || ''), el);\n        parent.normalize();\n      }\n    });\n\n    // Find and highlight the text\n    const walker = document.createTreeWalker(\n      editorRef.current,\n      NodeFilter.SHOW_TEXT,\n      null\n    );\n\n    const textNodes: Text[] = [];\n    let node;\n    while ((node = walker.nextNode())) {\n      textNodes.push(node as Text);\n    }\n\n    const searchText = text.toLowerCase();\n    let fullText = '';\n    const nodeMap: { start: number; end: number; node: Text }[] = [];\n\n    textNodes.forEach((textNode) => {\n      const start = fullText.length;\n      const content = textNode.textContent || '';\n      fullText += content;\n      const end = fullText.length;\n      nodeMap.push({ start, end, node: textNode });\n    });\n\n    const index = fullText.toLowerCase().indexOf(searchText);\n    if (index !== -1) {\n      const matchStart = index;\n      const matchEnd = index + searchText.length;\n\n      nodeMap.forEach(({ start, end, node }) => {\n        if (start >= matchEnd || end <= matchStart) return;\n\n        const nodeText = node.textContent || '';\n        const highlightStart = Math.max(0, matchStart - start);\n        const highlightEnd = Math.min(nodeText.length, matchEnd - start);\n\n        if (highlightStart < highlightEnd) {\n          const before = nodeText.substring(0, highlightStart);\n          const highlighted = nodeText.substring(highlightStart, highlightEnd);\n          const after = nodeText.substring(highlightEnd);\n\n          const fragment = document.createDocumentFragment();\n          if (before) fragment.appendChild(document.createTextNode(before));\n          \n          const mark = document.createElement('mark');\n          mark.className = 'suggestion-highlight bg-yellow-200 dark:bg-yellow-300/40 px-1 rounded';\n          mark.textContent = highlighted;\n          fragment.appendChild(mark);\n          \n          if (after) fragment.appendChild(document.createTextNode(after));\n\n          node.parentNode?.replaceChild(fragment, node);\n        }\n      });\n\n      // Scroll to highlighted text\n      setTimeout(() => {\n        const highlight = editorRef.current?.querySelector('.suggestion-highlight');\n        if (highlight) {\n          highlight.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n      }, 100);\n    }\n  };\n\n  return (\n    <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n      <CardContent className=\"p-0\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-[75vh]\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-zinc-500\" />\n            <span className=\"ml-2 text-zinc-600 dark:text-zinc-400\">Processing document...</span>\n          </div>\n        ) : (\n          <div\n            ref={editorRef}\n            contentEditable\n            suppressContentEditableWarning\n            className=\"prose prose-zinc dark:prose-invert max-w-none min-h-[75vh] max-h-[75vh] overflow-y-auto p-6 bg-white dark:bg-zinc-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 rounded-md\"\n            dangerouslySetInnerHTML={{ __html: content }}\n            onInput={handleInput}\n            style={{\n              color: 'inherit',\n            }}\n          />\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/lib/services/pdfWordConverter.ts"],"sourcesContent":["import mammoth from 'mammoth';\nimport { \n  Document, \n  Packer, \n  Paragraph, \n  TextRun, \n  HeadingLevel, \n  AlignmentType,\n  Table,\n  TableRow,\n  TableCell,\n  WidthType,\n  BorderStyle,\n  ImageRun,\n  UnderlineType\n} from 'docx';\nimport { PDFDocument, rgb, StandardFonts } from 'pdf-lib';\nimport type { Suggestion } from '../types/proofreader';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n  const pdfjs = await import('pdfjs-dist');\n  if (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n    pdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.mjs';\n  }\n  return pdfjs;\n}\n\n/**\n * Sanitize text to replace Unicode characters that can't be encoded in WinAnsi\n * with ASCII equivalents\n */\nfunction sanitizeTextForPdf(text: string): string {\n  // Map of common Unicode characters to ASCII equivalents\n  const unicodeMap: Record<string, string> = {\n    '→': '->',\n    '←': '<-',\n    '↑': '^',\n    '↓': 'v',\n    '⇒': '=>',\n    '⇐': '<=',\n    '•': '*',\n    '–': '-',\n    '—': '--',\n    '…': '...',\n    '\\u201C': '\"',\n    '\\u201D': '\"',\n    '\\u2018': \"'\",\n    '\\u2019': \"'\",\n    '©': '(c)',\n    '®': '(R)',\n    '™': '(TM)',\n    '€': 'EUR',\n    '£': 'GBP',\n    '¥': 'JPY',\n  };\n\n  let sanitized = text;\n  \n  // Replace known Unicode characters\n  Object.entries(unicodeMap).forEach(([unicode, ascii]) => {\n    sanitized = sanitized.replace(new RegExp(unicode, 'g'), ascii);\n  });\n\n  // Remove any remaining non-ASCII characters that can't be encoded\n  // This regex keeps ASCII printable characters (32-126) and common whitespace (excluding newlines as they're handled separately)\n  sanitized = sanitized.replace(/[^\\x20-\\x7E\\n\\r\\t]/g, '?');\n\n  return sanitized;\n}\n\n/**\n * Convert PDF to HTML for rich text editing\n * Uses pdfjs-dist to extract text with layout preservation\n */\nexport async function convertPdfToHtml(pdfUrl: string): Promise<string> {\n  try {\n    // Dynamically load pdfjs\n    const pdfjs = await loadPdfJs();\n\n    // Load PDF bytes\n    let pdfBytes: ArrayBuffer;\n    \n    if (pdfUrl.startsWith('data:')) {\n      const base64Data = pdfUrl.split(',')[1];\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      pdfBytes = bytes.buffer;\n    } else {\n      const response = await fetch(pdfUrl);\n      pdfBytes = await response.arrayBuffer();\n    }\n\n    const pdf = await pdfjs.getDocument({ data: pdfBytes }).promise;\n    const htmlParts: string[] = [];\n\n    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n      const page = await pdf.getPage(pageNum);\n      const textContent = await page.getTextContent();\n      \n      // Group text items into paragraphs based on vertical position\n      const lines: { y: number; items: any[] }[] = [];\n      let currentLine: { y: number; items: any[] } | null = null;\n      \n      textContent.items.forEach((item: any) => {\n        const y = item.transform[5];\n        \n        if (!currentLine || Math.abs(currentLine.y - y) > 5) {\n          currentLine = { y, items: [item] };\n          lines.push(currentLine);\n        } else {\n          currentLine.items.push(item);\n        }\n      });\n\n      // Convert lines to HTML paragraphs\n      lines.forEach(line => {\n        const text = line.items.map((item: any) => item.str).join(' ').trim();\n        if (text) {\n          // Detect if it might be a heading (simple heuristic: short lines with larger font)\n          const avgFontSize = line.items.reduce((sum: number, item: any) => \n            sum + (item.height || 12), 0) / line.items.length;\n          \n          if (avgFontSize > 16 && text.length < 100) {\n            htmlParts.push(`<h2>${text}</h2>`);\n          } else {\n            htmlParts.push(`<p>${text}</p>`);\n          }\n        }\n      });\n    }\n\n    return htmlParts.join('\\n');\n  } catch (error) {\n    console.error('Error converting PDF to HTML:', error);\n    throw new Error('Failed to convert PDF to HTML');\n  }\n}\n\n/**\n * Draw HTML table in PDF\n */\nasync function drawTableInPdf(\n  tableElement: HTMLTableElement,\n  pdfDoc: PDFDocument,\n  currentPage: any,\n  yPosition: number,\n  font: any,\n  boldFont: any,\n  margin: number\n): Promise<{ page: any; yPosition: number }> {\n  const cellPadding = 5;\n  const cellHeight = 25;\n  const pageWidth = 612;\n  const maxWidth = pageWidth - (margin * 2);\n  \n  // Get all rows\n  const allRows = Array.from(tableElement.querySelectorAll('tr'));\n  const numCols = Math.max(...allRows.map(row => row.querySelectorAll('td, th').length));\n  const colWidth = maxWidth / numCols;\n  \n  let page = currentPage;\n  let y = yPosition;\n  \n  for (const row of allRows) {\n    // Check if we need a new page\n    if (y < 50) {\n      page = pdfDoc.addPage([612, 792]);\n      y = 750;\n    }\n    \n    const cells = Array.from(row.querySelectorAll('td, th'));\n    const isHeader = cells[0]?.tagName === 'TH';\n    \n    // Draw cell backgrounds for headers\n    if (isHeader) {\n      page.drawRectangle({\n        x: margin,\n        y: y - cellHeight,\n        width: maxWidth,\n        height: cellHeight,\n        color: rgb(0.9, 0.9, 0.9),\n      });\n    }\n    \n    // Draw cell borders and content\n    cells.forEach((cell, colIndex) => {\n      const x = margin + (colIndex * colWidth);\n      \n      // Draw cell border\n      page.drawRectangle({\n        x,\n        y: y - cellHeight,\n        width: colWidth,\n        height: cellHeight,\n        borderColor: rgb(0, 0, 0),\n        borderWidth: 1,\n      });\n      \n      // Draw cell text\n      let text = cell.textContent?.trim() || '';\n      text = sanitizeTextForPdf(text);\n      \n      // Truncate text if too long\n      const maxTextWidth = colWidth - (cellPadding * 2);\n      const currentFont = isHeader ? boldFont : font;\n      const fontSize = 10;\n      \n      while (currentFont.widthOfTextAtSize(text, fontSize) > maxTextWidth && text.length > 0) {\n        text = text.slice(0, -4) + '...';\n      }\n      \n      page.drawText(text, {\n        x: x + cellPadding,\n        y: y - cellHeight + cellPadding + 5,\n        size: fontSize,\n        font: currentFont,\n        color: rgb(0, 0, 0),\n      });\n    });\n    \n    y -= cellHeight;\n  }\n  \n  return { page, yPosition: y - 10 }; // Add extra spacing after table\n}\n\n/**\n * Embed image in PDF\n */\nasync function embedImageInPdf(\n  imgElement: HTMLImageElement,\n  pdfDoc: PDFDocument,\n  currentPage: any,\n  yPosition: number,\n  margin: number\n): Promise<{ page: any; yPosition: number }> {\n  try {\n    let src = imgElement.src;\n    \n    if (!src.startsWith('data:') && !src.startsWith('http')) {\n      console.warn('Cannot embed relative URL images in PDF:', src);\n      return { page: currentPage, yPosition };\n    }\n    \n    // Fetch image data\n    let imageBytes: Uint8Array;\n    let imageType: 'png' | 'jpg';\n    \n    if (src.startsWith('data:')) {\n      const base64Data = src.split(',')[1];\n      const mimeType = src.split(';')[0].split(':')[1];\n      imageType = mimeType.includes('png') ? 'png' : 'jpg';\n      \n      const binaryString = atob(base64Data);\n      imageBytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        imageBytes[i] = binaryString.charCodeAt(i);\n      }\n    } else {\n      const response = await fetch(src);\n      const arrayBuffer = await response.arrayBuffer();\n      imageBytes = new Uint8Array(arrayBuffer);\n      imageType = src.toLowerCase().endsWith('.png') ? 'png' : 'jpg';\n    }\n    \n    // Embed image\n    const image = imageType === 'png' \n      ? await pdfDoc.embedPng(imageBytes)\n      : await pdfDoc.embedJpg(imageBytes);\n    \n    const imgDims = image.scale(0.5); // Scale down by 50%\n    const maxWidth = 512;\n    const maxHeight = 400;\n    \n    let width = imgDims.width;\n    let height = imgDims.height;\n    \n    // Scale to fit within max dimensions\n    if (width > maxWidth) {\n      height = (height * maxWidth) / width;\n      width = maxWidth;\n    }\n    if (height > maxHeight) {\n      width = (width * maxHeight) / height;\n      height = maxHeight;\n    }\n    \n    // Check if we need a new page\n    let page = currentPage;\n    let y = yPosition;\n    \n    if (y - height < 50) {\n      page = pdfDoc.addPage([612, 792]);\n      y = 750;\n    }\n    \n    // Draw image\n    page.drawImage(image, {\n      x: margin,\n      y: y - height,\n      width,\n      height,\n    });\n    \n    return { page, yPosition: y - height - 10 };\n  } catch (error) {\n    console.error('Error embedding image in PDF:', error);\n    return { page: currentPage, yPosition };\n  }\n}\n\n/**\n * Convert HTML from rich text editor to PDF with full formatting\n */\nexport async function convertHtmlToPdf(html: string): Promise<string> {\n  try {\n    const pdfDoc = await PDFDocument.create();\n    const font = await pdfDoc.embedFont(StandardFonts.Helvetica);\n    const boldFont = await pdfDoc.embedFont(StandardFonts.HelveticaBold);\n    \n    let currentPage = pdfDoc.addPage([612, 792]); // US Letter size\n    let yPosition = 750;\n    const lineHeight = 18;\n    const margin = 50;\n    const maxWidth = 512;\n\n    // Parse HTML into structured content\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const elements = doc.body.children;\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      const tagName = element.tagName.toLowerCase();\n      \n      // Handle tables\n      if (tagName === 'table') {\n        const result = await drawTableInPdf(\n          element as HTMLTableElement,\n          pdfDoc,\n          currentPage,\n          yPosition,\n          font,\n          boldFont,\n          margin\n        );\n        currentPage = result.page;\n        yPosition = result.yPosition;\n        continue;\n      }\n      \n      // Handle images\n      if (tagName === 'img') {\n        const result = await embedImageInPdf(\n          element as HTMLImageElement,\n          pdfDoc,\n          currentPage,\n          yPosition,\n          margin\n        );\n        currentPage = result.page;\n        yPosition = result.yPosition;\n        continue;\n      }\n      \n      // Handle lists\n      if (tagName === 'ul' || tagName === 'ol') {\n        const listItems = Array.from(element.querySelectorAll('li'));\n        listItems.forEach((li, index) => {\n          const bulletText = tagName === 'ul' ? '• ' : `${index + 1}. `;\n          let text = li.textContent?.trim() || '';\n          text = sanitizeTextForPdf(bulletText + text);\n          \n          // Wrap text\n          const words = text.split(' ');\n          let currentLine = '';\n          \n          for (const word of words) {\n            const testLine = currentLine ? `${currentLine} ${word}` : word;\n            const textWidth = font.widthOfTextAtSize(testLine, 12);\n            \n            if (textWidth > maxWidth && currentLine) {\n              if (yPosition < 50) {\n                currentPage = pdfDoc.addPage([612, 792]);\n                yPosition = 750;\n              }\n              \n              currentPage.drawText(currentLine, {\n                x: margin + 20, // Indent list items\n                y: yPosition,\n                size: 12,\n                font: font,\n                color: rgb(0, 0, 0),\n              });\n              \n              yPosition -= lineHeight;\n              currentLine = word;\n            } else {\n              currentLine = testLine;\n            }\n          }\n          \n          if (currentLine) {\n            if (yPosition < 50) {\n              currentPage = pdfDoc.addPage([612, 792]);\n              yPosition = 750;\n            }\n            \n            currentPage.drawText(currentLine, {\n              x: margin + 20,\n              y: yPosition,\n              size: 12,\n              font: font,\n              color: rgb(0, 0, 0),\n            });\n            \n            yPosition -= lineHeight;\n          }\n        });\n        continue;\n      }\n      \n      // Handle regular text elements\n      let text = element.textContent?.trim() || '';\n      if (!text) continue;\n\n      // Sanitize text for PDF encoding\n      text = sanitizeTextForPdf(text);\n\n      // Determine font size and style based on element type\n      let fontSize = 12;\n      let currentFont = font;\n      let spacing = lineHeight;\n\n      if (tagName.startsWith('h')) {\n        const level = parseInt(tagName[1]);\n        fontSize = 24 - (level * 2);\n        currentFont = boldFont;\n        spacing = lineHeight * 1.5;\n      } else if (tagName === 'strong' || tagName === 'b') {\n        currentFont = boldFont;\n      }\n\n      // Split text by newlines first to handle line breaks properly\n      const lines = text.split(/\\r?\\n/);\n      \n      for (const line of lines) {\n        // Wrap text to fit within page width\n        const words = line.split(' ');\n        let currentLine = '';\n\n        for (const word of words) {\n          const testLine = currentLine ? `${currentLine} ${word}` : word;\n          const textWidth = currentFont.widthOfTextAtSize(testLine, fontSize);\n\n          if (textWidth > maxWidth && currentLine) {\n            // Draw current line\n            if (yPosition < 50) {\n              currentPage = pdfDoc.addPage([612, 792]);\n              yPosition = 750;\n            }\n\n            currentPage.drawText(currentLine, {\n              x: margin,\n              y: yPosition,\n              size: fontSize,\n              font: currentFont,\n              color: rgb(0, 0, 0),\n            });\n\n            yPosition -= spacing;\n            currentLine = word;\n          } else {\n            currentLine = testLine;\n          }\n        }\n\n        // Draw remaining text\n        if (currentLine) {\n          if (yPosition < 50) {\n            currentPage = pdfDoc.addPage([612, 792]);\n            yPosition = 750;\n          }\n\n          currentPage.drawText(currentLine, {\n            x: margin,\n            y: yPosition,\n            size: fontSize,\n            font: currentFont,\n            color: rgb(0, 0, 0),\n          });\n\n          yPosition -= spacing;\n        } else if (line === '') {\n          // Handle empty lines (preserve blank lines)\n          yPosition -= spacing;\n        }\n      }\n\n      // Add extra spacing after headings\n      if (tagName.startsWith('h')) {\n        yPosition -= lineHeight * 0.5;\n      }\n    }\n\n    const pdfBytes = await pdfDoc.save();\n    const base64 = btoa(String.fromCharCode(...pdfBytes));\n    return `data:application/pdf;base64,${base64}`;\n  } catch (error) {\n    console.error('Error converting HTML to PDF:', error);\n    throw new Error('Failed to convert HTML to PDF');\n  }\n}\n\n/**\n * Convert Word document to PDF (legacy compatibility)\n */\nexport async function convertWordToPdf(wordBlob: Blob): Promise<string> {\n  try {\n    const html = await wordBlobToHtml(wordBlob);\n    return await convertHtmlToPdf(html);\n  } catch (error) {\n    console.error('Error converting Word to PDF:', error);\n    throw new Error('Failed to convert Word document to PDF');\n  }\n}\n\n/**\n * Apply suggestions to Word document content\n */\nexport function applySuggestionsToWordContent(\n  wordContent: string,\n  suggestions: Suggestion[]\n): string {\n  let modifiedContent = wordContent;\n  \n  suggestions.forEach(suggestion => {\n    // Replace original text with suggestion\n    const originalText = suggestion.original || suggestion.text;\n    const regex = new RegExp(originalText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n    modifiedContent = modifiedContent.replace(regex, suggestion.suggestion);\n  });\n  \n  return modifiedContent;\n}\n\n/**\n * Convert Word Blob to HTML string for editing\n */\nexport async function wordBlobToHtml(wordBlob: Blob): Promise<string> {\n  try {\n    const arrayBuffer = await wordBlob.arrayBuffer();\n    const result = await mammoth.convertToHtml({ arrayBuffer });\n    return result.value;\n  } catch (error) {\n    console.error('Error converting Word to HTML:', error);\n    throw new Error('Failed to convert Word document to HTML');\n  }\n}\n\n/**\n * Parse inline styles and return text run options\n */\nfunction parseTextRunStyles(element: Element): any {\n  const style = element.getAttribute('style') || '';\n  const computedStyle = window.getComputedStyle(element);\n  const options: any = {};\n\n  // Bold\n  if (element.tagName === 'STRONG' || element.tagName === 'B' || \n      computedStyle.fontWeight === 'bold' || parseInt(computedStyle.fontWeight) >= 700) {\n    options.bold = true;\n  }\n\n  // Italic\n  if (element.tagName === 'EM' || element.tagName === 'I' || \n      computedStyle.fontStyle === 'italic') {\n    options.italics = true;\n  }\n\n  // Underline\n  if (element.tagName === 'U' || computedStyle.textDecoration.includes('underline')) {\n    options.underline = { type: UnderlineType.SINGLE };\n  }\n\n  // Font size (convert from px to points - 12pt = 16px)\n  const fontSize = parseInt(computedStyle.fontSize);\n  if (fontSize && fontSize > 0) {\n    options.size = Math.round((fontSize * 72) / 96); // Convert pixels to points\n  }\n\n  return options;\n}\n\n/**\n * Process text node with inline formatting\n */\nfunction processTextNode(node: Node, parentElement: Element): TextRun[] {\n  const runs: TextRun[] = [];\n  \n  if (node.nodeType === Node.TEXT_NODE) {\n    const text = node.textContent || '';\n    if (text.trim()) {\n      const styles = parseTextRunStyles(parentElement);\n      runs.push(new TextRun({ text, ...styles }));\n    }\n  } else if (node.nodeType === Node.ELEMENT_NODE) {\n    const element = node as Element;\n    const styles = parseTextRunStyles(element);\n    \n    // Process child nodes recursively\n    Array.from(element.childNodes).forEach(child => {\n      if (child.nodeType === Node.TEXT_NODE) {\n        const text = child.textContent || '';\n        if (text.trim()) {\n          runs.push(new TextRun({ text, ...styles }));\n        }\n      } else {\n        runs.push(...processTextNode(child, element));\n      }\n    });\n  }\n  \n  return runs;\n}\n\n/**\n * Convert HTML table to Word Table\n */\nasync function htmlTableToWordTable(tableElement: HTMLTableElement): Promise<Table> {\n  const rows: TableRow[] = [];\n  \n  // Process all rows (including thead and tbody)\n  const allRows = Array.from(tableElement.querySelectorAll('tr'));\n  \n  for (const row of allRows) {\n    const cells: TableCell[] = [];\n    const cellElements = Array.from(row.querySelectorAll('td, th'));\n    \n    for (const cell of cellElements) {\n      const isHeader = cell.tagName === 'TH';\n      const textRuns: TextRun[] = [];\n      \n      // Get cell text with formatting\n      Array.from(cell.childNodes).forEach(node => {\n        const runs = processTextNode(node, cell);\n        textRuns.push(...runs);\n      });\n      \n      // If no formatted text, just get plain text\n      if (textRuns.length === 0) {\n        const text = cell.textContent?.trim() || '';\n        textRuns.push(new TextRun({ \n          text, \n          bold: isHeader \n        }));\n      }\n      \n      cells.push(\n        new TableCell({\n          children: [new Paragraph({ children: textRuns })],\n          shading: isHeader ? {\n            fill: 'E7E7E7', // Light gray for headers\n          } : undefined,\n        })\n      );\n    }\n    \n    rows.push(new TableRow({ children: cells }));\n  }\n  \n  return new Table({\n    rows,\n    width: {\n      size: 100,\n      type: WidthType.PERCENTAGE,\n    },\n    borders: {\n      top: { style: BorderStyle.SINGLE, size: 1 },\n      bottom: { style: BorderStyle.SINGLE, size: 1 },\n      left: { style: BorderStyle.SINGLE, size: 1 },\n      right: { style: BorderStyle.SINGLE, size: 1 },\n      insideHorizontal: { style: BorderStyle.SINGLE, size: 1 },\n      insideVertical: { style: BorderStyle.SINGLE, size: 1 },\n    },\n  });\n}\n\n/**\n * Convert image to base64 and create ImageRun\n */\nasync function htmlImageToWordImage(imgElement: HTMLImageElement): Promise<ImageRun | null> {\n  try {\n    // Get image source\n    let src = imgElement.src;\n    \n    // If it's a relative URL, we can't load it in the browser context\n    if (!src.startsWith('data:') && !src.startsWith('http')) {\n      console.warn('Cannot embed relative URL images:', src);\n      return null;\n    }\n    \n    // Fetch image as blob\n    let imageBytes: Uint8Array;\n    \n    if (src.startsWith('data:')) {\n      // Extract base64 data\n      const base64Data = src.split(',')[1];\n      const binaryString = atob(base64Data);\n      imageBytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        imageBytes[i] = binaryString.charCodeAt(i);\n      }\n    } else {\n      // Fetch from URL\n      const response = await fetch(src);\n      const arrayBuffer = await response.arrayBuffer();\n      imageBytes = new Uint8Array(arrayBuffer);\n    }\n    \n    // Get image dimensions\n    const width = imgElement.width || 400;\n    const height = imgElement.height || 300;\n    \n    return new ImageRun({\n      data: imageBytes,\n      transformation: {\n        width: Math.min(width, 600), // Max width 600px\n        height: Math.min(height, 450), // Max height 450px\n      },\n    });\n  } catch (error) {\n    console.error('Error embedding image:', error);\n    return null;\n  }\n}\n\n/**\n * Process HTML element and convert to Word elements\n */\nasync function processHtmlElement(element: Element): Promise<any[]> {\n  const wordElements: any[] = [];\n  const tagName = element.tagName.toLowerCase();\n  \n  // Handle tables\n  if (tagName === 'table') {\n    const table = await htmlTableToWordTable(element as HTMLTableElement);\n    wordElements.push(table);\n    return wordElements;\n  }\n  \n  // Handle images\n  if (tagName === 'img') {\n    const imageRun = await htmlImageToWordImage(element as HTMLImageElement);\n    if (imageRun) {\n      wordElements.push(new Paragraph({ children: [imageRun] }));\n    }\n    return wordElements;\n  }\n  \n  // Handle lists\n  if (tagName === 'ul' || tagName === 'ol') {\n    const listItems = Array.from(element.querySelectorAll('li'));\n    listItems.forEach((li, index) => {\n      const textRuns: TextRun[] = [];\n      Array.from(li.childNodes).forEach(node => {\n        const runs = processTextNode(node, li);\n        textRuns.push(...runs);\n      });\n      \n      if (textRuns.length === 0) {\n        const text = li.textContent?.trim() || '';\n        textRuns.push(new TextRun({ text }));\n      }\n      \n      const bulletText = tagName === 'ul' ? '• ' : `${index + 1}. `;\n      textRuns.unshift(new TextRun({ text: bulletText }));\n      \n      wordElements.push(new Paragraph({ children: textRuns }));\n    });\n    return wordElements;\n  }\n  \n  // Handle regular paragraphs and headings\n  const text = element.textContent?.trim() || '';\n  if (!text && tagName !== 'br') return wordElements;\n  \n  // Create paragraph options\n  const paragraphOptions: any = { children: [] };\n  \n  // Handle headings\n  if (tagName === 'h1') {\n    paragraphOptions.heading = HeadingLevel.HEADING_1;\n  } else if (tagName === 'h2') {\n    paragraphOptions.heading = HeadingLevel.HEADING_2;\n  } else if (tagName === 'h3') {\n    paragraphOptions.heading = HeadingLevel.HEADING_3;\n  } else if (tagName === 'h4') {\n    paragraphOptions.heading = HeadingLevel.HEADING_4;\n  }\n  \n  // Handle text alignment\n  const style = element.getAttribute('style') || '';\n  const computedStyle = window.getComputedStyle(element);\n  const textAlign = computedStyle.textAlign;\n  \n  if (textAlign === 'center' || style.includes('text-align: center')) {\n    paragraphOptions.alignment = AlignmentType.CENTER;\n  } else if (textAlign === 'right' || style.includes('text-align: right')) {\n    paragraphOptions.alignment = AlignmentType.RIGHT;\n  } else if (textAlign === 'justify' || style.includes('text-align: justify')) {\n    paragraphOptions.alignment = AlignmentType.JUSTIFIED;\n  }\n  \n  // Process text with inline formatting\n  const textRuns: TextRun[] = [];\n  Array.from(element.childNodes).forEach(node => {\n    const runs = processTextNode(node, element);\n    textRuns.push(...runs);\n  });\n  \n  // If no formatted text, just use plain text\n  if (textRuns.length === 0 && text) {\n    textRuns.push(new TextRun({ text }));\n  }\n  \n  if (textRuns.length > 0) {\n    paragraphOptions.children = textRuns;\n    wordElements.push(new Paragraph(paragraphOptions));\n  }\n  \n  return wordElements;\n}\n\n/**\n * Convert HTML string to Word Blob with full formatting preservation\n */\nexport async function htmlToWordBlob(htmlContent: string): Promise<Blob> {\n  try {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(htmlContent, 'text/html');\n    const wordElements: any[] = [];\n    \n    // Process each top-level element in the HTML body\n    const elements = Array.from(doc.body.children);\n    \n    for (const element of elements) {\n      const processed = await processHtmlElement(element);\n      wordElements.push(...processed);\n    }\n    \n    // Create Word document with processed elements\n    const wordDoc = new Document({\n      sections: [\n        {\n          properties: {\n            page: {\n              margin: {\n                top: 1440, // 1 inch = 1440 twentieths of a point\n                right: 1440,\n                bottom: 1440,\n                left: 1440,\n              },\n            },\n          },\n          children: wordElements.length > 0 ? wordElements : [\n            new Paragraph({\n              children: [new TextRun({ text: '' })],\n            }),\n          ],\n        },\n      ],\n    });\n\n    return await Packer.toBlob(wordDoc);\n  } catch (error) {\n    console.error('Error converting HTML to Word:', error);\n    throw new Error('Failed to convert HTML to Word document');\n  }\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2112, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Trinos/Learning/PointofTwo/Po2/app/editor/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { useAppContext } from '../../lib/AppContext';\nimport { motion } from 'framer-motion';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Download, Loader2, FileText, ArrowLeftRight, FileDown } from 'lucide-react';\nimport type { Suggestion } from '../../lib/types/proofreader';\nimport { analyzePdfContent } from '../../lib/services/geminiService';\nimport { downloadPdf, generatePdfFilename } from '../../lib/utils/pdfDownload';\nimport EditorSuggestionsPanel from '../../components/editor/EditorSuggestionsPanel';\nimport WordEditor from '../../components/editor/WordEditor';\nimport dynamic from 'next/dynamic';\nimport { wordBlobToHtml, htmlToWordBlob, convertWordToPdf } from '../../lib/services/pdfWordConverter';\nimport { toast } from 'sonner';\n\n// Helper function to load pdfjs dynamically\nasync function loadPdfJs() {\n  const pdfjs = await import('pdfjs-dist');\n  if (typeof window !== 'undefined' && !pdfjs.GlobalWorkerOptions.workerSrc) {\n    pdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.mjs';\n  }\n  return pdfjs;\n}\n\n// Dynamically import PDF viewer to avoid SSR issues with pdfjs-dist\nconst PdfViewerPdfJs = dynamic(() => import('@/components/editor/PdfViewerPdfJs'), {\n  ssr: false,\n  loading: () => (\n    <div className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800 flex items-center justify-center bg-zinc-50 dark:bg-zinc-900\">\n      <div className=\"flex flex-col items-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100 mb-4\"></div>\n        <p className=\"text-sm text-zinc-600 dark:text-zinc-400\">Loading PDF viewer...</p>\n      </div>\n    </div>\n  )\n});\n\nexport default function EditorPage() {\n  const searchParams = useSearchParams();\n  const documentId = searchParams.get('documentId');\n  const { \n    getDocumentPdfUrl, \n    getDocumentContent, \n    saveProjectAsDraft, \n    getDocument,\n    getModifiedPdfUrl,\n    setModifiedPdfUrl,\n  } = useAppContext();\n\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isConverting, setIsConverting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState<number | null>(null);\n  const [acceptedIndices, setAcceptedIndices] = useState<number[]>([]);\n  const [saveDialogOpen, setSaveDialogOpen] = useState(false);\n  const [projectName, setProjectName] = useState<string>('');\n  const [editingMode, setEditingMode] = useState<'pdf' | 'word'>('pdf');\n  const [wordHtml, setWordHtml] = useState<string>('');\n  const [wordBlob, setWordBlob] = useState<Blob | null>(null);\n  const [originalPdfUrl, setOriginalPdfUrl] = useState<string | null>(null);\n  const pdfApisRef = useRef<{ \n    gotoLocation: (opts: { pageNumber: number; zoom?: number }) => Promise<void>;\n    getCurrentPage: () => number;\n    getTotalPages: () => number;\n    reload: (file: Blob | string) => Promise<void>;\n    search?: (query: string) => Promise<{ pageNumber: number } | null>;\n  } | null>(null);\n\n  useEffect(() => {\n    if (!documentId) {\n      console.error('[EditorPage] No document ID provided');\n      setError(\"No document ID provided.\");\n      return;\n    }\n    \n    console.log('[EditorPage] Loading document:', documentId);\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const url = getDocumentPdfUrl(documentId);\n      console.log('[EditorPage] PDF URL retrieved:', url ? 'exists' : 'null');\n      \n      if (url) {\n        setPdfUrl(url);\n        setOriginalPdfUrl(url);\n      } else {\n        console.warn('[EditorPage] No PDF URL found for document');\n        setPdfUrl(null);\n      }\n    } catch (e) {\n      console.error('[EditorPage] Error loading PDF:', e);\n      setPdfUrl(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [documentId, getDocumentPdfUrl]);\n\n  // Load extracted text and fetch AI suggestions\n  useEffect(() => {\n    if (!documentId) return;\n    const content = getDocumentContent(documentId);\n    const document = getDocument(documentId);\n    if (document) {\n      setProjectName(document.projectName || '');\n    }\n    if (content) {\n      analyzePdfContent(content)\n        .then(ai => setSuggestions(ai))\n        .catch(e => console.error(e));\n    }\n  }, [documentId, getDocumentContent, getDocument]);\n\n  // Convert PDF to Word for editing\n  const handleConvertToWord = async () => {\n    if (!documentId || !pdfUrl) {\n      toast.error('PDF not available for conversion');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      // Extract text from PDF using pdfjs\n      const response = await fetch(pdfUrl);\n      const arrayBuffer = await response.arrayBuffer();\n      \n      // Dynamically load pdfjs\n      const pdfjs = await loadPdfJs();\n      const pdf = await pdfjs.getDocument({ data: arrayBuffer }).promise;\n      \n      let fullText = '';\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const textContent = await page.getTextContent();\n        const pageText = textContent.items.map((item: any) => item.str).join(' ');\n        fullText += pageText + '\\n\\n';\n      }\n      \n      // Convert to HTML format for editing\n      const htmlContent = fullText\n        .split('\\n\\n')\n        .filter(p => p.trim())\n        .map(p => `<p>${p}</p>`)\n        .join('\\n');\n      \n      setWordHtml(htmlContent);\n      setEditingMode('word');\n      toast.success('Converted to editable format');\n    } catch (err) {\n      console.error('Error converting PDF:', err);\n      toast.error('Failed to convert PDF. Please try again.');\n      setError('Failed to convert PDF to editable format.');\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  // Convert back to PDF\n  const handleConvertBackToPdf = async () => {\n    if (!documentId || !wordHtml) {\n      toast.error('No content to convert');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      const htmlBlob = await htmlToWordBlob(wordHtml);\n      const newPdfUrl = await convertWordToPdf(htmlBlob);\n      \n      setPdfUrl(newPdfUrl);\n      setModifiedPdfUrl(documentId, newPdfUrl);\n      setEditingMode('pdf');\n      toast.success('Converted back to PDF');\n    } catch (err) {\n      console.error('Error converting to PDF:', err);\n      toast.error('Failed to convert to PDF. Please try again.');\n      setError('Failed to convert to PDF.');\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  // Apply suggestion to Word content\n  const handleApplySuggestion = (index: number) => {\n    const s = suggestions[index];\n    if (!s) return;\n\n    if (editingMode === 'word') {\n      // Apply to Word HTML content\n      const originalText = s.original || s.text;\n      const regex = new RegExp(originalText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n      const updatedHtml = wordHtml.replace(regex, s.suggestion);\n      setWordHtml(updatedHtml);\n      \n      setAcceptedIndices(prev => [...prev, index]);\n      setSuggestions(prev => prev.filter((_, i) => i !== index));\n      setSelectedSuggestionIndex(null);\n      toast.success('Suggestion applied');\n    } else {\n      toast.error('Convert to Word to apply suggestions');\n    }\n  };\n\n  // Navigate to suggestion in Word editor\n  const handleGoToSuggestion = (index: number) => {\n    setSelectedSuggestionIndex(index);\n    // The WordEditor component will handle highlighting\n  };\n\n  const handleDownloadPdf = async () => {\n    if (!documentId) return;\n\n    try {\n      if (!pdfUrl) {\n        toast.error('No PDF available to download');\n        return;\n      }\n\n      const filename = generatePdfFilename(projectName, pdfUrl !== originalPdfUrl ? 'modified' : 'original');\n      downloadPdf(pdfUrl, filename);\n    } catch (err) {\n      console.error('Error downloading PDF:', err);\n      toast.error('Failed to download PDF');\n    }\n  };\n\n  const handleConvertPdfToWord = async () => {\n    if (!documentId || !pdfUrl) {\n      toast.error('PDF not available for conversion');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      // Fetch the PDF file\n      const response = await fetch(pdfUrl);\n      const pdfBlob = await response.blob();\n      \n      // Create FormData to send to the API\n      const formData = new FormData();\n      const filename = projectName ? `${projectName}.pdf` : 'document.pdf';\n      formData.append('file', pdfBlob, filename);\n\n      // Call the PDF to DOCX conversion API\n      const convertResponse = await fetch('/api/pdf-to-docx', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!convertResponse.ok) {\n        // Try to get error details from the response\n        let errorMessage = 'Failed to convert PDF to Word';\n        const contentType = convertResponse.headers.get('content-type');\n        \n        console.error('[PDF to Word] Conversion failed:', {\n          status: convertResponse.status,\n          statusText: convertResponse.statusText,\n          contentType,\n        });\n        \n        try {\n          // Try to get the response body as text first\n          const errorText = await convertResponse.text();\n          console.log('[PDF to Word] Error response body:', errorText);\n          \n          // Check if response is JSON\n          if (contentType && contentType.includes('application/json') && errorText) {\n            try {\n              const errorData = JSON.parse(errorText);\n              console.error('[PDF to Word] Parsed error data:', errorData);\n              // Try multiple fields for error message, prioritizing user-friendly messages\n              errorMessage = errorData.message || errorData.error || errorData.details || errorMessage;\n            } catch (parseError) {\n              // If JSON parsing fails, use the text as error message\n              console.error('[PDF to Word] JSON parse error:', parseError);\n              errorMessage = errorText || errorMessage;\n            }\n          } else if (errorText) {\n            // Response is not JSON or no content-type header, use text directly\n            errorMessage = errorText || convertResponse.statusText || `HTTP ${convertResponse.status}`;\n          } else {\n            // No response body\n            errorMessage = convertResponse.statusText || `HTTP ${convertResponse.status}`;\n          }\n        } catch (e) {\n          // If we can't read the response, use status information\n          console.error('[PDF to Word] Error reading response:', e);\n          errorMessage = convertResponse.statusText || `HTTP ${convertResponse.status}: Failed to convert PDF to Word`;\n        }\n        \n        console.error('[PDF to Word] Final error message:', errorMessage);\n        throw new Error(errorMessage);\n      }\n\n      // Get the DOCX blob\n      const docxBlob = await convertResponse.blob();\n      \n      // Download the DOCX file\n      const url = window.URL.createObjectURL(docxBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename.replace(/\\.pdf$/i, '.docx');\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n\n      toast.success('PDF converted to Word and downloaded');\n    } catch (err) {\n      console.error('Error converting PDF to Word:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to convert PDF to Word';\n      toast.error(errorMessage);\n      setError(errorMessage);\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  const handleSaveAsDraft = () => {\n    if (!documentId) return;\n    \n    if (projectName.trim()) {\n      saveProjectAsDraft(projectName.trim(), documentId);\n      toast.success('Project saved as draft!');\n    } else {\n      setSaveDialogOpen(true);\n    }\n  };\n\n  const handleConfirmSave = () => {\n    if (!documentId || !projectName.trim()) return;\n    saveProjectAsDraft(projectName.trim(), documentId);\n    setSaveDialogOpen(false);\n    toast.success('Project saved as draft!');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-zinc-50 dark:bg-zinc-950 text-center px-6\">\n        <Card className=\"w-full max-w-md border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-900 dark:text-gray-50\">Loading Document…</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Progress value={66} />\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Preparing the viewer.</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (error && !documentId) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen bg-zinc-50 dark:bg-zinc-950 text-center text-red-600 dark:text-red-400\">\n        <h2 className=\"text-2xl font-semibold\">Error: {error}</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-2\">Please go back and try again.</p>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"min-h-screen bg-zinc-50 dark:bg-zinc-950 p-4 sm:p-6 lg:p-8 flex justify-center\"\n    >\n      <div className=\"max-w-7xl w-full grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"md:col-span-2\">\n          <Card className=\"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900\">\n            <CardHeader className=\"pb-2\">\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"text-gray-900 dark:text-gray-50\">\n                  {editingMode === 'word' ? 'Document Editor' : 'Document Viewer'}\n                </CardTitle>\n                <div className=\"flex gap-2\">\n                  {editingMode === 'pdf' && pdfUrl && (\n                    <>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        onClick={handleConvertToWord}\n                        disabled={isConverting}\n                      >\n                        {isConverting ? (\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                          <FileText className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Edit Document\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        onClick={handleConvertPdfToWord}\n                        disabled={isConverting}\n                      >\n                        {isConverting ? (\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                          <FileDown className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Convert to Word\n                      </Button>\n                    </>\n                  )}\n                  {editingMode === 'word' && (\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\" \n                      onClick={handleConvertBackToPdf}\n                      disabled={isConverting}\n                    >\n                      {isConverting ? (\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      ) : (\n                        <ArrowLeftRight className=\"h-4 w-4 mr-2\" />\n                      )}\n                      Back to PDF\n                    </Button>\n                  )}\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={handleDownloadPdf} \n                    disabled={!pdfUrl}\n                  >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Download\n                  </Button>\n                </div>\n              </div>\n              {editingMode === 'pdf' && (\n                <Badge variant=\"secondary\" className=\"mt-2\">\n                  Click \"Edit Document\" to apply suggestions\n                </Badge>\n              )}\n            </CardHeader>\n            <CardContent className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md\">\n                  <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>\n                </div>\n              )}\n              \n              {editingMode === 'word' ? (\n                <WordEditor\n                  wordHtml={wordHtml}\n                  suggestions={suggestions}\n                  selectedSuggestionIndex={selectedSuggestionIndex}\n                  onContentChange={setWordHtml}\n                  onApplySuggestion={handleApplySuggestion}\n                  isLoading={isConverting}\n                />\n              ) : pdfUrl ? (\n                <PdfViewerPdfJs\n                  fileUrl={pdfUrl}\n                  fileName={projectName ? `${projectName}.pdf` : 'document.pdf'}\n                  onReady={(apis) => {\n                    pdfApisRef.current = apis;\n                  }}\n                  className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800\"\n                />\n              ) : (\n                <div className=\"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-6 bg-zinc-50 dark:bg-zinc-900\">\n                  <svg\n                    className=\"w-16 h-16 text-zinc-400 dark:text-zinc-600 mb-4\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  <h3 className=\"text-lg font-semibold text-zinc-700 dark:text-zinc-300 mb-2\">No PDF Available</h3>\n                  <p className=\"text-sm text-zinc-600 dark:text-zinc-400 text-center max-w-md\">\n                    No PDF file was found for this document. Please upload a PDF file to view it here.\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        <aside className=\"md:col-span-1\">\n          <EditorSuggestionsPanel\n            suggestions={suggestions}\n            selectedIndex={selectedSuggestionIndex}\n            onSelectIndex={setSelectedSuggestionIndex}\n            onApplyAtIndex={handleApplySuggestion}\n            onGoToIndex={handleGoToSuggestion}\n            acceptedCount={acceptedIndices.length}\n            onSaveDraft={handleSaveAsDraft}\n            saveDialogOpen={saveDialogOpen}\n            setSaveDialogOpen={setSaveDialogOpen}\n            projectName={projectName}\n            setProjectName={setProjectName}\n            onConfirmSave={handleConfirmSave}\n            isApplying={isConverting}\n            canApply={editingMode === 'word'}\n          />\n        </aside>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}