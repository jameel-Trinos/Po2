(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32189,(e,t,r)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},10760,(e,t,r)=>{"use strict";var o=e.r(32189);function n(){}function a(){}a.resetWarningCache=n,t.exports=function(){function e(e,t,r,n,a,i){if(i!==o){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},45009,(e,t,r)=>{t.exports=e.r(10760)()},70814,e=>{"use strict";let t;var r,o,n,a=e.i(43476),i=e.i(15504),s=e.i(46932),l=e.i(40160),d=e.i(78583),c=e.i(75254);let u=(0,c.default)("file-type-corner",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v6",key:"15usau"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M3 16v-1.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5V16",key:"s1gz5"}],["path",{d:"M6 22h2",key:"194x9m"}],["path",{d:"M7 14v8",key:"11ixej"}]]);var p=e.i(46696),f=e.i(67881),m=e.i(70065),g=e.i(94179),h=e.i(69035);e.i(47167);var x=e.i(45009),y=function(){return(y=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},b={onActivate:x.func,onAddUndo:x.func,onBeforeAddUndo:x.func,onBeforeExecCommand:x.func,onBeforeGetContent:x.func,onBeforeRenderUI:x.func,onBeforeSetContent:x.func,onBeforePaste:x.func,onBlur:x.func,onChange:x.func,onClearUndos:x.func,onClick:x.func,onContextMenu:x.func,onCommentChange:x.func,onCompositionEnd:x.func,onCompositionStart:x.func,onCompositionUpdate:x.func,onCopy:x.func,onCut:x.func,onDblclick:x.func,onDeactivate:x.func,onDirty:x.func,onDrag:x.func,onDragDrop:x.func,onDragEnd:x.func,onDragGesture:x.func,onDragOver:x.func,onDrop:x.func,onExecCommand:x.func,onFocus:x.func,onFocusIn:x.func,onFocusOut:x.func,onGetContent:x.func,onHide:x.func,onInit:x.func,onInput:x.func,onKeyDown:x.func,onKeyPress:x.func,onKeyUp:x.func,onLoadContent:x.func,onMouseDown:x.func,onMouseEnter:x.func,onMouseLeave:x.func,onMouseMove:x.func,onMouseOut:x.func,onMouseOver:x.func,onMouseUp:x.func,onNodeChange:x.func,onObjectResizeStart:x.func,onObjectResized:x.func,onObjectSelected:x.func,onPaste:x.func,onPostProcess:x.func,onPostRender:x.func,onPreProcess:x.func,onProgressState:x.func,onRedo:x.func,onRemove:x.func,onReset:x.func,onSaveContent:x.func,onSelectionChange:x.func,onSetAttrib:x.func,onSetContent:x.func,onShow:x.func,onSubmit:x.func,onUndo:x.func,onVisualAid:x.func,onSkinLoadError:x.func,onThemeLoadError:x.func,onModelLoadError:x.func,onPluginLoadError:x.func,onIconsLoadError:x.func,onLanguageLoadError:x.func,onScriptsLoad:x.func,onScriptsLoadError:x.func},v=y({apiKey:x.string,licenseKey:x.string,id:x.string,inline:x.bool,init:x.object,initialValue:x.string,onEditorChange:x.func,value:x.string,tagName:x.string,tabIndex:x.number,cloudChannel:x.string,plugins:x.oneOfType([x.string,x.array]),toolbar:x.oneOfType([x.string,x.array]),disabled:x.bool,readonly:x.bool,textareaName:x.string,tinymceScriptSrc:x.oneOfType([x.string,x.arrayOf(x.string),x.arrayOf(x.shape({src:x.string,async:x.bool,defer:x.bool}))]),rollback:x.oneOfType([x.number,x.oneOf([!1])]),scriptLoading:x.shape({async:x.bool,defer:x.bool,delay:x.number})},b),C=function(e){return e&&e.tinymce?e.tinymce:null},w=function(e){return"function"==typeof e},k=function(e){return e in b},j=function(e){return e.substr(2)},N=function(e,t,r,o,n,a,i){var s=Object.keys(n).filter(k),l=Object.keys(a).filter(k),d=s.filter(function(e){return void 0===a[e]}),c=l.filter(function(e){return void 0===n[e]});d.forEach(function(e){var t=j(e),o=i[t];r(t,o),delete i[t]}),c.forEach(function(r){var n=o(e,r),a=j(r);i[a]=n,t(a,n)})},T=0,E=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++T+String(t)},S=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},P=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},D=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,r=e.parentNode;null!=r;)r=(t=r).parentNode;return t===e.ownerDocument}return e.isConnected},_=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},O=function(e){var t=C(e);if(!t)throw Error("tinymce should have been loaded into global scope");return t},F=function(e){return e.options&&e.options.isRegistered("disabled")},R=function(){return(R=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},I=function(e,t,r){var o,n,a=e.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=t.id,a.src=t.src,a.async=null!=(o=t.async)&&o,a.defer=null!=(n=t.defer)&&n;var i=function(){a.removeEventListener("load",i),a.removeEventListener("error",s),r(t.src)},s=function(e){a.removeEventListener("load",i),a.removeEventListener("error",s),r(t.src,e)};a.addEventListener("load",i),a.addEventListener("error",s),e.head&&e.head.appendChild(a)},L=function(e){var t={},r=function(e,r){var o=t[e];o.done=!0,o.error=r;for(var n=0,a=o.handlers;n<a.length;n++)(0,a[n])(e,r);o.handlers=[]};return{loadScripts:function(o,n,a){var i=function(e){return void 0!==a?a(e):console.error(e)};if(0===o.length)return void i(Error("At least one script must be provided"));for(var s=0,l=!1,d=function(e,t){l||(t?(l=!0,i(t)):++s===o.length&&n())},c=0;c<o.length;c++){var u=o[c],p=t[u.src];if(p)p.done?d(u.src,p.error):p.handlers.push(d);else{var f=E("tiny-");t[u.src]={id:f,src:u.src,done:!1,error:null,handlers:[d]},I(e,R({id:f},u),r)}}},deleteScripts:function(){for(var r,o=0,n=Object.values(t);o<n.length;o++){var a=n[o],i=e.getElementById(a.id);null!=i&&"SCRIPT"===i.tagName&&(null==(r=i.parentNode)||r.removeChild(i))}t={}},getDocument:function(){return e}}},z=(r=[],o=function(e){var t=r.find(function(t){return t.getDocument()===e});return void 0===t&&(t=L(e),r.push(t)),t},{loadList:function(e,t,r,n,a){var i=function(){return o(e).loadScripts(t,n,a)};r>0?setTimeout(i,r):i()},reinitialize:function(){for(var e=r.pop();null!=e;e=r.pop())e.deleteScripts()}}),A=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),B=function(){return(B=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},M="change keyup compositionend setcontent CommentChange",$=function(e){function t(t){var r,o,n,a=e.call(this,t)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var e=a.editor,t=a.props.value;e&&t&&t!==a.currentContent&&e.undoManager.ignore(function(){if(e.setContent(t),a.valueCursor&&(!a.inline||e.hasFocus()))try{e.selection.moveToBookmark(a.valueCursor)}catch(e){}}),a.rollbackTimer=void 0},a.handleBeforeInput=function(e){if(void 0!==a.props.value&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch(e){}},a.handleBeforeInputSpecial=function(e){("Enter"===e.key||"Backspace"===e.key||"Delete"===e.key)&&a.handleBeforeInput(e)},a.handleEditorChange=function(e){var t=a.editor;if(t&&t.initialized){var r=t.getContent();void 0===a.props.value||a.props.value===r||!1===a.props.rollback||a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,"number"==typeof a.props.rollback?a.props.rollback:200)),r!==a.currentContent&&(a.currentContent=r,w(a.props.onEditorChange)&&a.props.onEditorChange(r,t))}},a.handleEditorChangeSpecial=function(e){("Backspace"===e.key||"Delete"===e.key)&&a.handleEditorChange(e)},a.initialise=function(e){void 0===e&&(e=0);var t,r,o,n=a.elementRef.current;if(n){if(!D(n)){if(0===e)setTimeout(function(){return a.initialise(1)},1);else if(e<100)setTimeout(function(){return a.initialise(e+1)},100);else throw Error("tinymce can only be initialised when in a document");return}var i,s,l=O(a.view),d=B(B(B(B({},a.props.init),{selector:void 0,target:n,disabled:a.props.disabled,readonly:a.props.readonly,inline:a.inline,plugins:(i=null==(t=a.props.init)?void 0:t.plugins,s=a.props.plugins,P(i).concat(P(s))),toolbar:null!=(r=a.props.toolbar)?r:null==(o=a.props.init)?void 0:o.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(e){a.editor=e,a.bindHandlers({}),a.inline&&!S(n)&&e.once("PostRender",function(t){e.setContent(a.getInitialValue(),{no_events:!0})}),a.props.init&&w(a.props.init.setup)&&a.props.init.setup(e),a.props.disabled&&(F(a.editor)?a.editor.options.set("disabled",a.props.disabled):a.editor.mode.set("readonly"))},init_instance_callback:function(e){var t,r=a.getInitialValue();a.currentContent=null!=(t=a.currentContent)?t:e.getContent(),a.currentContent!==r&&(a.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1)),a.props.init&&w(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(e)}});a.inline||(n.style.visibility=""),S(n)&&(n.value=a.getInitialValue()),l.init(d)}},a.id=a.props.id||E("tiny-react"),a.elementRef=i.createRef(),a.inline=null!=(n=null!=(r=a.props.inline)?r:null==(o=a.props.init)?void 0:o.inline)&&n,a.boundHandlers={},a}return A(t,e),Object.defineProperty(t.prototype,"view",{get:function(){var e,t;return null!=(t=null==(e=this.elementRef.current)?void 0:e.ownerDocument.defaultView)?t:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t,r,o=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!=(t=this.currentContent)?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){if(!o.inline||n.hasFocus())try{e=n.selection.getBookmark(3)}catch(e){}var e,t=o.valueCursor;if(n.setContent(o.props.value),!o.inline||n.hasFocus())for(var r=0,a=[e,t];r<a.length;r++){var i=a[r];if(i)try{n.selection.moveToBookmark(i),o.valueCursor=i;break}catch(e){}}})}if(this.props.readonly!==e.readonly){var a=null!=(r=this.props.readonly)&&r;_(this.editor,a?"readonly":"design")}this.props.disabled!==e.disabled&&(F(this.editor)?this.editor.options.set("disabled",this.props.disabled):_(this.editor,this.props.disabled?"readonly":"design"))}},t.prototype.componentDidMount=function(){var e,t,r,o,n,a=this;null!==C(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null==(t=(e=this.props).onScriptsLoadError)||t.call(e,Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null==(r=this.elementRef.current)?void 0:r.ownerDocument)&&z.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!=(n=null==(o=this.props.scriptLoading)?void 0:o.delay)?n:0,function(){var e,t;null==(t=(e=a.props).onScriptsLoad)||t.call(e),a.initialise()},function(e){var t,r;null==(r=(t=a.props).onScriptsLoadError)||r.call(t,e)})},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(M,this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(r){t.off(r,e.boundHandlers[r])}),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var e=this.props.tagName;return i.createElement(void 0===e?"div":e,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return i.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var e,t,r=null==(e=this.props.scriptLoading)?void 0:e.async,o=null==(t=this.props.scriptLoading)?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:r,defer:o}]:this.props.tinymceScriptSrc.map(function(e){return"string"==typeof e?{src:e,async:r,defer:o}:e});var n=this.props.cloudChannel,a=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(a,"/tinymce/").concat(n,"/tinymce.min.js"),async:r,defer:o}]},t.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){r=this.editor,o=this.props,n=this.boundHandlers,N(function(e){return t.props[e]},r.on.bind(r),r.off.bind(r),function(e,t){return function(o){var n;return null==(n=e(t))?void 0:n(o,r)}},e,o,n);var r,o,n,a=function(e){return void 0!==e.onEditorChange||void 0!==e.value},i=a(e),s=a(this.props);!i&&s?(this.editor.on(M,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):i&&!s&&(this.editor.off(M,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=v,t.defaultProps={cloudChannel:"8"},t}(i.Component);let U=(0,i.forwardRef)(({content:e,onContentChange:t,suggestions:r=[],selectedSuggestionIndex:o=null,className:n},s)=>{let l=(0,i.useRef)(null);return(0,i.useImperativeHandle)(s,()=>({highlightText:e=>{l.current&&H(l.current,e)},replaceText:(e,t)=>{l.current&&W(l.current,e,t)},getEditor:()=>l.current,getContent:()=>l.current?.getContent()||""})),(0,i.useEffect)(()=>{l.current&&e!==l.current.getContent()&&l.current.setContent(e)},[e]),(0,i.useEffect)(()=>{if(l.current&&null!==o&&r[o]){let e=r[o],t=e.text||e.original||"";t&&H(l.current,t)}},[o,r]),(0,a.jsx)("div",{className:"force-dark-mode",children:(0,a.jsx)(m.Card,{className:`border-zinc-700 bg-gradient-to-b from-zinc-900 to-zinc-950 shadow-xl ${n||""}`,children:(0,a.jsx)(m.CardContent,{className:"p-0",children:(0,a.jsx)($,{apiKey:"jwe3v9sshhzgble0jczqr1lbi19c59cxsucej3931qp23ak7",onInit:(e,t)=>{l.current=t},value:e,onEditorChange:e=>{t(e)},init:{height:"70vh",menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount","nonbreaking","pagebreak","save","directionality","emoticons","codesample"],toolbar:["undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | forecolor backcolor | superscript subscript","alignleft aligncenter alignright alignjustify | outdent indent | bullist numlist | link image media table | charmap emoticons pagebreak","searchreplace visualblocks code codesample | insertdatetime nonbreaking anchor | fullscreen preview | removeformat help"],toolbar_mode:"sliding",toolbar_sticky:!0,toolbar_sticky_offset:0,content_style:`
                body { 
                  font-family: -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif; 
                  font-size: 16px; 
                  padding: 30px; 
                  line-height: 1.7;
                  color: #f1f5f9;
                  background-color: #18181b;
                  max-width: 1100px;
                  margin: 0 auto;
                }
                h1, h2, h3, h4, h5, h6 {
                  margin-top: 1.5em;
                  margin-bottom: 0.5em;
                  font-weight: 600;
                  line-height: 1.3;
                  color: #f8fafc;
                }
                p {
                  margin-bottom: 1em;
                  color: #f1f5f9;
                  line-height: 1.6;
                }
                a {
                  color: #818cf8;
                  text-decoration: none;
                  border-bottom: 1px solid rgba(129, 140, 248, 0.3);
                  transition: border-color 0.2s ease;
                }
                a:hover {
                  border-bottom-color: #818cf8;
                }
                /* Table styling for better formatting */
                table {
                  border-collapse: collapse;
                  width: 100%;
                  margin: 1.5rem 0;
                  border: 1px solid #3f3f46;
                  background-color: #27272a;
                  overflow: hidden;
                  border-radius: 8px;
                }
                th {
                  background-color: #3f3f46;
                  color: #f8fafc;
                  font-weight: 600;
                  padding: 12px 16px;
                  text-align: left;
                  border: 1px solid #52525b;
                }
                td {
                  padding: 10px 16px;
                  border: 1px solid #3f3f46;
                  color: #e4e4e7;
                  vertical-align: top;
                }
                tr:nth-child(even) {
                  background-color: #2d2d31;
                }
                tr:hover {
                  background-color: #35353a;
                }
                /* Image styling for proper display */
                img {
                  max-width: 100%;
                  height: auto;
                  display: block;
                  margin: 1.5rem auto;
                  border-radius: 8px;
                  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
                }
                /* List styling */
                ul, ol {
                  margin: 1rem 0;
                  padding-left: 2rem;
                  color: #f1f5f9;
                }
                li {
                  margin: 0.5rem 0;
                  line-height: 1.6;
                }
                /* Code blocks */
                pre, code {
                  background-color: #27272a;
                  border: 1px solid #3f3f46;
                  border-radius: 6px;
                  padding: 0.2em 0.4em;
                  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
                  font-size: 0.9em;
                  color: #a5f3fc;
                }
                pre {
                  padding: 1em;
                  overflow-x: auto;
                  margin: 1rem 0;
                }
                /* Blockquote styling */
                blockquote {
                  border-left: 4px solid #818cf8;
                  padding-left: 1rem;
                  margin: 1rem 0;
                  color: #d1d5db;
                  font-style: italic;
                  background-color: rgba(129, 140, 248, 0.05);
                  padding: 1rem;
                  border-radius: 4px;
                }
              `,skin:"oxide-dark",content_css:"dark",branding:!1,promotion:!1,init_instance_callback:e=>{let t=document.createElement("style");t.textContent=`
                  .tox-promotion,
                  .tox-promotion-button,
                  .tox-statusbar__branding {
                    display: none !important;
                  }
                  /* Force dark mode always - beautiful enhanced styling */
                  .force-dark-mode .tox .tox-menubar,
                  .force-dark-mode .tox .tox-toolbar,
                  .force-dark-mode .tox .tox-toolbar__primary {
                    background: linear-gradient(135deg, #1e1e24 0%, #27272a 100%) !important;
                    border-bottom: 1px solid rgba(124, 58, 237, 0.2) !important;
                  }
                  .force-dark-mode .tox .tox-toolbar__group,
                  .force-dark-mode .tox .tox-split-button,
                  .force-dark-mode .tox .tox-tbtn {
                    color: #e4e4e7 !important;
                  }
                  .force-dark-mode .tox .tox-tbtn__select-label,
                  .force-dark-mode .tox .tox-tbtn--select {
                    color: #e4e4e7 !important;
                    font-weight: 500 !important;
                  }
                  /* Enhanced menubar styling */
                  .force-dark-mode .tox .tox-mbtn {
                    color: #f4f4f5 !important;
                    font-weight: 500 !important;
                    padding: 8px 14px !important;
                    border-radius: 6px !important;
                    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
                  }
                  .force-dark-mode .tox .tox-mbtn:hover {
                    background: rgba(124, 58, 237, 0.15) !important;
                    transform: translateY(-1px) !important;
                  }
                  /* Enhanced toolbar button styling */
                  .force-dark-mode .tox .tox-tbtn {
                    border-radius: 6px !important;
                    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
                  }
                  .force-dark-mode .tox .tox-tbtn:hover {
                    background: rgba(124, 58, 237, 0.15) !important;
                    transform: scale(1.05) !important;
                  }
                  .force-dark-mode .tox .tox-tbtn--enabled {
                    background: rgba(124, 58, 237, 0.2) !important;
                  }
                  .force-dark-mode .tox .tox-tbtn svg {
                    fill: #d4d4d8 !important;
                  }
                  .force-dark-mode .tox .tox-tbtn:hover svg,
                  .force-dark-mode .tox .tox-tbtn--enabled svg {
                    fill: #c4b5fd !important;
                  }
                  /* Group separators */
                  .force-dark-mode .tox .tox-toolbar__group {
                    border-right: 1px solid rgba(124, 58, 237, 0.2) !important;
                  }
                  /* Editor container */
                  .force-dark-mode .tox-tinymce {
                    border: 1px solid rgba(124, 58, 237, 0.3) !important;
                    border-radius: 12px !important;
                    overflow: hidden !important;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(124, 58, 237, 0.1) !important;
                  }
                  /* Dropdowns and panels */
                  .force-dark-mode .tox .tox-collection,
                  .force-dark-mode .tox .tox-menu,
                  .force-dark-mode .tox .tox-dialog {
                    background: #27272a !important;
                    border: 1px solid rgba(124, 58, 237, 0.3) !important;
                  }
                `,document.head.appendChild(t)},resize:!0,statusbar:!1,paste_as_text:!1,paste_auto_cleanup_on_paste:!0,paste_retain_style_properties:"all",paste_merge_formats:!0,convert_urls:!1,font_size_formats:"8pt 10pt 12pt 14pt 16pt 18pt 24pt 28pt 36pt 48pt",font_family_formats:"System Font=-apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, sans-serif; Arial=arial,helvetica,sans-serif; Times New Roman=times new roman,times,serif; Courier New=courier new,courier,monospace; Georgia=georgia,palatino,serif; Verdana=verdana,geneva,sans-serif",table_use_colgroups:!0,table_resize_bars:!0,table_default_attributes:{border:"1"},table_default_styles:{"border-collapse":"collapse",width:"100%",border:"1px solid #3f3f46","background-color":"#27272a"},table_cell_default_styles:{padding:"10px 16px",border:"1px solid #3f3f46","vertical-align":"top"},table_header_default_styles:{"background-color":"#3f3f46","font-weight":"600",padding:"12px 16px"},image_advtab:!0,image_dimensions:!0,image_class_list:[{title:"Responsive",value:"img-responsive"},{title:"Full Width",value:"img-full-width"},{title:"Center",value:"img-center"}],setup:e=>{e.addCommand("highlightText",(t,r)=>{r&&H(e,r)}),e.addCommand("replaceText",(t,r)=>{r?.original&&r?.replacement&&W(e,r.original,r.replacement)})}}},"dark")})})})});function H(e,t){if(t&&t.trim())try{e.getBody().querySelectorAll("mark.suggestion-highlight").forEach(e=>{let t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}});let r=e.getContent({format:"text"}),o=t.trim().toLowerCase(),n=r.toLowerCase().indexOf(o);if(-1===n)return void console.warn("Text not found in editor:",t);let a=e.getContent(),i=document.createElement("div");i.innerHTML=a;let s=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,null),l=null,d=!1;for(;(l=s.nextNode())&&!d;){let e=l,t=e.textContent||"",r=t.toLowerCase();t.length;let n=r.indexOf(o);if(-1!==n){let r=t.substring(0,n),a=t.substring(n,n+o.length),i=t.substring(n+o.length),s=document.createDocumentFragment();r&&s.appendChild(document.createTextNode(r));let l=document.createElement("mark");l.className="suggestion-highlight",l.setAttribute("style","background-color: #fef08a; color: #000; padding: 2px 4px; border-radius: 3px;"),l.textContent=a,s.appendChild(l),i&&s.appendChild(document.createTextNode(i)),e.parentNode?.replaceChild(s,e),d=!0}}d&&(e.setContent(i.innerHTML),setTimeout(()=>{let t=e.getBody().querySelector("mark.suggestion-highlight");t&&(e.selection.select(t),e.selection.scrollIntoView(),t.scrollIntoView({behavior:"smooth",block:"center"}))},100))}catch(e){console.error("Error highlighting text in TinyMCE:",e)}}function W(e,t,r){if(t&&t.trim())try{e.getBody().querySelectorAll("mark.suggestion-highlight").forEach(e=>{let t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}});let o=e.getContent(),n=e.getContent({format:"text"}),a=t.trim().toLowerCase(),i=n.toLowerCase().indexOf(a);if(-1===i)return void console.warn("Text not found in editor for replacement:",t);let s=document.createElement("div");s.innerHTML=o;let l=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null),d=null,c=!1;for(;(d=l.nextNode())&&!c;){let e=d,t=e.textContent||"",o=t.toLowerCase();t.length;let n=o.indexOf(a);if(-1!==n){let o=t.substring(0,n),i=t.substring(n+a.length),s=document.createDocumentFragment();o&&s.appendChild(document.createTextNode(o)),s.appendChild(document.createTextNode(r)),i&&s.appendChild(document.createTextNode(i)),e.parentNode?.replaceChild(s,e),c=!0}}c&&e.setContent(s.innerHTML)}catch(e){console.error("Error replacing text in TinyMCE:",e)}}U.displayName="TinyMCEEditor";let V=(0,c.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),J=(0,c.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),K=(0,c.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function q({suggestion:e,index:t,isSelected:r,onSelect:o,onApply:n,isApplying:i=!1}){return e.isApplied?(0,a.jsx)(m.Card,{className:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950/30",children:(0,a.jsx)(m.CardContent,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[(0,a.jsx)(V,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Applied"})]})})}):(0,a.jsx)(m.Card,{className:`border cursor-pointer transition-all hover:shadow-md ${r?"border-emerald-500 dark:border-emerald-600 bg-emerald-50 dark:bg-emerald-950/30 shadow-lg":"border-zinc-200 dark:border-zinc-700"}`,onClick:o,children:(0,a.jsxs)(m.CardContent,{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(e.severity){case"critical":return(0,a.jsx)(J,{className:"h-4 w-4 text-red-500"});case"warning":return(0,a.jsx)(J,{className:"h-4 w-4 text-yellow-500"});default:return(0,a.jsx)(K,{className:"h-4 w-4 text-blue-500"})}})(),(0,a.jsx)(g.Badge,{variant:(()=>{switch(e.severity){case"critical":return"destructive";case"warning":return"default";default:return"secondary"}})(),className:"text-xs",children:e.severity})]}),(0,a.jsx)(g.Badge,{className:`text-xs ${(()=>{switch(e.category){case"FINRA":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"SEC":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Grammar":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})()}`,children:e.category})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.explanation}),(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,a.jsxs)("div",{className:"p-2 bg-red-50 dark:bg-red-950/30 rounded border border-red-200 dark:border-red-800",children:[(0,a.jsx)("p",{className:"text-red-700 dark:text-red-300 font-medium mb-1",children:"Original:"}),(0,a.jsx)("p",{className:"text-red-900 dark:text-red-100",children:e.originalText})]}),(0,a.jsxs)("div",{className:"p-2 bg-green-50 dark:bg-green-950/30 rounded border border-green-200 dark:border-green-800",children:[(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300 font-medium mb-1",children:"Suggested:"}),(0,a.jsx)("p",{className:"text-green-900 dark:text-green-100",children:e.suggestedText})]})]}),e.page&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Page ",e.page]}),(0,a.jsx)(f.Button,{variant:"default",size:"sm",className:"w-full",onClick:e=>{e.stopPropagation(),n()},disabled:i,children:i?"Applying...":"Apply Change"})]})})}var X=e.i(23750),G=e.i(10708),Y=e.i(81947),Z=e.i(81140),Q=e.i(20783),ee=e.i(26330),et=e.i(10772),er=e.i(53660),eo=e.i(74606),en=e.i(96626);e.i(74080);var ea=Symbol("radix.slottable");function ei(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ea}var es=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,o;let n,s,l,d=(o=r=`Primitive.${t}`,(n=i.forwardRef((e,t)=>{let{children:r,...o}=e;if(i.isValidElement(r)){var n;let e,a,s=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),l=function(e,t){let r={...t};for(let o in t){let n=e[o],a=t[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[o]=n):"style"===o?r[o]={...n,...a}:"className"===o&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(o,r.props);return r.type!==i.Fragment&&(l.ref=t?(0,Q.composeRefs)(t,s):s),i.cloneElement(r,l)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName=`${o}.SlotClone`,s=n,(l=i.forwardRef((e,t)=>{let{children:r,...o}=e,n=i.Children.toArray(r),l=n.find(ei);if(l){let e=l.props.children,r=n.map(t=>t!==l?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,a.jsx)(s,{...o,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,a.jsx)(s,{...o,ref:t,children:r})})).displayName=`${r}.Slot`,l),c=i.forwardRef((e,r)=>{let{asChild:o,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o?d:t,{...n,ref:r})});return c.displayName=`Primitive.${t}`,{...e,[t]:c}},{}),el=e.i(69340),ed=Symbol("radix.slottable");function ec(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ed}var eu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,o;let n,s,l,d=(o=r=`Primitive.${t}`,(n=i.forwardRef((e,t)=>{let{children:r,...o}=e;if(i.isValidElement(r)){var n;let e,a,s=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),l=function(e,t){let r={...t};for(let o in t){let n=e[o],a=t[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[o]=n):"style"===o?r[o]={...n,...a}:"className"===o&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(o,r.props);return r.type!==i.Fragment&&(l.ref=t?(0,Q.composeRefs)(t,s):s),i.cloneElement(r,l)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName=`${o}.SlotClone`,s=n,(l=i.forwardRef((e,t)=>{let{children:r,...o}=e,n=i.Children.toArray(r),l=n.find(ec);if(l){let e=l.props.children,r=n.map(t=>t!==l?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,a.jsx)(s,{...o,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,a.jsx)(s,{...o,ref:t,children:r})})).displayName=`${r}.Slot`,l),c=i.forwardRef((e,r)=>{let{asChild:o,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o?d:t,{...n,ref:r})});return c.displayName=`Primitive.${t}`,{...e,[t]:c}},{}),ep=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ef=i.forwardRef((e,t)=>(0,a.jsx)(eu.span,{...e,ref:t,style:{...ep,...e.style}}));ef.displayName="VisuallyHidden";var[em,eg]=function(e,t=[]){let r=[],o=()=>{let t=r.map(e=>i.createContext(e));return function(r){let o=r?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return o.scopeName=e,[function(t,o){let n=i.createContext(o),s=r.length;r=[...r,o];let l=t=>{let{scope:r,children:o,...l}=t,d=r?.[e]?.[s]||n,c=i.useMemo(()=>l,Object.values(l));return(0,a.jsx)(d.Provider,{value:c,children:o})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[s]||n,d=i.useContext(l);if(d)return d;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((t,{useScope:r,scopeName:o})=>{let n=r(e)[`__scope${o}`];return{...t,...n}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}(o,...t)]}("Tooltip",[er.createPopperScope]),eh=(0,er.createPopperScope)(),ex="TooltipProvider",ey="tooltip.open",[eb,ev]=em(ex),eC=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:s}=e,l=i.useRef(!0),d=i.useRef(!1),c=i.useRef(0);return i.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,a.jsx)(eb,{scope:t,isOpenDelayedRef:l,delayDuration:r,onOpen:i.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,o)},[o]),isPointerInTransitRef:d,onPointerInTransitChange:i.useCallback(e=>{d.current=e},[]),disableHoverableContent:n,children:s})};eC.displayName=ex;var ew="Tooltip",[ek,ej]=em(ew),eN=e=>{let{__scopeTooltip:t,children:r,open:o,defaultOpen:n,onOpenChange:s,disableHoverableContent:l,delayDuration:d}=e,c=ev(ew,e.__scopeTooltip),u=eh(t),[p,f]=i.useState(null),m=(0,et.useId)(),g=i.useRef(0),h=l??c.disableHoverableContent,x=d??c.delayDuration,y=i.useRef(!1),[b,v]=(0,el.useControllableState)({prop:o,defaultProp:n??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(ey))):c.onClose(),s?.(e)},caller:ew}),C=i.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),w=i.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y.current=!1,v(!0)},[v]),k=i.useCallback(()=>{window.clearTimeout(g.current),g.current=0,v(!1)},[v]),j=i.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{y.current=!0,v(!0),g.current=0},x)},[x,v]);return i.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),(0,a.jsx)(er.Root,{...u,children:(0,a.jsx)(ek,{scope:t,contentId:m,open:b,stateAttribute:C,trigger:p,onTriggerChange:f,onTriggerEnter:i.useCallback(()=>{c.isOpenDelayedRef.current?j():w()},[c.isOpenDelayedRef,j,w]),onTriggerLeave:i.useCallback(()=>{h?k():(window.clearTimeout(g.current),g.current=0)},[k,h]),onOpen:w,onClose:k,disableHoverableContent:h,children:r})})};eN.displayName=ew;var eT="TooltipTrigger",eE=i.forwardRef((e,t)=>{let{__scopeTooltip:r,...o}=e,n=ej(eT,r),s=ev(eT,r),l=eh(r),d=i.useRef(null),c=(0,Q.useComposedRefs)(t,d,n.onTriggerChange),u=i.useRef(!1),p=i.useRef(!1),f=i.useCallback(()=>u.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),(0,a.jsx)(er.Anchor,{asChild:!0,...l,children:(0,a.jsx)(es.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...o,ref:c,onPointerMove:(0,Z.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(p.current||s.isPointerInTransitRef.current||(n.onTriggerEnter(),p.current=!0))}),onPointerLeave:(0,Z.composeEventHandlers)(e.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:(0,Z.composeEventHandlers)(e.onPointerDown,()=>{n.open&&n.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:(0,Z.composeEventHandlers)(e.onFocus,()=>{u.current||n.onOpen()}),onBlur:(0,Z.composeEventHandlers)(e.onBlur,n.onClose),onClick:(0,Z.composeEventHandlers)(e.onClick,n.onClose)})})});eE.displayName=eT;var eS="TooltipPortal",[eP,eD]=em(eS,{forceMount:void 0}),e_=e=>{let{__scopeTooltip:t,forceMount:r,children:o,container:n}=e,i=ej(eS,t);return(0,a.jsx)(eP,{scope:t,forceMount:r,children:(0,a.jsx)(en.Presence,{present:r||i.open,children:(0,a.jsx)(eo.Portal,{asChild:!0,container:n,children:o})})})};e_.displayName=eS;var eO="TooltipContent",eF=i.forwardRef((e,t)=>{let r=eD(eO,e.__scopeTooltip),{forceMount:o=r.forceMount,side:n="top",...i}=e,s=ej(eO,e.__scopeTooltip);return(0,a.jsx)(en.Presence,{present:o||s.open,children:s.disableHoverableContent?(0,a.jsx)(eA,{side:n,...i,ref:t}):(0,a.jsx)(eR,{side:n,...i,ref:t})})}),eR=i.forwardRef((e,t)=>{let r=ej(eO,e.__scopeTooltip),o=ev(eO,e.__scopeTooltip),n=i.useRef(null),s=(0,Q.useComposedRefs)(t,n),[l,d]=i.useState(null),{trigger:c,onClose:u}=r,p=n.current,{onPointerInTransitChange:f}=o,m=i.useCallback(()=>{d(null),f(!1)},[f]),g=i.useCallback((e,t)=>{let r,o=e.currentTarget,n={x:e.clientX,y:e.clientY},a=function(e,t){let r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,o,n,a)){case a:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw Error("unreachable")}}(n,o.getBoundingClientRect());d(((r=[...function(e,t,r=5){let o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return o}(n,a),...function(e){let{top:t,right:r,bottom:o,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:o},{x:n,y:o}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let o=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(o.y-r.y)>=(e.y-r.y)*(o.x-r.x))t.pop();else break}t.push(o)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let o=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(o.y-t.y)>=(e.y-t.y)*(o.x-t.x))r.pop();else break}r.push(o)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),f(!0)},[f]);return i.useEffect(()=>()=>m(),[m]),i.useEffect(()=>{if(c&&p){let e=e=>g(e,p),t=e=>g(e,c);return c.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[c,p,g,m]),i.useEffect(()=>{if(l){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},o=c?.contains(t)||p?.contains(t),n=!function(e,t){let{x:r,y:o}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let i=t[e],s=t[a],l=i.x,d=i.y,c=s.x,u=s.y;d>o!=u>o&&r<(c-l)*(o-d)/(u-d)+l&&(n=!n)}return n}(r,l);o?m():n&&(m(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,p,l,u,m]),(0,a.jsx)(eA,{...e,ref:s})}),[eI,eL]=em(ew,{isInside:!1}),ez=((t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=ea,t),eA=i.forwardRef((e,t)=>{let{__scopeTooltip:r,children:o,"aria-label":n,onEscapeKeyDown:s,onPointerDownOutside:l,...d}=e,c=ej(eO,r),u=eh(r),{onClose:p}=c;return i.useEffect(()=>(document.addEventListener(ey,p),()=>document.removeEventListener(ey,p)),[p]),i.useEffect(()=>{if(c.trigger){let e=e=>{let t=e.target;t?.contains(c.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,p]),(0,a.jsx)(ee.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,a.jsxs)(er.Content,{"data-state":c.stateAttribute,...u,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,a.jsx)(ez,{children:o}),(0,a.jsx)(eI,{scope:r,isInside:!0,children:(0,a.jsx)(ef,{id:c.contentId,role:"tooltip",children:n||o})})]})})});eF.displayName=eO;var eB="TooltipArrow",eM=i.forwardRef((e,t)=>{let{__scopeTooltip:r,...o}=e,n=eh(r);return eL(eB,r).isInside?null:(0,a.jsx)(er.Arrow,{...n,...o,ref:t})});eM.displayName=eB;var e$=e.i(47163);function eU({delayDuration:e=0,...t}){return(0,a.jsx)(eC,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function eH({...e}){return(0,a.jsx)(eU,{children:(0,a.jsx)(eN,{"data-slot":"tooltip",...e})})}function eW({...e}){return(0,a.jsx)(eE,{"data-slot":"tooltip-trigger",...e})}function eV({className:e,sideOffset:t=0,children:r,...o}){return(0,a.jsx)(e_,{children:(0,a.jsxs)(eF,{"data-slot":"tooltip-content",sideOffset:t,className:(0,e$.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...o,children:[r,(0,a.jsx)(eM,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var eJ=e.i(69074),eK=e.i(31278);function eq({onUploadSuccess:e,onError:t}){let[r,o]=(0,i.useState)(null),[n,s]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[g,h]=(0,i.useState)(null),x=async()=>{if(!r)return void h("Please select a document to upload.");s(!0),h(null);try{let t=new FormData;t.append("file",r),console.log("ðŸ“¤ Uploading file to /api/compliance/analyze...");let o=await fetch("/api/compliance/analyze",{method:"POST",body:t});if(console.log("ðŸ“¥ Response status:",o.status,o.statusText),!o.ok){console.log("âš ï¸ Response is not OK, handling error...");let e={error:"Server Error",details:`Request failed with status ${o.status}: ${o.statusText}`},t={...e};console.log("ðŸ”§ Initialized errorData with defaults:",t);try{console.log("ðŸ“– Attempting to read response body...");let e=o.clone(),r=await e.text();if(console.log("ðŸ“„ Raw error response text:",r),console.log("ðŸ“„ Response text length:",r.length),console.log("ðŸ“„ Response Content-Type:",o.headers.get("content-type")),console.log("ðŸ“„ Text is truthy:",!!r),console.log("ðŸ“„ Trimmed text length:",r?.trim().length),r&&r.trim()){console.log("âœ… Have text content, attempting to parse JSON...");try{let e=JSON.parse(r);console.log("ðŸ“„ Successfully parsed JSON:",e),console.log("ðŸ“„ Parsed type:",typeof e),console.log("ðŸ“„ Parsed keys:",e?Object.keys(e):"null"),e&&"object"==typeof e&&Object.keys(e).length>0?(console.log("âœ… Parsed object has keys"),e.error||e.details||e.message?(console.log("âœ… Found error/details/message in parsed data"),t={error:e.error||"Server error",details:e.details||e.message||"An error occurred"},console.log("âœ… Updated errorData:",t)):(console.warn("âš ï¸ Parsed JSON has no error/details/message fields:",e),t={error:"Server error",details:`Server returned: ${JSON.stringify(e)}`},console.log("âœ… Updated errorData with stringified response:",t))):(console.warn("âš ï¸ Received empty or invalid JSON from server"),t={error:"Empty Response",details:`The server returned an empty response (HTTP ${o.status}). This may indicate an unhandled error in the API.`},console.log("âœ… Updated errorData with empty response message:",t))}catch(e){console.error("âŒ JSON parse error:",e),console.log("Using raw text as error details"),t={error:"Invalid Response Format",details:r.length>500?r.substring(0,500)+"...":r},console.log("âœ… Updated errorData with raw text:",t)}}else console.warn("âš ï¸ Empty error response body (no text)"),t={error:"Empty Response",details:`The server returned an error (HTTP ${o.status}) but no response body. Please check the server logs.`},console.log("âœ… Updated errorData for empty body:",t)}catch(e){console.error("âŒ Failed to read error response:",e),console.log("Keeping default errorData")}t&&"object"==typeof t&&0!==Object.keys(t).length||(console.error("ðŸš¨ CRITICAL: errorData is empty or invalid, resetting to default"),t={...e}),t.error||t.details||(console.error("ðŸš¨ CRITICAL: errorData has no error or details, adding defaults"),t={...e}),console.error("âŒ Final error data:",JSON.stringify(t)),console.error("âŒ Final error data keys:",Object.keys(t)),console.error("âŒ Final error data.error:",t.error),console.error("âŒ Final error data.details:",t.details);let r="Unknown error occurred";throw r=t.error&&t.details?`${t.error}: ${t.details}`:t.error?t.error:t.details?t.details:`Failed to analyze document (HTTP ${o.status}: ${o.statusText})`,console.error("âŒ Final error message:",r),Error(r)}let n=await o.json();console.log("âœ… Analysis complete! Response data:",n),e(n)}catch(r){let e=r instanceof Error?r.message:"Failed to process the file.";h(e),t(e)}finally{s(!1)}},y=async()=>{if(!r)return void h("Please select a PDF file to convert.");if(!r.name.toLowerCase().endsWith(".pdf"))return void h("Only PDF files can be converted to Word.");c(!0),h(null);try{p.toast.info("Converting PDF to Word...",{description:"This may take a few moments."});let t=new FormData;t.append("file",r),console.log("ðŸ“¤ Converting PDF to DOCX via /api/convert/pdf-to-docx...");let o=await fetch("/api/convert/pdf-to-docx",{method:"POST",body:t});if(console.log("ðŸ“¥ Conversion response status:",o.status,o.statusText),!o.ok){let e="Failed to convert PDF to Word",t="";try{let r=o.headers.get("content-type"),n=await o.text();if(r&&r.includes("application/json")&&n){let r=JSON.parse(n);e=r.message||r.error||e,(t=r.details||"").includes("Network error")||t.includes("timeout")?(e="Conversion timeout",t="The conversion is taking too long. Please try again or use a smaller PDF."):t.includes("credentials")?(e="Configuration error",t="PDF conversion service needs configuration. Please contact support."):r.fallbackError&&(e="Cannot convert this PDF",t="This PDF may be encrypted, corrupted, or in an unsupported format.")}else n&&(t=n.substring(0,200))}catch(e){console.error("Error reading response:",e)}throw p.toast.error(e,{description:t,duration:7e3}),Error(e)}let n=await o.blob();console.log("âœ… PDF converted to DOCX, blob size:",n.size);let a=new File([n],r.name.replace(/\.pdf$/i,".docx"),{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});p.toast.success("PDF converted to Word!",{description:"Now analyzing the document for compliance..."});let i=new FormData;i.append("file",a),console.log("ðŸ“¤ Uploading converted DOCX to /api/compliance/analyze...");let s=await fetch("/api/compliance/analyze",{method:"POST",body:i});if(console.log("ðŸ“¥ Analysis response status:",s.status,s.statusText),!s.ok){let e={...{error:"Analysis Error",details:`Request failed with status ${s.status}: ${s.statusText}`}};try{let t=await s.text();if(t&&t.trim())try{let r=JSON.parse(t);e=r&&(r.error||r.details||r.message)?{error:r.error||"Server error",details:r.details||r.message||"An error occurred"}:{error:"Server error",details:`Server returned: ${JSON.stringify(r)}`}}catch(r){e={error:"Invalid Response Format",details:t.length>500?t.substring(0,500)+"...":t}}else e={error:"Empty Response",details:`The server returned an error (HTTP ${s.status}) but no response body.`}}catch(e){console.error("Failed to read error response:",e)}let t=e.error&&e.details?`${e.error}: ${e.details}`:e.error||e.details||`Failed to analyze document (HTTP ${s.status})`;throw Error(t)}let l=await s.json();console.log("âœ… Analysis complete! Response data:",l),p.toast.success("Conversion and analysis complete!"),e(l)}catch(r){let e=r instanceof Error?r.message:"Failed to convert PDF to Word.";console.error("âŒ Conversion error:",e),h(e),t(e),p.toast.error("Conversion failed",{description:e})}finally{c(!1)}};return(0,a.jsxs)(m.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsxs)(m.CardTitle,{className:"text-gray-900 dark:text-gray-50 flex items-center gap-2",children:[(0,a.jsx)(d.FileText,{className:"h-5 w-5"}),"Upload Document for Compliance Review"]})}),(0,a.jsxs)(m.CardContent,{className:"space-y-4",children:[g&&(0,a.jsxs)(Y.Alert,{variant:"destructive",children:[(0,a.jsx)(Y.AlertTitle,{children:"Error"}),(0,a.jsx)(Y.AlertDescription,{children:g})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(G.Label,{htmlFor:"file-upload",className:"text-gray-700 dark:text-gray-300",children:"Select Document (PDF or DOCX)"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(X.Input,{id:"file-upload",type:"file",accept:".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:e=>{let t=e.target.files?.[0]||null;if(o(t),h(null),t){let e=t.name.toLowerCase();e.endsWith(".docx")||e.endsWith(".pdf")||(h("Please select a .docx or .pdf file"),o(null))}},disabled:n,className:"flex-1"}),(0,a.jsxs)(f.Button,{onClick:x,disabled:!r||n,className:"whitespace-nowrap",children:[(0,a.jsx)(eJ.Upload,{className:"h-4 w-4 mr-2"}),n?"Analyzing...":"Analyze"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: PDF, DOCX (up to 10MB). Analysis checks for FINRA, SEC, and grammar compliance."})]}),r&&!g&&(0,a.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)("span",{className:"font-medium",children:"Selected:"})," ",r.name]}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Size: ",(r.size/1024/1024).toFixed(2)," MB"]})]}),r.name.toLowerCase().endsWith(".pdf")&&(0,a.jsx)(eU,{children:(0,a.jsxs)(eH,{children:[(0,a.jsx)(eW,{asChild:!0,children:(0,a.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:y,disabled:l||n,className:"ml-2 h-8 w-8 p-0",children:l?(0,a.jsx)(eK.Loader2,{className:"h-4 w-4 animate-spin text-blue-600 dark:text-blue-400"}):(0,a.jsx)(u,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})})}),(0,a.jsx)(eV,{children:(0,a.jsx)("p",{children:"Convert PDF to Word for editing"})})]})})]})})]})]})}var eX=e.i(78681);let eG=(0,e.i(70703).default)(()=>e.A(30272),{loadableGenerated:{modules:[86864]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-zinc-100 dark:bg-zinc-950",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(eK.Loader2,{className:"h-8 w-8 animate-spin text-zinc-600 dark:text-zinc-400"}),(0,a.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Loading PDF viewer..."})]})})});function eY(){let[t,r]=(0,i.useState)(null),[o,n]=(0,i.useState)(""),[c,x]=(0,i.useState)(null),[y,b]=(0,i.useState)(null),[v,C]=(0,i.useState)(""),[w,k]=(0,i.useState)([]),[j,N]=(0,i.useState)(null),[T,E]=(0,i.useState)(null),[S,P]=(0,i.useState)(!0),[D,_]=(0,i.useState)(null),O=(0,i.useRef)(null),F=w.map(e=>({issue:e.explanation,page:e.page||1,text:e.originalText,suggestion:e.suggestedText,original:e.originalText,explanation:e.explanation,category:e.category.toLowerCase(),severity:e.severity})),R=async e=>{let r=w[e];if(r&&t){if("pdf"===c){p.toast.info("Convert to edit",{description:'Click "Convert to Word" to enable editing and apply suggestions.'}),k(t=>t.map((t,r)=>r===e?{...t,isApplied:!0}:t));return}if(O.current){E(e);try{let o=await fetch("/api/compliance/apply-change",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:t,originalText:r.originalText,suggestedText:r.suggestedText,suggestionId:r.id,fileType:c,documentData:y||void 0})});if(!o.ok)throw Error("Failed to apply change");await o.json(),O.current.replaceText(r.originalText,r.suggestedText);let n=O.current.getContent();C(n),k(t=>t.map((t,r)=>r===e?{...t,isApplied:!0}:t)),p.toast.success("Change applied successfully"),j===e&&N(null)}catch(e){console.error("Error applying suggestion:",e),p.toast.error("Failed to apply change")}finally{E(null)}}}},I=async()=>{if(!O.current)return void p.toast.error("No content to analyze");let e=p.toast.loading("Analyzing content for compliance...");try{let t=O.current.getContent(),r=document.createElement("div");r.innerHTML=t;let o=r.textContent||r.innerText||"";console.log("ðŸ“ Analyzing editor content...",{htmlLength:t.length,textLength:o.length,textPreview:o.substring(0,200)});let n=new Blob([o],{type:"text/plain"}),a=new File([n],"editor-content.txt",{type:"text/plain"}),i=new FormData;i.append("file",a),i.append("isPlainText","true");let s=await fetch("/api/compliance/analyze",{method:"POST",body:i});if(!s.ok)throw Error("Failed to analyze content");let l=await s.json();console.log("âœ… Analysis complete:",{suggestionsCount:l.suggestions?.length||0}),k(l.suggestions.map((e,t)=>({...e,id:`sugg-${t}`}))),p.toast.success(`Analysis complete! Found ${l.suggestions.length} suggestions.`,{id:e})}catch(r){console.error("Analysis error:",r);let t=r instanceof Error?r.message:"Unknown error";p.toast.error("Failed to analyze content",{description:t,id:e})}},L=async()=>{if("pdf"!==c||!y)return void p.toast.error("PDF not available for conversion");let t=p.toast.loading("Converting PDF to Word format...");try{console.log("ðŸ“¥ Converting PDF to editable format...");let r=await fetch(y),n=await r.blob(),a=new FormData;a.append("file",n,o||"document.pdf");let i=await fetch("/api/convert/pdf-to-docx",{method:"POST",body:a});if(!i.ok){let e=await i.text();console.error("âŒ Conversion API error:",e);let r="Conversion failed",o="";try{let t=JSON.parse(e);r=t.message||t.error||r,(o=t.details||"").includes("Network error")||o.includes("timeout")?(r="Network timeout - conversion taking too long",o="The PDF conversion service is temporarily slow. Please try again, or try with a smaller PDF file."):o.includes("credentials")?(r="Configuration error",o="Please contact support - PDF conversion service needs configuration."):t.fallbackError&&(r="Unable to convert this PDF",o="This PDF may be encrypted, corrupted, or in an unsupported format. Please try a different PDF file.")}catch(t){r="Conversion failed",o=e.substring(0,200)}throw p.toast.error(r,{description:o,duration:7e3,id:t}),Error(r)}console.log("âœ… Conversion successful, loading into editor...");let s=await i.blob(),l=await e.A(84934),d=await s.arrayBuffer(),c=await l.convertToHtml({arrayBuffer:d},{styleMap:["p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Title'] => h1.title:fresh","r[style-name='Strong'] => strong","r[style-name='Emphasis'] => em","p[style-name='List Paragraph'] => p.list-paragraph:fresh"],includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0,convertImage:l.images.imgElement(e=>e.read("base64").then(t=>({src:`data:${e.contentType};base64,${t}`,style:"max-width: 100%; height: auto; display: block; margin: 1rem auto;"}))),transformDocument:l.transforms.paragraph(e=>e.alignment?{...e,styleId:e.styleId,styleName:e.styleName}:e)}),u=c.value;u=u.replace(/<table([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<table${t} style="border-collapse: collapse; width: 100%; margin: 1.5rem 0; border: 1px solid #3f3f46; background-color: #27272a;">`).replace(/<td([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<td${t} style="border: 1px solid #3f3f46; padding: 10px 16px; vertical-align: top; color: #e4e4e7;">`).replace(/<th([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<th${t} style="border: 1px solid #52525b; padding: 12px 16px; background-color: #3f3f46; font-weight: 600; text-align: left; color: #f8fafc;">`).replace(/<img([^>]*?)>/gi,(e,t)=>t.includes("style=")?e:`<img${t} style="max-width: 100%; height: auto; display: block; margin: 1.5rem auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);">`).replace(/<p([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<p${t} style="margin: 0.5rem 0; line-height: 1.6;">`).replace(/<ul([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<ul${t} style="margin: 1rem 0; padding-left: 2rem;">`).replace(/<ol([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<ol${t} style="margin: 1rem 0; padding-left: 2rem;">`).replace(/<li([^>]*)>/gi,(e,t)=>t.includes("style=")?e:`<li${t} style="margin: 0.5rem 0; line-height: 1.6;">`),c.messages.length>0&&console.log("Conversion messages:",c.messages),C(u),x("docx"),b(null),p.toast.success('Document converted! Click "Analyze Content" to check compliance.',{id:t,duration:5e3})}catch(e){console.error("Conversion error:",e),"Unknown error"===(e instanceof Error?e.message:"Unknown error")&&p.toast.error("Failed to convert PDF",{description:"An unexpected error occurred. Please try again.",id:t})}},z=async()=>{let e=p.toast.loading("Preparing download...");try{if("pdf"===c&&y){p.toast.loading("Converting PDF to Word...",{id:e});let t=await fetch(y),r=await t.blob(),n=new FormData;n.append("file",r,o||"document.pdf");let a=await fetch("/api/convert/pdf-to-docx",{method:"POST",body:n});if(!a.ok){let e=await a.text();console.error("âŒ Download conversion error:",e);let t="Failed to convert PDF to Word";try{let r=JSON.parse(e);r.details&&r.details.includes("timeout")?t="Conversion timeout - please try again or use a smaller file":r.fallbackError&&(t="Unable to convert this PDF - it may be encrypted or corrupted")}catch(e){}throw Error(t)}let i=await a.blob(),s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.download=`${o||"document"}_converted.docx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),p.toast.success("Word document downloaded",{id:e})}else if(O.current){let t=O.current.getContent(),r=await (0,eX.htmlToWordBlob)(t),n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=`${o||"document"}_edited.docx`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n),p.toast.success("Word document downloaded",{id:e})}else p.toast.error("No content to download",{id:e})}catch(r){console.error("Download error:",r);let t=r instanceof Error?r.message:"Failed to download Word document";p.toast.error("Download failed",{description:t,id:e})}},A=async()=>{try{if("pdf"===c&&y){let e=document.createElement("a");e.href=y,e.download=`${o||"document"}.pdf`,document.body.appendChild(e),e.click(),document.body.removeChild(e),p.toast.success("PDF downloaded")}else if(O.current){let e=O.current.getContent(),t=await (0,eX.convertHtmlToPdf)(e),r=document.createElement("a");r.href=t,r.download=`${o||"document"}_edited.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),p.toast.success("Document downloaded as PDF")}else p.toast.error("No content to download")}catch(e){console.error("Download error:",e),p.toast.error("Failed to download PDF")}},B=w.reduce((e,t,r)=>{let o=t.category||"Other";return e[o]||(e[o]=[]),e[o].push({...t,index:r}),e},{}),M=w.length,$=w.filter(e=>e.isApplied).length,H=w.filter(e=>"critical"===e.severity&&!e.isApplied).length;return(0,a.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen bg-zinc-50 dark:bg-zinc-950 p-4 sm:p-6 lg:p-8",children:(0,a.jsxs)("div",{className:"max-w-[1800px] mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-50 mb-2",children:"Financial Compliance Editor"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload documents for FINRA/SEC compliance review and real-time editing"})]}),S&&(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsx)(eq,{onUploadSuccess:e=>{console.log("ðŸ“„ Upload success! Document data:",{documentId:e.documentId,fileType:e.fileType,hasHtmlContent:!!e.htmlContent,htmlContentLength:e.htmlContent?.length||0,extractedTextLength:e.extractedText?.length||0,suggestionsCount:e.suggestions?.length||0,hasPdfUrl:!!e.pdfUrl,fileName:e.fileName}),e.suggestions&&e.suggestions.length>0?console.log("Sample suggestion:",e.suggestions[0]):(console.log("âš ï¸ No suggestions received from API"),console.log("Extracted text preview:",e.extractedText?.substring(0,200))),r(e.documentId),n(e.fileName||"document"),x(e.fileType),C(e.htmlContent),b(e.pdfUrl||null),k(e.suggestions.map((e,t)=>({...e,id:`sugg-${t}`}))),P(!1),p.toast.success(`Document analyzed! Found ${e.suggestions.length} suggestions.`)},onError:e=>{p.toast.error("Upload failed",{description:e})}})}),!S&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(g.Badge,{variant:"outline",className:"text-sm",children:[(0,a.jsx)(d.FileText,{className:"h-3 w-3 mr-1"}),"Document #",t]}),(0,a.jsxs)(g.Badge,{variant:"secondary",className:"text-sm",children:[M," Total Suggestions"]}),(0,a.jsxs)(g.Badge,{variant:"default",className:"text-sm bg-green-600",children:[$," Applied"]}),H>0&&(0,a.jsxs)(g.Badge,{variant:"destructive",className:"text-sm",children:[H," Critical Issues"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["pdf"===c&&(0,a.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:L,className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/40",children:[(0,a.jsx)(u,{className:"h-4 w-4 mr-2 text-blue-600 dark:text-blue-400"}),"Convert to Word"]}),"docx"===c&&(0,a.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:I,className:"bg-purple-50 dark:bg-purple-950/30 border-purple-200 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/40",children:[(0,a.jsx)(d.FileText,{className:"h-4 w-4 mr-2 text-purple-600 dark:text-purple-400"}),"Analyze Content"]}),(0,a.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:z,children:[(0,a.jsx)(l.Download,{className:"h-4 w-4 mr-2"}),"Download as Word"]}),(0,a.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:A,children:[(0,a.jsx)(l.Download,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),(0,a.jsx)(f.Button,{variant:"default",size:"sm",onClick:()=>{r(null),n(""),x(null),b(null),C(""),k([]),N(null),_(null),P(!0)},children:"New Document"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)(m.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:[(0,a.jsx)(m.CardHeader,{className:"pb-3",children:(0,a.jsxs)(m.CardTitle,{className:"text-gray-900 dark:text-gray-50 flex items-center gap-2",children:[(0,a.jsx)(d.FileText,{className:"h-5 w-5"}),"pdf"===c?"PDF Viewer":"Document Editor",c&&(0,a.jsx)(g.Badge,{variant:"secondary",className:"ml-2 text-xs",children:c.toUpperCase()})]})}),(0,a.jsx)(m.CardContent,{className:"p-0",children:"pdf"===c&&y?(0,a.jsx)("div",{className:"h-[calc(100vh-300px)]",children:(0,a.jsx)(eG,{pdfUrl:y,fileName:o,highlightInfo:D,onPageChange:e=>console.log("Page changed:",e),className:"h-full"})}):(0,a.jsx)(U,{ref:O,content:v,onContentChange:C,suggestions:F,selectedSuggestionIndex:j})})]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)(m.Card,{className:"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 sticky top-6",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsxs)(m.CardTitle,{className:"text-gray-900 dark:text-gray-50 flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Compliance Suggestions"}),(0,a.jsx)(g.Badge,{variant:"secondary",children:w.filter(e=>!e.isApplied).length})]})}),(0,a.jsx)(m.CardContent,{className:"max-h-[calc(100vh-200px)] overflow-y-auto space-y-4",children:0===M?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"No suggestions found"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Your document looks compliant!"})]}):(0,a.jsx)(a.Fragment,{children:Object.entries(B).map(([e,t])=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(g.Badge,{variant:"outline",className:`text-xs font-semibold ${"FINRA"===e?"border-purple-500 text-purple-700 dark:text-purple-300":"SEC"===e?"border-blue-500 text-blue-700 dark:text-blue-300":"Grammar"===e?"border-green-500 text-green-700 dark:text-green-300":""}`,children:e}),(0,a.jsx)(h.Separator,{className:"flex-1"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[t.filter(e=>!e.isApplied).length," pending"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)(q,{suggestion:e,index:e.index,isSelected:j===e.index,onSelect:()=>{var t;let r;return N(t=e.index),void((r=w[t])&&("pdf"===c&&y?_({pageNumber:r.page||1,text:r.originalText,boundingBox:void 0}):O.current&&O.current.highlightText(r.originalText)))},onApply:()=>R(e.index),isApplying:T===e.index},e.index))})]},e))})})]})})]})]})]})})}e.s(["default",()=>eY],70814)}]);