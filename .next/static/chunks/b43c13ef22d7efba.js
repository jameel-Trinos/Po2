(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8558,e=>{"use strict";var t=e.i(43476),r=e.i(71645);async function n(){let t=await e.A(25834);return t.GlobalWorkerOptions.workerSrc||(t.GlobalWorkerOptions.workerSrc="/pdf.worker.mjs"),t}e.s(["default",0,({fileUrl:e,fileName:a="document.pdf",onReady:c,className:i})=>{let s=(0,r.useRef)(null),o=(0,r.useRef)(new Map),l=(0,r.useRef)(new Map),d=(0,r.useRef)(new Map),[u,g]=(0,r.useState)(null),[m,h]=(0,r.useState)(1),[f,x]=(0,r.useState)(0),[b,p]=(0,r.useState)(1.5),[w,k]=(0,r.useState)(!0),[z,v]=(0,r.useState)(null),[y,P]=(0,r.useState)(new Set),j=(0,r.useCallback)(async e=>{try{k(!0),v(null);let t=(await n()).getDocument(e),r=await t.promise;g(r),x(r.numPages),P(new Set),console.log("[PdfViewerPdfJs] PDF loaded successfully:",r.numPages,"pages"),k(!1)}catch(e){console.error("[PdfViewerPdfJs] Error loading PDF:",e),v(e instanceof Error?e.message:"Failed to load PDF document"),k(!1)}},[]),N=(0,r.useCallback)(async e=>{if(!u)return;if(d.current.get(e))return void console.log(`[PdfViewerPdfJs] Page ${e} is already rendering, skipping`);if(!o.current.get(e))return void console.log(`[PdfViewerPdfJs] Canvas not ready for page ${e}, skipping render`);d.current.set(e,!0);let t=l.current.get(e);if(t)try{console.log(`[PdfViewerPdfJs] Cancelling existing render for page ${e}`),await t.cancel(),l.current.delete(e),await new Promise(e=>setTimeout(e,100))}catch(t){console.log(`[PdfViewerPdfJs] Cancellation error for page ${e}:`,t)}try{let t=await u.getPage(e),r=o.current.get(e);if(!r)return void d.current.set(e,!1);let n=r.getContext("2d");if(!n)return void d.current.set(e,!1);let a=t.getViewport({scale:b});n.clearRect(0,0,r.width,r.height),r.width=a.width,r.height=a.height,r.style.width="100%",r.style.height="auto";let c=t.render({canvasContext:n,viewport:a});l.current.set(e,c),await c.promise,l.current.delete(e),P(t=>new Set([...t,e])),console.log(`[PdfViewerPdfJs] Rendered page ${e}/${f}`)}catch(t){l.current.delete(e),t?.name!=="RenderingCancelledException"&&console.error(`[PdfViewerPdfJs] Error rendering page ${e}:`,t)}finally{d.current.set(e,!1)}},[u,b,f]);(0,r.useEffect)(()=>{(async()=>{let e=[];l.current.forEach((t,r)=>{e.push((async()=>{try{await t.cancel()}catch(e){}})())}),await Promise.all(e),l.current.clear(),d.current.clear(),P(new Set)})()},[b]),(0,r.useEffect)(()=>()=>{l.current.forEach(e=>{try{e.cancel()}catch(e){}}),l.current.clear(),d.current.clear()},[]),(0,r.useEffect)(()=>{e&&j(e)},[e,j]),(0,r.useEffect)(()=>{if(u&&f>0){let e=[m,Math.max(1,m-1),Math.min(f,m+1)],t=async()=>{for(let t of e)y.has(t)||d.current.get(t)||(await N(t),await new Promise(e=>setTimeout(e,50)))},r=setTimeout(()=>{t()},100);return()=>clearTimeout(r)}},[u,m,f,N,y]),(0,r.useEffect)(()=>{u&&c&&c({gotoLocation:async({pageNumber:e,zoom:t})=>{if(e>0&&e<=f){h(e),t&&p(t/100);let r=document.getElementById(`pdf-page-${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})}},getCurrentPage:()=>m,getTotalPages:()=>f,reload:async e=>{let t="string"==typeof e?e:URL.createObjectURL(e);await j(t)},search:async e=>{try{for(let t=1;t<=f;t++){let r=await u.getPage(t);if((await r.getTextContent()).items.map(e=>e.str).join(" ").toLowerCase().includes(e.toLowerCase()))return{pageNumber:t}}return null}catch(e){return console.error("[PdfViewerPdfJs] Search error:",e),null}}})},[u,m,f,c,j]);let C=(0,r.useCallback)(()=>{if(!s.current)return;let e=s.current;e.scrollTop;for(let t=1;t<=f;t++){let r=document.getElementById(`pdf-page-${t}`);if(r){let n=r.getBoundingClientRect(),a=e.getBoundingClientRect();if(n.top<=a.top+100&&n.bottom>=a.top){h(t);break}}}},[f]);return z?(0,t.jsx)("div",{className:i??"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 bg-red-50 dark:bg-red-900/10",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-700 dark:text-red-300 mb-2",children:"Failed to Load PDF"}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 text-center max-w-md",children:z})]})}):w?(0,t.jsx)("div",{className:i??"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 bg-zinc-50 dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100 mb-4"}),(0,t.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Loading PDF viewer..."})]})}):(0,t.jsxs)("div",{ref:s,className:i??"w-full h-[75vh] rounded-md overflow-auto border border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900",onScroll:C,children:[(0,t.jsxs)("div",{className:"sticky top-0 z-10 bg-white dark:bg-zinc-800 border-b border-zinc-200 dark:border-zinc-700 px-4 py-2 flex items-center justify-between shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>{let e=Math.max(1,m-1);h(e),document.getElementById(`pdf-page-${e}`)?.scrollIntoView({behavior:"smooth"})},disabled:m<=1,className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:["Page ",m," of ",f]}),(0,t.jsx)("button",{onClick:()=>{let e=Math.min(f,m+1);h(e),document.getElementById(`pdf-page-${e}`)?.scrollIntoView({behavior:"smooth"})},disabled:m>=f,className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"Next"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>p(e=>Math.max(.5,e-.25)),className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"-"}),(0,t.jsxs)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300 min-w-[60px] text-center",children:[Math.round(100*b),"%"]}),(0,t.jsx)("button",{onClick:()=>p(e=>Math.min(3,e+.25)),className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"+"})]})]}),(0,t.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:f},(e,t)=>t+1).map(e=>(0,t.jsx)("div",{id:`pdf-page-${e}`,className:"bg-white dark:bg-white shadow-lg mx-auto",style:{maxWidth:"fit-content"},children:(0,t.jsx)("canvas",{ref:t=>{t?o.current.set(e,t):o.current.delete(e)},className:"block"})},e))})]})}])},90843,e=>{e.n(e.i(8558))},25834,e=>{e.v(t=>Promise.all(["static/chunks/8db77ad2459de92b.js"].map(t=>e.l(t))).then(()=>t(18657)))}]);