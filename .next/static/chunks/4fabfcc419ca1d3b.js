(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8558,e=>{"use strict";var t=e.i(43476),r=e.i(15504);async function n(){let t=await e.A(25834);return t.GlobalWorkerOptions.workerSrc||(t.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${t.version}/build/pdf.worker.min.mjs`),t}e.s(["default",0,({fileUrl:e,fileName:a="document.pdf",onReady:c,className:s})=>{let o=(0,r.useRef)(null),i=(0,r.useRef)(new Map),l=(0,r.useRef)(new Map),d=(0,r.useRef)(new Map),u=(0,r.useRef)(new Map),[m,g]=(0,r.useState)(null),[f,h]=(0,r.useState)(1),[b,x]=(0,r.useState)(0),[p,w]=(0,r.useState)(1.5),[k,z]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null),[P,j]=(0,r.useState)(new Set),N=(0,r.useCallback)(async e=>{try{z(!0),y(null);let t=(await n()).getDocument(e),r=await t.promise;g(r),x(r.numPages),j(new Set),console.log("[PdfViewerPdfJs] PDF loaded successfully:",r.numPages,"pages"),z(!1)}catch(e){console.error("[PdfViewerPdfJs] Error loading PDF:",e),y(e instanceof Error?e.message:"Failed to load PDF document"),z(!1)}},[]),C=(0,r.useCallback)(async e=>{if(!m)return;if(u.current.get(e))return void console.log(`[PdfViewerPdfJs] Page ${e} is already rendering, skipping`);if(!i.current.get(e))return void console.log(`[PdfViewerPdfJs] Canvas not ready for page ${e}, skipping render`);u.current.set(e,!0);let t=l.current.get(e);if(t)try{console.log(`[PdfViewerPdfJs] Cancelling existing render for page ${e}`),await t.cancel(),l.current.delete(e),await new Promise(e=>setTimeout(e,100))}catch(t){console.log(`[PdfViewerPdfJs] Cancellation error for page ${e}:`,t)}try{let t=await m.getPage(e),r=i.current.get(e);if(!r)return void u.current.set(e,!1);let n=r.getContext("2d");if(!n)return void u.current.set(e,!1);let a=t.getViewport({scale:p});n.clearRect(0,0,r.width,r.height),r.width=a.width,r.height=a.height,r.style.width="100%",r.style.height="auto";let c=t.render({canvasContext:n,viewport:a});l.current.set(e,c),await c.promise,l.current.delete(e),j(t=>new Set([...t,e])),console.log(`[PdfViewerPdfJs] Rendered page ${e}/${b}`)}catch(t){l.current.delete(e),t?.name!=="RenderingCancelledException"&&console.error(`[PdfViewerPdfJs] Error rendering page ${e}:`,t)}finally{u.current.set(e,!1)}},[m,p,b]);(0,r.useEffect)(()=>{(async()=>{let e=[];l.current.forEach((t,r)=>{e.push((async()=>{try{await t.cancel()}catch(e){}})())}),await Promise.all(e),l.current.clear(),d.current.forEach(e=>{try{e.abort()}catch(e){}}),d.current.clear(),u.current.clear(),j(new Set)})()},[p]),(0,r.useEffect)(()=>()=>{l.current.forEach(e=>{try{e.cancel()}catch(e){}}),l.current.clear(),d.current.forEach(e=>{try{e.abort()}catch(e){}}),d.current.clear(),u.current.clear()},[]),(0,r.useEffect)(()=>{e&&N(e)},[e,N]),(0,r.useEffect)(()=>{if(m&&b>0){let e=[f,Math.max(1,f-1),Math.min(b,f+1)],t=async()=>{for(let t of e)P.has(t)||u.current.get(t)||(await C(t),await new Promise(e=>setTimeout(e,50)))},r=setTimeout(()=>{t()},100);return()=>clearTimeout(r)}},[m,f,b,C,P]),(0,r.useEffect)(()=>{m&&c&&c({gotoLocation:async({pageNumber:e,zoom:t})=>{if(e>0&&e<=b){h(e),t&&w(t/100);let r=document.getElementById(`pdf-page-${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})}},getCurrentPage:()=>f,getTotalPages:()=>b,reload:async e=>{let t="string"==typeof e?e:URL.createObjectURL(e);await N(t)},search:async e=>{let t=new AbortController;try{for(let r=1;r<=b&&!t.signal.aborted;r++){let t=await m.getPage(r);if((await t.getTextContent()).items.map(e=>e.str).join(" ").toLowerCase().includes(e.toLowerCase()))return{pageNumber:r}}return null}catch(e){if(e?.name==="AbortError"||e?.name==="AbortException"||e?.message?.includes("cancelled")||e?.message?.includes("abort"))return null;return console.error("[PdfViewerPdfJs] Search error:",e),null}}})},[m,f,b,c,N]);let E=(0,r.useCallback)(()=>{if(!o.current)return;let e=o.current;e.scrollTop;for(let t=1;t<=b;t++){let r=document.getElementById(`pdf-page-${t}`);if(r){let n=r.getBoundingClientRect(),a=e.getBoundingClientRect();if(n.top<=a.top+100&&n.bottom>=a.top){h(t);break}}}},[b]);return v?(0,t.jsx)("div",{className:s??"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 bg-red-50 dark:bg-red-900/10",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-700 dark:text-red-300 mb-2",children:"Failed to Load PDF"}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 text-center max-w-md",children:v})]})}):k?(0,t.jsx)("div",{className:s??"w-full h-[75vh] rounded-md overflow-hidden border border-zinc-200 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 bg-zinc-50 dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-zinc-900 dark:border-zinc-100 mb-4"}),(0,t.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Loading PDF viewer..."})]})}):(0,t.jsxs)("div",{ref:o,className:s??"w-full h-[75vh] rounded-md overflow-auto border border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900",onScroll:E,children:[(0,t.jsxs)("div",{className:"sticky top-0 z-10 bg-white dark:bg-zinc-800 border-b border-zinc-200 dark:border-zinc-700 px-4 py-2 flex items-center justify-between shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>{let e=Math.max(1,f-1);h(e),document.getElementById(`pdf-page-${e}`)?.scrollIntoView({behavior:"smooth"})},disabled:f<=1,className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:["Page ",f," of ",b]}),(0,t.jsx)("button",{onClick:()=>{let e=Math.min(b,f+1);h(e),document.getElementById(`pdf-page-${e}`)?.scrollIntoView({behavior:"smooth"})},disabled:f>=b,className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"Next"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>w(e=>Math.max(.5,e-.25)),className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"-"}),(0,t.jsxs)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300 min-w-[60px] text-center",children:[Math.round(100*p),"%"]}),(0,t.jsx)("button",{onClick:()=>w(e=>Math.min(3,e+.25)),className:"px-3 py-1 text-sm bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors",children:"+"})]})]}),(0,t.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:b},(e,t)=>t+1).map(e=>(0,t.jsx)("div",{id:`pdf-page-${e}`,className:"bg-white dark:bg-white shadow-lg mx-auto",style:{maxWidth:"fit-content"},children:(0,t.jsx)("canvas",{ref:t=>{t?i.current.set(e,t):i.current.delete(e)},className:"block"})},e))})]})}])},90843,e=>{e.n(e.i(8558))},25834,e=>{e.v(t=>Promise.all(["static/chunks/8db77ad2459de92b.js"].map(t=>e.l(t))).then(()=>t(18657)))}]);